<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,minimum-scale=1">

  <title>Getting Started</title>
  <meta name="description" content="        Getting Started geosnap provides a set of tools for collecting data and constructing space-time datasets, identifying local neighborhoods or prototyp...">

  <link rel="canonical" href="https://spatialucr.github.io/geosnap-guide//notebooks/01_getting_started.html">
  <link rel="alternate" type="application/rss+xml" title="GEOSNAP USER GUIDE" href="https://spatialucr.github.io/geosnap-guide//feed.xml">

  <meta property="og:url"         content="https://spatialucr.github.io/geosnap-guide//notebooks/01_getting_started.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="Getting Started" />
<meta property="og:description" content="        Getting Started geosnap provides a set of tools for collecting data and constructing space-time datasets, identifying local neighborhoods or prototyp..." />
<meta property="og:image"       content="https://spatialucr.github.io/geosnap-guide/assets/images/geosnap.svg" />

<meta name="twitter:card" content="summary">


  <script type="application/ld+json">
  {
  "@context": "http://schema.org",
  "@type": "NewsArticle",
  "mainEntityOfPage": "https://spatialucr.github.io/geosnap-guide//notebooks/01_getting_started.html",
  "headline": "Getting Started",
  "datePublished": "2019-11-10T15:07:50-08:00",
  "dateModified": "2019-11-10T15:07:50-08:00",
  "description": "        Getting Started geosnap provides a set of tools for collecting data and constructing space-time datasets, identifying local neighborhoods or prototyp...",
  "author": {
    "@type": "Person",
    "name": "eli knaap"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Data 100 at UC Berkeley",
    "logo": {
      "@type": "ImageObject",
      "url": "https://spatialucr.github.io/geosnap-guide/",
      "width": 60,
      "height": 60
    }
  },
  "image": {
    "@type": "ImageObject",
    "url": "https://spatialucr.github.io/geosnap-guide/",
    "height": 60,
    "width": 60
  }
}

  </script>
  <link rel="stylesheet" href="/assets/css/styles.css">

  <!-- <link rel="manifest" href="/manifest.json"> -->
  <!-- <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#efae0a"> -->
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-TileImage" content="/mstile-144x144.png">
  <meta name="theme-color" content="#233947">

  <!-- Favicon -->
  <link rel="shortcut icon" type="image/x-icon" href="/assets/images/geosnap.svg">

  <!-- MathJax Config -->
  <!-- Allow inline math using $ and automatically break long math lines -->
<!-- (mostly) copied from nbconvert configuration -->
<!-- https://github.com/jupyter/nbconvert/blob/master/nbconvert/templates/html/mathjax.tpl -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true,
        processEnvironments: true
    },
    // Center justify equations in code and markdown cells. Elsewhere
    // we use CSS to left justify single line equations in code cells.
    displayAlign: 'center',
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}},
        linebreaks: { automatic: true },
    }
});
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_HTML' async></script>


  <!-- DOM updating function -->
  <script src="/assets/js/page/dom-update.js"></script>

  <!-- Selectors for elements on the page -->
  <script src="/assets/js/page/documentSelectors.js"></script>

  <!-- Define some javascript variables that will be useful in other javascript -->
  <script>
    const site_basename = '/';
  </script>

  <!-- Add AnchorJS to let headers be linked -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js" async></script>
  <script src="/assets/js/page/anchors.js" async></script>

  <!-- Include Turbolinks to make page loads fast -->
  <!-- https://github.com/turbolinks/turbolinks -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/turbolinks/5.2.0/turbolinks.js" async></script>
  <meta name="turbolinks-cache-control" content="no-cache">

  <!-- Load nbinteract for widgets -->
  

  <!-- Load Thebelab for interactive widgets -->
  <!-- Include Thebelab for interactive code if it's enabled -->



  <!-- Load the auto-generating TOC (non-async otherwise the TOC won't load w/ turbolinks) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js" async></script>
  <script src="/assets/js/page/tocbot.js"></script>

  <!-- Google analytics -->
  
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '');
</script>



  <!-- Clipboard copy button -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" async></script>

  <!-- Load custom website scripts -->
  <script src="/assets/js/scripts.js" async></script>

  <!-- Load custom user CSS and JS  -->
  <script src="/assets/custom/custom.js" async></script>
  <link rel="stylesheet" href="/assets/custom/custom.css">

  <!-- Update interact links w/ REST param, is defined in includes so we can use templates -->
  
<script>
/**
  * To auto-embed hub URLs in interact links if given in a RESTful fashion
 */

function getJsonFromUrl(url) {
  var query = url.split('?');
  if (query.length < 2) {
    // No queries so just return false
    return false;
  }
  query = query[1];
  // Collect REST params into a dictionary
  var result = {};
  query.split("&").forEach(function(part) {
    var item = part.split("=");
    result[item[0]] = decodeURIComponent(item[1]);
  });
  return result;
}
    
function dict2param(dict) {
    params = Object.keys(dict).map(function(k) {
        return encodeURIComponent(k) + '=' + encodeURIComponent(dict[k])
    });
    return params.join('&')
}

// Parse a Binder URL, converting it to the string needed for JupyterHub
function binder2Jupyterhub(url) {
  newUrl = {};
  parts = url.split('v2/gh/')[1];
  // Grab the base repo information
  repoinfo = parts.split('?')[0];
  var [org, repo, ref] = repoinfo.split('/');
  newUrl['repo'] = ['https://github.com', org, repo].join('/');
  newUrl['branch'] = ref
  // Grab extra parameters passed
  params = getJsonFromUrl(url);
  if (params['filepath'] !== undefined) {
    newUrl['subPath'] = params['filepath']
  }
  return dict2param(newUrl);
}

// Filter out potentially unsafe characters to prevent xss
function safeUrl(url)
{
   return String(encodeURIComponent(url))
            .replace(/&/g, '&amp;')
            .replace(/"/g, '&quot;')
            .replace(/'/g, '&#39;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;');
}

function addParamToInternalLinks(hub) {
  var links = document.querySelectorAll("a").forEach(function(link) {
    var href = link.href;
    // If the link is an internal link...
    if (href.search("https://spatialucr.github.io/geosnap-guide") !== -1 || href.startsWith('/') || href.search("127.0.0.1:") !== -1) {
      // Assume we're an internal link, add the hub param to it
      var params = getJsonFromUrl(href);
      if (params !== false) {
        // We have REST params, so append a new one
        params['jupyterhub'] = hub;
      } else {
        // Create the REST params
        params = {'jupyterhub': hub};
      }
      // Update the link
      var newHref = href.split('?')[0] + '?' + dict2param(params);
      link.setAttribute('href', decodeURIComponent(newHref));
    }
  });
  return false;
}


// Update interact links
function updateInteractLink() {
    // hack to make this work since it expects a ? in the URL
    rest = getJsonFromUrl("?" + location.search.substr(1));
    jupyterHubUrl = rest['jupyterhub'];
    var hubType = null;
    var hubUrl = null;
    if (jupyterHubUrl !== undefined) {
      hubType = 'jupyterhub';
      hubUrl = jupyterHubUrl;
    }

    if (hubType !== null) {
      // Sanitize the hubUrl
      hubUrl = safeUrl(hubUrl);

      // Add HTTP text if omitted
      if (hubUrl.indexOf('http') < 0) {hubUrl = 'http://' + hubUrl;}
      var interactButtons = document.querySelectorAll("button.interact-button")
      var lastButton = interactButtons[interactButtons.length-1];
      var link = lastButton.parentElement;

      // If we've already run this, skip the link updating
      if (link.nextElementSibling !== null) {
        return;
      }

      // Update the link and add context div
      var href = link.getAttribute('href');
      if (lastButton.id === 'interact-button-binder') {
        // If binder links exist, we need to re-work them for jupyterhub
        if (hubUrl.indexOf('http%3A%2F%2Flocalhost') > -1) {
          // If localhost, assume we're working from a local Jupyter server and remove `/hub`
          first = [hubUrl, 'git-sync'].join('/')
        } else {
          first = [hubUrl, 'hub', 'user-redirect', 'git-sync'].join('/')
        }
        href = first + '?' + binder2Jupyterhub(href);
      } else {
        // If interact button isn't binderhub, assume it's jupyterhub
        // If JupyterHub links, we only need to replace the hub url
        href = href.replace("", hubUrl);
        if (hubUrl.indexOf('http%3A%2F%2Flocalhost') > -1) {
          // Assume we're working from a local Jupyter server and remove `/hub`
          href = href.replace("/hub/user-redirect", "");
        }
      }
      link.setAttribute('href', decodeURIComponent(href));

      // Add text after interact link saying where we're launching
      hubUrlNoHttp = decodeURIComponent(hubUrl).replace('http://', '').replace('https://', '');
      link.insertAdjacentHTML('afterend', '<div class="interact-context">on ' + hubUrlNoHttp + '</div>');

      // Update internal links so we retain the hub url
      addParamToInternalLinks(hubUrl);
    }
}

runWhenDOMLoaded(updateInteractLink)
document.addEventListener('turbolinks:load', updateInteractLink)
</script>


  <!-- Lunr search code - will only be executed on the /search page -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.6/lunr.min.js" async></script>
  <script>var initQuery = function() {
  // See if we have a search box
  var searchInput = document.querySelector('input#lunr_search');
  if (searchInput === null) {
    return;
  }

  // Function to parse our lunr cache
  var idx = lunr(function () {
    this.field('title')
    this.field('excerpt')
    this.field('categories')
    this.field('tags')
    this.ref('id')

    this.pipeline.remove(lunr.trimmer)

    for (var item in store) {
      this.add({
        title: store[item].title,
        excerpt: store[item].excerpt,
        categories: store[item].categories,
        tags: store[item].tags,
        id: item
      })
    }
  });

  // Run search upon keyup
  searchInput.addEventListener('keyup', function () {
    var resultdiv = document.querySelector('#results');
    var query = document.querySelector("input#lunr_search").value.toLowerCase();
    var result =
      idx.query(function (q) {
        query.split(lunr.tokenizer.separator).forEach(function (term) {
          q.term(term, { boost: 100 })
          if(query.lastIndexOf(" ") != query.length-1){
            q.term(term, {  usePipeline: false, wildcard: lunr.Query.wildcard.TRAILING, boost: 10 })
          }
          if (term != ""){
            q.term(term, {  usePipeline: false, editDistance: 1, boost: 1 })
          }
        })
      });

      // Empty the results div
      while (resultdiv.firstChild) {
        resultdiv.removeChild(resultdiv.firstChild);
      }

    resultdiv.insertAdjacentHTML('afterbegin', '<p class="results__found">'+result.length+' Result(s) found</p>');
    for (var item in result) {
      var ref = result[item].ref;
      if(store[ref].teaser){
        var searchitem =
          '<div class="list__item">'+
            '<article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">'+
              '<h2 class="archive__item-title" itemprop="headline">'+
                '<a href="'+store[ref].url+'" rel="permalink">'+store[ref].title+'</a>'+
              '</h2>'+
              '<div class="archive__item-teaser">'+
                '<img src="'+store[ref].teaser+'" alt="">'+
              '</div>'+
              '<p class="archive__item-excerpt" itemprop="description">'+store[ref].excerpt.split(" ").splice(0,20).join(" ")+'...</p>'+
            '</article>'+
          '</div>';
      }
      else{
    	  var searchitem =
          '<div class="list__item">'+
            '<article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">'+
              '<h2 class="archive__item-title" itemprop="headline">'+
                '<a href="'+store[ref].url+'" rel="permalink">'+store[ref].title+'</a>'+
              '</h2>'+
              '<p class="archive__item-excerpt" itemprop="description">'+store[ref].excerpt.split(" ").splice(0,20).join(" ")+'...</p>'+
            '</article>'+
          '</div>';
      }
      resultdiv.insertAdjacentHTML('beforeend', searchitem);
    }
  });
};

initFunction(initQuery);
</script>

  <!-- Load JS that depends on site variables -->
  <script src="/assets/js/page/copy-button.js" async></script>

  <!-- Hide cell code -->
  <script src="/assets/js/page/hide-cell.js" async></script>

  <!-- Printing the screen -->
  <!-- Include nbinteract for interactive widgets -->
<script src="https://printjs-4de6.kxcdn.com/print.min.js" async></script>
<script>
printContent = () => {
    // MathJax displays a second version of any math for assistive devices etc.
    // This prevents double-rendering in the PDF output.
    var ignoreAssistList = [];
    assistives = document.querySelectorAll('.MathJax_Display span.MJX_Assistive_MathML').forEach((element, index) => {
        var thisId = 'MathJax-assistive-' + index.toString();
        element.setAttribute('id', thisId);
        ignoreAssistList.push(thisId)
    });

    // Print the actual content object
    printJS({
        printable: 'textbook_content',
        type: 'html',
        css: "/assets/css/styles.css",
        style: "#textbook_content {padding-top: 40px};",
        scanStyles: false,
        targetStyles: ["*"],
        ignoreElements: ignoreAssistList,
        documentTitle: "Made with Jupyter Book"
    })
};

initPrint = () => {
    document.querySelector('#interact-button-print').addEventListener('click', printContent)
}

initFunction(initPrint)
</script>

</head>

  <body>
    <!-- .js-show-sidebar shows sidebar by default -->
    <div id="js-textbook" class="c-textbook js-show-sidebar">
      



<nav id="js-sidebar" class="c-textbook__sidebar">
  <a href="https://github.com/spatialucr/geosnap"><img src="/assets/images/geosnap.svg" class="textbook_logo" id="sidebar-logo" alt="textbook logo" data-turbolinks-permanent/></a>
  <h2 class="c-sidebar__title">GEOSNAP USER GUIDE</h2>
  <ul class="c-sidebar__chapters">
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/README.html"
        >
          
          Introduction
        </a>

        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry c-sidebar__entry--active"
          href="/notebooks/01_getting_started.html"
        >
          
          Getting Started
        </a>

        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/notebooks/02_creating_community_datasets.html"
        >
          
          Creating Datasets
        </a>

        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/notebooks/03_harmonizing_community_boundaries.html"
        >
          
          Harmonizing Community Boundaries
        </a>

        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/notebooks/04_modeling_neighborhood_types.html"
        >
          
          Modeling Neighborhood Types
        </a>

        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/notebooks/05_modeling_neighborhood_dynamics.html"
        >
          
          Modeling Neighborhood Dynamics
        </a>

        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/notebooks/06_visualizing_neighborhood_sequences.html"
        >
          
          Visualizing Neighborhood Sequences
        </a>

        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="/notebooks/07_interactive_visualization.html"
        >
          
          Interactive Visualization
        </a>

        
      </li>

      
    
      
      
        <li class="c-sidebar__divider"></li>
        
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="https://spatialucr.github.io/geosnap/api.html"
        >
          
          API Documentation
        </a>

        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href="https://github.com/spatialucr/geosnap"
        >
          
          Github Repository
        </a>

        
      </li>

      
    
      
      

      
      

      
      
      <li class="c-sidebar__chapter">
        <a class="c-sidebar__entry "
          href=".html"
        >
          
          
        </a>

        
      </li>

      
    
  </ul>
  <p class="sidebar_footer"></p>
</nav>

      
      <div class="c-topbar" id="top-navbar">
  <!-- We show the sidebar by default so we use .is-active -->
  <div class="c-topbar__buttons">
    <button
      id="js-sidebar-toggle"
      class="hamburger hamburger--arrowalt is-active"
    >
      <span class="hamburger-box">
        <span class="hamburger-inner"></span>
      </span>
    </button>
    <div class="buttons">
<div class="download-buttons-dropdown">
    <button id="dropdown-button-trigger" class="interact-button"><img src="/assets/images/download-solid.svg" alt="Download" /></button>
    <div class="download-buttons">
        <a href="/content/notebooks/01_getting_started.ipynb" download>
        <button id="interact-button-download" class="interact-button">.ipynb</button>
        </a>
        
        <a id="interact-button-print"><button id="interact-button-download" class="interact-button">.pdf</button></a>
    </div>
</div>


  
  
  






<a href="https://mybinder.org/v2/gh/spatialucr/geosnap/master?urlpath=lab/tree/content%2Fnotebooks%2F01_getting_started.ipynb"><button class="interact-button" id="interact-button-binder"><img class="interact-button-logo" src="/assets/images/logo_binder.svg" alt="Interact" />Interact</button></a>
  


</div>

  </div>
  <!-- Empty sidebar placeholder that we'll auto-fill with javascript -->
  <aside class="sidebar__right">
    <header><h4 class="nav__title"><img src="/assets/images/list-solid.svg" alt="Search" />   On this page</h4></header>
    <nav class="onthispage">
    </nav>
  </aside>
  <a href="/search.html" class="topbar-right-button" id="search-button">
    <img src="/assets/images/search-solid.svg" alt="Search" />
  </a>
</div>

      <main class="c-textbook__page" tabindex="-1">
            <div class="c-textbook__content" id="textbook_content">
                  <main class="jupyter-page">
    
<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Getting-Started">Getting Started<a class="anchor-link" href="#Getting-Started"> </a></h1>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>geosnap provides a set of tools for collecting data and constructing space-time datasets, identifying local neighborhoods or prototypical neighborhood types, modeling neighborhood change over time, and visualizing data at each step of the process.</p>
<p>geosnap works with data from anywhere in the world, but comes batteries-included with three decades of national US Census data, including boundaries for metropolitan statistical areas, states, counties, and tracts, and over 100 commonly used demographic and socioeconomic variables at the census-tract level. All of these data are stored as geopandas geodataframes in efficient <a href="https://parquet.apache.org/">apache parquet</a> files and distributed through <a href="https://quiltdata.com/">quilt</a>.</p>
<p>These data are available when you first import geosnap by streaming from our <a href="https://spatialucr.quiltdata.com/b/quilt-cgs">quilt bucket</a> into memory. That can be useful if you dont need US data or if you just want to kick the tires, but it also means you need an internet connection to work with census data, and things may slow down depending on your network performance. For that reason, you can also use the <code>store_census</code> function to cache the data on your local machine for faster querying. This will only take around 400mb of disk space, speed up data operations, and remove the need for an internet connection.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Using-built-in-data">Using built-in data<a class="anchor-link" href="#Using-built-in-data"> </a></h2>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can access geosnap's built-in data from the <code>data_store</code> object in the data module. It contains a variable codebook as well as state, county, and MSA boundaries, in addition to boundaries and social data for three decades of census tracts. If you have stored an existing longitudinal database such as LTDB or the Geolytics Neighborhood Change Database, it will be available in the data store as well.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">geosnap.data</span> <span class="k">import</span> <span class="n">data_store</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">dir</span><span class="p">(</span><span class="n">data_store</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[&#39;codebook&#39;,
 &#39;counties&#39;,
 &#39;ltdb&#39;,
 &#39;msa_definitions&#39;,
 &#39;msas&#39;,
 &#39;ncdb&#39;,
 &#39;states&#39;,
 &#39;tracts_1990&#39;,
 &#39;tracts_2000&#39;,
 &#39;tracts_2010&#39;]</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Everything in <code>data_store</code> is a pandas (or geopandas) geo/dataframe. To access any of the data inside, just call the appropriate attribute/method (most datasets are methods). For example, to accesss the codebook which outlines each variable in the data store, incuding its name, description, the original census sources/variable names and the formula used to calculate it, you simply call <code>data_store.codebook</code>. We support the same variable set the Longitudinal Tract Database (LTDB).</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data_store</span><span class="o">.</span><span class="n">codebook</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>variable</th>
      <th>label</th>
      <th>formula</th>
      <th>ltdb</th>
      <th>ncdb</th>
      <th>census_1990_form</th>
      <th>census_1990_table_column</th>
      <th>census_2000_form</th>
      <th>census_2000_table_column</th>
      <th>acs</th>
      <th>category</th>
      <th>notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>189</th>
      <td>p_poverty_rate_black</td>
      <td>percentage of blacks in poverty</td>
      <td>p_poverty_rate_black=n_poverty_black / n_pover...</td>
      <td>pbpov</td>
      <td>BLKPR</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Socioeconomic Status</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>190</th>
      <td>p_poverty_rate_hispanic</td>
      <td>percentage of Hispanics in poverty</td>
      <td>p_poverty_rate_hispanic=n_poverty_hispanic / n...</td>
      <td>phpov</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Socioeconomic Status</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>191</th>
      <td>p_poverty_rate_native</td>
      <td>percentage of Native Americans in poverty</td>
      <td>p_poverty_rate_native=n_poverty_native / n_pov...</td>
      <td>pnapov</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Socioeconomic Status</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>192</th>
      <td>p_poverty_rate_asian</td>
      <td>percentage of Asian and Pacific Islanders in p...</td>
      <td>p_poverty_rate_asian=n_poverty_asian / n_pover...</td>
      <td>papov</td>
      <td>RASPR</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Socioeconomic Status</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>193</th>
      <td>n_total_pop</td>
      <td>total population</td>
      <td>NaN</td>
      <td>pop</td>
      <td>TRCTPOP</td>
      <td>SF1</td>
      <td>P0010001</td>
      <td>SF1</td>
      <td>P001001</td>
      <td>B01001_001E</td>
      <td>total population</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can also take a look at the dataframes themselves or plot them as quick choropleth maps</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data_store</span><span class="o">.</span><span class="n">tracts_2000</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>geoid</th>
      <th>median_contract_rent</th>
      <th>median_home_value</th>
      <th>median_household_income</th>
      <th>median_income_asianhh</th>
      <th>median_income_blackhh</th>
      <th>median_income_hispanichh</th>
      <th>median_income_whitehh</th>
      <th>n_age_5_older</th>
      <th>n_asian_age_distribution</th>
      <th>...</th>
      <th>p_vacant_housing_units</th>
      <th>p_veterans</th>
      <th>p_vietnamese_persons</th>
      <th>p_white_over_60</th>
      <th>p_white_over_65</th>
      <th>p_white_under_15</th>
      <th>p_widowed_divorced</th>
      <th>per_capita_income</th>
      <th>year</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>01071950100</td>
      <td>248</td>
      <td>58000</td>
      <td>31028</td>
      <td>0</td>
      <td>0</td>
      <td>51250</td>
      <td>30631</td>
      <td>5792</td>
      <td>7</td>
      <td>...</td>
      <td>10.47</td>
      <td>8.85</td>
      <td>0.03</td>
      <td>15.38</td>
      <td>10.54</td>
      <td>20.31</td>
      <td>18.69</td>
      <td>13445</td>
      <td>2000</td>
      <td>POLYGON ((-85.659972 34.755957, -85.660201 34....</td>
    </tr>
    <tr>
      <th>1</th>
      <td>01071950200</td>
      <td>281</td>
      <td>56600</td>
      <td>29519</td>
      <td>0</td>
      <td>25446</td>
      <td>29063</td>
      <td>30995</td>
      <td>3618</td>
      <td>9</td>
      <td>...</td>
      <td>10.30</td>
      <td>10.36</td>
      <td>0.00</td>
      <td>18.57</td>
      <td>13.48</td>
      <td>17.32</td>
      <td>25.19</td>
      <td>16321</td>
      <td>2000</td>
      <td>POLYGON ((-85.771604 34.917734, -85.772938 34....</td>
    </tr>
    <tr>
      <th>2</th>
      <td>01071950300</td>
      <td>209</td>
      <td>52700</td>
      <td>32340</td>
      <td>31250</td>
      <td>20972</td>
      <td>23182</td>
      <td>34021</td>
      <td>5899</td>
      <td>12</td>
      <td>...</td>
      <td>12.60</td>
      <td>8.31</td>
      <td>0.00</td>
      <td>16.19</td>
      <td>11.71</td>
      <td>16.84</td>
      <td>22.63</td>
      <td>15718</td>
      <td>2000</td>
      <td>POLYGON ((-86.02624400000001 34.783033, -86.02...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>01071950400</td>
      <td>229</td>
      <td>51000</td>
      <td>33328</td>
      <td>28750</td>
      <td>0</td>
      <td>16250</td>
      <td>33442</td>
      <td>2302</td>
      <td>3</td>
      <td>...</td>
      <td>15.36</td>
      <td>8.35</td>
      <td>0.00</td>
      <td>16.46</td>
      <td>11.32</td>
      <td>21.32</td>
      <td>16.54</td>
      <td>13755</td>
      <td>2000</td>
      <td>POLYGON ((-86.32297199999999 34.741224, -86.32...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>01071950500</td>
      <td>233</td>
      <td>70100</td>
      <td>35319</td>
      <td>0</td>
      <td>65417</td>
      <td>0</td>
      <td>35446</td>
      <td>3216</td>
      <td>2</td>
      <td>...</td>
      <td>7.91</td>
      <td>10.68</td>
      <td>0.00</td>
      <td>16.09</td>
      <td>11.52</td>
      <td>19.24</td>
      <td>16.02</td>
      <td>15556</td>
      <td>2000</td>
      <td>POLYGON ((-86.171466 34.621673, -86.1737300000...</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 192 columns</p>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data_store</span><span class="o">.</span><span class="n">states</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1269f2c50&gt;</pre>
</div>

</div>
</div>
<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_png output_subarea ">
<img src="../images/notebooks/01_getting_started_10_1.png"
width=368
height=79
>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="k">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">axs</span> <span class="o">=</span> <span class="n">axs</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

<span class="n">data_store</span><span class="o">.</span><span class="n">tracts_1990</span><span class="p">()[</span><span class="n">data_store</span><span class="o">.</span><span class="n">tracts_1990</span><span class="p">()</span><span class="o">.</span><span class="n">geoid</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;11&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;median_household_income&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s1">&#39;median_household_income&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;YlOrBr&#39;</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;quantiles&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="mi">1990</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

<span class="n">data_store</span><span class="o">.</span><span class="n">tracts_2000</span><span class="p">()[</span><span class="n">data_store</span><span class="o">.</span><span class="n">tracts_2000</span><span class="p">()</span><span class="o">.</span><span class="n">geoid</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;11&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;median_household_income&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s1">&#39;median_household_income&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;YlOrBr&#39;</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;quantiles&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

<span class="n">data_store</span><span class="o">.</span><span class="n">tracts_2010</span><span class="p">()[</span><span class="n">data_store</span><span class="o">.</span><span class="n">tracts_2010</span><span class="p">()</span><span class="o">.</span><span class="n">geoid</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;11&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;median_household_income&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s1">&#39;median_household_income&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;YlOrBr&#39;</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;quantiles&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="mi">2010</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(-77.1302772, -76.89887680000001, 38.781471749999994, 39.00528325)</pre>
</div>

</div>
</div>
<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_png output_subarea ">
<img src="../images/notebooks/01_getting_started_12_1.png"
width=851
height=268
>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As mentioned above, you save these data locally for better performance using <code>geosnap.data.store_census</code>, which will download two quilt packages totaling just over 400mb (which is an exceedingly small file size, when you consider how much data are packed into those files). Once data are stored locally, you won't need this function again unless you want to update your local package to the most recent version on quilt.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">geosnap.data</span> <span class="k">import</span> <span class="n">store_census</span>
<span class="n">store_census</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>Copying: 100%|██████████| 327M/327M [01:56&lt;00:00, 2.81MB/s]    
Copying: 100%|██████████| 86.1M/86.1M [00:14&lt;00:00, 6.10MB/s]  
</pre>
</div>
</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Using geosnap's built-in data, researchers can get a jumpstart on neighborhood analysis with US tract data, but census tracts are not without their drawbacks. Many of geosnap's analytics require that neighborhood units remain consistent and stable in a study area over time (how can you analyze neighborhood change if your neighborhoods are different in each time period?), but with each new decennial census, tracts are redrawn according to population fluctuations. Geosnap offers two methods for dealing with this challenge.</p>
<p>First, geosnap can create its own set of stable longitudinal units of analysis and convert raw census or other data into those units. Its <code>harmonize</code> module provides tools for researchers to define a set of geographic units and interpolate data into those units using moden spatial statistical methods. This is a good option for researchers who are interested in the ways that different interpolation methods can affect their analyses or those who want to use state-of-the-art methods to create longitudinal datasets that are more accurate than those provided by existing databases.</p>
<p>Second, geosnap can simply leverage existing data that has already been standardized into a set of consistent units. The <code>data</code> module provides tools for reading and storing existing longitudinal databases that, once ingested, will be available in the data store and can be queried and analyzed repeatedly. This is a good option for researchers who want to get started modeling neighborhood characteristics right away and are less interested in exploring how error propagates through spatial interpolation.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Storing-Data-from-External-Databases">Storing Data from External Databases<a class="anchor-link" href="#Storing-Data-from-External-Databases"> </a></h2>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The quickest way to get started with geosnap is by importing pre-harmonized census data from either the <a href="https://s4.ad.brown.edu/projects/diversity/Researcher/LTDB.htm">Longitudinal Tract Database
(LTDB)</a> created by researchers from Brown University or the <a href="http://www.geolytics.com/USCensus,Neighborhood-Change-Database-1970-2000,Products.asp">Neighborhood Change Database</a> created by the consulting company Geolytics. While licensing restrictions prevent either of these databases from being distributed inside geosnap, LTDB is nonetheless <em>free</em>. As such, we recommended importing LTDB data before getting started with geosnap</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Longitudinal-Tract-Database-(LTDB)">Longitudinal Tract Database (LTDB)<a class="anchor-link" href="#Longitudinal-Tract-Database-(LTDB)"> </a></h3><p>The <a href="https://s4.ad.brown.edu/projects/diversity/Researcher/LTDB.htm">Longitudinal Tract Database
(LTDB)</a> is a
freely available dataset developed by researchers at Brown University that
provides 1970-2010 census data harmonized to 2010 boundaries.</p>
<p>To store LTDB data and make it available to geosnap, proceed with the following:</p>
<ol>
<li>Download the raw data from the LTDB <a href="https://s4.ad.brown.edu/projects/diversity/Researcher/LTBDDload/Default.aspx">downloads
page</a>.
Note that to construct the entire database you will need two archives: one
containing the sample variables, and another containing the "full count"
variables.<ul>
<li>Use the dropdown menu called <strong>select file type</strong> and choose "full"; in
the dropdown called <strong>select a year</strong>, choose "All Years"</li>
<li>Click the button "Download Standard Data Files"</li>
<li>Repeat the process, this time selecting "sample" in the <strong>select file
type</strong> menu and "All years" in the <strong>select a year</strong> dropdown</li>
</ul>
</li>
<li><p>Note the location of the two zip archives you downloaded. By default they are called</p>
<ul>
<li><code>LTDB_Std_All_Sample.zip</code> and</li>
<li><code>LTDB_Std_All_fullcount.zip</code></li>
</ul>
</li>
<li><p>Start ipython/jupyter, import geosnap, and call the <code>store_ltdb</code> function with the paths of the two zip archives you downloaded from the LTDB project page:</p>
</li>
</ol>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">geosnap.data</span> <span class="k">import</span> <span class="n">store_ltdb</span>

<span class="c1"># if the archives were in my downloads folder, the paths might be something like this</span>
<span class="n">sample</span> <span class="o">=</span> <span class="s2">&quot;/Users/knaaptime/Downloads/LTDB_Std_All_Sample.zip&quot;</span>
<span class="n">full</span> <span class="o">=</span> <span class="s2">&quot;/Users/knaaptime/Downloads/LTDB_Std_All_fullcount.zip&quot;</span>

<span class="n">store_ltdb</span><span class="p">(</span><span class="n">sample</span><span class="o">=</span><span class="n">sample</span><span class="p">,</span> <span class="n">fullcount</span><span class="o">=</span><span class="n">full</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>Hashing: 100%|██████████| 300M/300M [00:02&lt;00:00, 131MB/s]  
</pre>
</div>
</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>That function will extract the necessary data from the archives, calculate additional variables using formulas from the codebook, create a new local quilt package for storing the data, and register the database with the <code>data_store</code>. After the function has run, you will be able to access the LTDB data as a long-form geodataframe by calling the <code>ltdb</code> attribute from the data store. As with the <code>store_census</code> function above, this only needs to be run a single time to save the data as a local quit package and register it with geosnap. You won't neeed to store the data again unless there's an update to the variable formulas in the codebook.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data_store</span><span class="o">.</span><span class="n">ltdb</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>n_asian_under_15</th>
      <th>n_black_under_15</th>
      <th>n_hispanic_under_15</th>
      <th>n_native_under_15</th>
      <th>n_white_under_15</th>
      <th>n_persons_under_18</th>
      <th>n_asian_over_60</th>
      <th>n_black_over_60</th>
      <th>n_hispanic_over_60</th>
      <th>n_native_over_60</th>
      <th>...</th>
      <th>n_white_persons</th>
      <th>year</th>
      <th>n_total_housing_units_sample</th>
      <th>p_nonhisp_white_persons</th>
      <th>p_white_over_60</th>
      <th>p_black_over_60</th>
      <th>p_hispanic_over_60</th>
      <th>p_native_over_60</th>
      <th>p_asian_over_60</th>
      <th>p_disabled</th>
    </tr>
    <tr>
      <th>geoid</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>01001020500</th>
      <td>NaN</td>
      <td>1.121662</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.802740</td>
      <td>3.284181</td>
      <td>NaN</td>
      <td>0.301098</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>5.794934</td>
      <td>1970</td>
      <td>2.166366</td>
      <td>NaN</td>
      <td>6.433142</td>
      <td>3.514090</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4.737847</td>
    </tr>
    <tr>
      <th>01003010100</th>
      <td>NaN</td>
      <td>609.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>639.000000</td>
      <td>1407.000000</td>
      <td>NaN</td>
      <td>221.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>2003.999981</td>
      <td>1970</td>
      <td>1106.000000</td>
      <td>NaN</td>
      <td>8.299712</td>
      <td>6.368876</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>5.821326</td>
    </tr>
    <tr>
      <th>01003010200</th>
      <td>NaN</td>
      <td>37.567365</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>564.014945</td>
      <td>686.748041</td>
      <td>NaN</td>
      <td>27.861793</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>1757.910752</td>
      <td>1970</td>
      <td>619.433984</td>
      <td>NaN</td>
      <td>13.313281</td>
      <td>1.480888</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>6.248800</td>
    </tr>
    <tr>
      <th>01003010300</th>
      <td>NaN</td>
      <td>374.853457</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>981.543199</td>
      <td>1523.971872</td>
      <td>NaN</td>
      <td>103.848314</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>2835.404427</td>
      <td>1970</td>
      <td>1025.805309</td>
      <td>NaN</td>
      <td>8.023381</td>
      <td>2.788906</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>7.214156</td>
    </tr>
    <tr>
      <th>01003010400</th>
      <td>NaN</td>
      <td>113.203816</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>796.944763</td>
      <td>1029.919527</td>
      <td>NaN</td>
      <td>37.127235</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>2323.133371</td>
      <td>1970</td>
      <td>780.370269</td>
      <td>NaN</td>
      <td>11.072073</td>
      <td>1.427952</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>11.205555</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 192 columns</p>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Geolytics-Neighborhood-Change-Database">Geolytics Neighborhood Change Database<a class="anchor-link" href="#Geolytics-Neighborhood-Change-Database"> </a></h3><p>The Neighborhood Change Database (ncdb) is a commercial database created by Geolytics and the Urban Institute. Like LTDB, it provides census data harmonized to 2010 tracts. NCDB data must be purchased from Geolytics prior to use. If you have a license, you can import NCDB into geosnap with the following:</p>
<ol>
<li>Open the Geolytics application</li>
<li>Choose "New Request":<br>
<img src="https://raw.githubusercontent.com/spatialucr/geosnap/master/geosnap/doc/figs/geolytics_interface1.PNG" alt="Choose &quot;New Request&quot;"></li>
<li>Select CSV or DBF</li>
<li>Make the following Selections:<ul>
<li><strong>year</strong>: all years in 2010 boundaries</li>
<li><strong>area</strong>: all census tracts in the entire united states</li>
<li><strong>counts</strong>: [right click] Check All Sibling Nodes</li>
</ul>
</li>
</ol>
<p><img src="https://raw.githubusercontent.com/spatialucr/geosnap/master/geosnap/doc/figs/geolytics_interface2.PNG" alt=""></p>
<ol>
<li><p>Click <code>Run Report</code></p>
</li>
<li><p>Note the name and location of the CSV you created</p>
</li>
<li><p>Start ipython/jupyter, import geosnap, and call the <code>store_ncdb</code> function with the path of the CSV:</p>
</li>
</ol>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">geosnap.data</span> <span class="k">import</span> <span class="n">store_ncdb</span>

<span class="n">ncdb_path</span> <span class="o">=</span> <span class="s2">&quot;~/Downloads/ncdb.csv&quot;</span>

<span class="c1"># note this will raise several warnings since NCDB does not contain all the underlying data necessary to calculate all the variables in the codebook</span>
<span class="n">store_ncdb</span><span class="p">(</span><span class="n">ncdb_path</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As with above, you can access the geolytics data through the <code>ncdb</code> attribute of the <code>data_store</code></p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data_store</span><span class="o">.</span><span class="n">ncdb</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>n_mexican_pop</th>
      <th>n_cuban_pop</th>
      <th>n_puerto_rican_pop</th>
      <th>n_foreign_born_pop</th>
      <th>n_naturalized_pop</th>
      <th>p_foreign_born_pop</th>
      <th>n_total_housing_units</th>
      <th>n_vacant_housing_units</th>
      <th>n_occupied_housing_units</th>
      <th>...</th>
      <th>p_vacant_housing_units</th>
      <th>p_owner_occupied_units</th>
      <th>p_persons_under_18</th>
      <th>p_married</th>
      <th>p_female_headed_families</th>
      <th>p_nonhisp_white_persons</th>
      <th>p_employed_professional</th>
      <th>p_employed_manufacturing</th>
      <th>p_poverty_rate_hispanic</th>
      <th>p_poverty_rate_native</th>
    </tr>
    <tr>
      <th>geoid</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>01001020100</th>
      <td>1980</td>
      <td>0</td>
      <td>0.0</td>
      <td>0</td>
      <td>9.0</td>
      <td>NaN</td>
      <td>0.528790</td>
      <td>555</td>
      <td>43</td>
      <td>511</td>
      <td>...</td>
      <td>7.747748</td>
      <td>92.072072</td>
      <td>NaN</td>
      <td>inf</td>
      <td>NaN</td>
      <td>91.363102</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>01001020100</th>
      <td>1990</td>
      <td>0</td>
      <td>0.0</td>
      <td>0</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>0.000000</td>
      <td>697</td>
      <td>45</td>
      <td>651</td>
      <td>...</td>
      <td>6.456241</td>
      <td>93.400287</td>
      <td>NaN</td>
      <td>30.506058</td>
      <td>NaN</td>
      <td>99.301075</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>01001020100</th>
      <td>2000</td>
      <td>0</td>
      <td>0.0</td>
      <td>0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>741</td>
      <td>81</td>
      <td>659</td>
      <td>...</td>
      <td>10.931174</td>
      <td>88.933873</td>
      <td>NaN</td>
      <td>31.743869</td>
      <td>NaN</td>
      <td>95.527157</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>01001020100</th>
      <td>2010</td>
      <td>30</td>
      <td>1.0</td>
      <td>2</td>
      <td>18.0</td>
      <td>0.0</td>
      <td>0.941423</td>
      <td>752</td>
      <td>59</td>
      <td>693</td>
      <td>...</td>
      <td>7.845745</td>
      <td>92.154255</td>
      <td>NaN</td>
      <td>30.960157</td>
      <td>NaN</td>
      <td>84.205021</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>01001020200</th>
      <td>1980</td>
      <td>7</td>
      <td>0.0</td>
      <td>0</td>
      <td>22.0</td>
      <td>NaN</td>
      <td>1.043148</td>
      <td>741</td>
      <td>48</td>
      <td>693</td>
      <td>...</td>
      <td>6.477733</td>
      <td>93.522267</td>
      <td>NaN</td>
      <td>24.094799</td>
      <td>NaN</td>
      <td>38.454244</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 77 columns</p>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

 


    </main>
    
            </div>
            <div class="c-textbook__footer" id="textbook_footer">
              <nav class="c-page__nav">
  
    
    <a id="js-page__nav__prev" class="c-page__nav__prev" href="/README.html">
      〈 <span class="u-margin-right-tiny"></span> Introduction
    </a>
  

  
    
    <a id="js-page__nav__next" class="c-page__nav__next" href="/notebooks/02_creating_community_datasets.html">
      Creating Datasets <span class="u-margin-right-tiny"></span> 〉
    </a>
  
</nav>

              <footer>
  <p class="footer">This page was created by <a href="https://github.com/spatialucr/geosnap/graphs/contributors">The geosnap Community</a></p>
</footer>

            </div>

        </div>
      </main>
    </div>
  </body>
</html>
