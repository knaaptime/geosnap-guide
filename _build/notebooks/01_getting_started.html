---
redirect_from:
  - "notebooks/01-getting-started"
interact_link: content/notebooks/01_getting_started.ipynb
kernel_name: conda-env-geosnap-py
has_widgets: false
title: |-
  Getting Started
prev_page:
  url: /README.html
  title: |-
    Introduction
next_page:
  url: /notebooks/02_creating_community_datasets.html
  title: |-
    Creating Datasets
suffix: .ipynb

comment: "***PROGRAMMATICALLY GENERATED, DO NOT EDIT. SEE ORIGINAL FILES IN /content***"
---

    <main class="jupyter-page">
    
<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Getting-Started">Getting Started<a class="anchor-link" href="#Getting-Started"> </a></h1>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>geosnap provides a set of tools for collecting data and constructing space-time datasets, identifying local neighborhoods or prototypical neighborhood types, modeling neighborhood change over time, and visualizing data at each step of the process.</p>
<p>geosnap works with data from anywhere in the world, but comes batteries-included with three decades of national US Census data, including boundaries for metropolitan statistical areas, states, counties, and tracts, and over 100 commonly used demographic and socioeconomic variables at the census-tract level. All of these data are stored as geopandas geodataframes in efficient <a href="https://parquet.apache.org/">apache parquet</a> files and distributed through <a href="https://quiltdata.com/">quilt</a>.</p>
<p>These data are available when you first import geosnap by streaming from our <a href="https://spatialucr.quiltdata.com/b/quilt-cgs">quilt bucket</a> into memory. That can be useful if you dont need US data or if you just want to kick the tires, but it also means you need an internet connection to work with census data, and things may slow down depending on your network performance. For that reason, you can also use the <code>store_census</code> function to cache the data on your local machine for faster querying. This will only take around 400mb of disk space, speed up data operations, and remove the need for an internet connection.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Using-built-in-data">Using built-in data<a class="anchor-link" href="#Using-built-in-data"> </a></h2>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can access geosnap's built-in data from the <code>datasets</code> module. It contains a variable codebook as well as state, county, and MSA boundaries, in addition to boundaries and social data for three decades of census tracts. If you have stored an existing longitudinal database such as LTDB or the Geolytics Neighborhood Change Database, it will be available in <code>datasets</code> as well.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">geosnap</span> <span class="k">import</span> <span class="n">datasets</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">dir</span><span class="p">(</span><span class="n">datasets</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[&#39;blocks_2000&#39;,
 &#39;blocks_2010&#39;,
 &#39;codebook&#39;,
 &#39;counties&#39;,
 &#39;ltdb&#39;,
 &#39;msa_definitions&#39;,
 &#39;msas&#39;,
 &#39;ncdb&#39;,
 &#39;states&#39;,
 &#39;tracts_1990&#39;,
 &#39;tracts_2000&#39;,
 &#39;tracts_2010&#39;]</pre>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Everything in <code>datasets</code> is a pandas (or geopandas) geo/dataframe. To access any of the data inside, just call the appropriate attribute/method (most datasets are methods). For example, to accesss the codebook which outlines each variable in the data store, incuding its name, description, the original census sources/variable names and the formula used to calculate it, you simply call <code>datasets.codebook</code>. We support the same variable set the Longitudinal Tract Database (LTDB).</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">datasets</span><span class="o">.</span><span class="n">codebook</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>variable</th>
      <th>label</th>
      <th>formula</th>
      <th>ltdb</th>
      <th>ncdb</th>
      <th>census_1990_form</th>
      <th>census_1990_table_column</th>
      <th>census_2000_form</th>
      <th>census_2000_table_column</th>
      <th>acs</th>
      <th>category</th>
      <th>notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>189</th>
      <td>p_poverty_rate_black</td>
      <td>percentage of blacks in poverty</td>
      <td>p_poverty_rate_black=n_poverty_black / n_pover...</td>
      <td>pbpov</td>
      <td>BLKPR</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Socioeconomic Status</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>190</th>
      <td>p_poverty_rate_hispanic</td>
      <td>percentage of Hispanics in poverty</td>
      <td>p_poverty_rate_hispanic=n_poverty_hispanic / n...</td>
      <td>phpov</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Socioeconomic Status</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>191</th>
      <td>p_poverty_rate_native</td>
      <td>percentage of Native Americans in poverty</td>
      <td>p_poverty_rate_native=n_poverty_native / n_pov...</td>
      <td>pnapov</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Socioeconomic Status</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>192</th>
      <td>p_poverty_rate_asian</td>
      <td>percentage of Asian and Pacific Islanders in p...</td>
      <td>p_poverty_rate_asian=n_poverty_asian / n_pover...</td>
      <td>papov</td>
      <td>RASPR</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Socioeconomic Status</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>193</th>
      <td>n_total_pop</td>
      <td>total population</td>
      <td>NaN</td>
      <td>pop</td>
      <td>TRCTPOP</td>
      <td>SF1</td>
      <td>P0010001</td>
      <td>SF1</td>
      <td>P001001</td>
      <td>B01001_001E</td>
      <td>total population</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can also take a look at the dataframes themselves or plot them as quick choropleth maps</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">datasets</span><span class="o">.</span><span class="n">tracts_2000</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>geoid</th>
      <th>median_contract_rent</th>
      <th>median_home_value</th>
      <th>median_household_income</th>
      <th>median_income_asianhh</th>
      <th>median_income_blackhh</th>
      <th>median_income_hispanichh</th>
      <th>median_income_whitehh</th>
      <th>n_age_5_older</th>
      <th>n_asian_age_distribution</th>
      <th>...</th>
      <th>p_vacant_housing_units</th>
      <th>p_veterans</th>
      <th>p_vietnamese_persons</th>
      <th>p_white_over_60</th>
      <th>p_white_over_65</th>
      <th>p_white_under_15</th>
      <th>p_widowed_divorced</th>
      <th>per_capita_income</th>
      <th>year</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>25009266400</td>
      <td>662</td>
      <td>172400</td>
      <td>53314</td>
      <td>48750</td>
      <td>22500</td>
      <td>0</td>
      <td>53808</td>
      <td>3065</td>
      <td>7</td>
      <td>...</td>
      <td>3.74</td>
      <td>9.84</td>
      <td>0.03</td>
      <td>14.59</td>
      <td>11.04</td>
      <td>21.40</td>
      <td>17.61</td>
      <td>24288</td>
      <td>2000</td>
      <td>POLYGON ((-70.91489900000001 42.886589, -70.90...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>25009267102</td>
      <td>653</td>
      <td>169200</td>
      <td>50739</td>
      <td>46250</td>
      <td>0</td>
      <td>0</td>
      <td>51264</td>
      <td>4311</td>
      <td>23</td>
      <td>...</td>
      <td>3.22</td>
      <td>13.42</td>
      <td>0.06</td>
      <td>13.77</td>
      <td>9.67</td>
      <td>21.02</td>
      <td>18.91</td>
      <td>20946</td>
      <td>2000</td>
      <td>POLYGON ((-70.91489900000001 42.886589, -70.91...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>25009266200</td>
      <td>662</td>
      <td>163200</td>
      <td>49315</td>
      <td>90457</td>
      <td>101277</td>
      <td>26250</td>
      <td>48150</td>
      <td>5131</td>
      <td>37</td>
      <td>...</td>
      <td>3.30</td>
      <td>9.10</td>
      <td>0.07</td>
      <td>13.44</td>
      <td>10.63</td>
      <td>22.38</td>
      <td>20.74</td>
      <td>21817</td>
      <td>2000</td>
      <td>POLYGON ((-70.93079899999999 42.884589, -70.92...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>25009267101</td>
      <td>624</td>
      <td>179200</td>
      <td>45625</td>
      <td>0</td>
      <td>54545</td>
      <td>38750</td>
      <td>44750</td>
      <td>3011</td>
      <td>11</td>
      <td>...</td>
      <td>42.08</td>
      <td>9.96</td>
      <td>0.00</td>
      <td>19.89</td>
      <td>14.78</td>
      <td>16.97</td>
      <td>27.61</td>
      <td>22578</td>
      <td>2000</td>
      <td>POLYGON ((-70.8246893731782 42.87092164133018,...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>25009266100</td>
      <td>569</td>
      <td>215200</td>
      <td>60677</td>
      <td>48750</td>
      <td>43750</td>
      <td>32500</td>
      <td>61224</td>
      <td>3643</td>
      <td>20</td>
      <td>...</td>
      <td>3.74</td>
      <td>10.31</td>
      <td>0.23</td>
      <td>14.44</td>
      <td>10.77</td>
      <td>22.19</td>
      <td>15.48</td>
      <td>28030</td>
      <td>2000</td>
      <td>POLYGON ((-70.97459559012734 42.86775028124355...</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 192 columns</p>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">datasets</span><span class="o">.</span><span class="n">states</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;matplotlib.axes._subplots.AxesSubplot at 0x12aabb3c8&gt;</pre>
</div>

</div>
</div>
<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_png output_subarea ">
<img src="../images/notebooks/01_getting_started_10_1.png"
width=368
height=79
>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="k">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">axs</span> <span class="o">=</span> <span class="n">axs</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

<span class="n">datasets</span><span class="o">.</span><span class="n">tracts_1990</span><span class="p">()[</span><span class="n">datasets</span><span class="o">.</span><span class="n">tracts_1990</span><span class="p">()</span><span class="o">.</span><span class="n">geoid</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;11&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;median_household_income&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s1">&#39;median_household_income&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;YlOrBr&#39;</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;quantiles&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="mi">1990</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

<span class="n">datasets</span><span class="o">.</span><span class="n">tracts_2000</span><span class="p">()[</span><span class="n">datasets</span><span class="o">.</span><span class="n">tracts_2000</span><span class="p">()</span><span class="o">.</span><span class="n">geoid</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;11&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;median_household_income&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s1">&#39;median_household_income&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;YlOrBr&#39;</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;quantiles&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

<span class="n">datasets</span><span class="o">.</span><span class="n">tracts_2010</span><span class="p">()[</span><span class="n">datasets</span><span class="o">.</span><span class="n">tracts_2010</span><span class="p">()</span><span class="o">.</span><span class="n">geoid</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;11&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;median_household_income&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s1">&#39;median_household_income&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;YlOrBr&#39;</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;quantiles&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="mi">2010</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(-77.1302772, -76.89887680000001, 38.781471749999994, 39.00528325)</pre>
</div>

</div>
</div>
<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_png output_subarea ">
<img src="../images/notebooks/01_getting_started_12_1.png"
width=851
height=268
>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As mentioned above, you save these data locally for better performance using <code>geosnap.io.store_census</code>, which will download two quilt packages totaling just over 400mb (which is an exceedingly small file size, when you consider how much data are packed into those files). Once data are stored locally, you won't need this function again unless you want to update your local package to the most recent version on quilt.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">geosnap.io</span> <span class="k">import</span> <span class="n">store_census</span>
<span class="n">store_census</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>Copying: 100%|██████████| 258M/258M [00:19&lt;00:00, 13.6MB/s]    
Copying: 100%|██████████| 86.1M/86.1M [00:06&lt;00:00, 12.8MB/s]  
</pre>
</div>
</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Using geosnap's built-in data, researchers can get a jumpstart on neighborhood analysis with US tract data, but census tracts are not without their drawbacks. Many of geosnap's analytics require that neighborhood units remain consistent and stable in a study area over time (how can you analyze neighborhood change if your neighborhoods are different in each time period?), but with each new decennial census, tracts are redrawn according to population fluctuations. Geosnap offers two methods for dealing with this challenge.</p>
<p>First, geosnap can create its own set of stable longitudinal units of analysis and convert raw census or other data into those units. Its <code>harmonize</code> module provides tools for researchers to define a set of geographic units and interpolate data into those units using moden spatial statistical methods. This is a good option for researchers who are interested in the ways that different interpolation methods can affect their analyses or those who want to use state-of-the-art methods to create longitudinal datasets that are more accurate than those provided by existing databases.</p>
<p>Second, geosnap can simply leverage existing data that has already been standardized into a set of consistent units. The <code>io</code> module provides tools for reading and storing existing longitudinal databases that, once ingested, will be available in the data store and can be queried and analyzed repeatedly. This is a good option for researchers who want to get started modeling neighborhood characteristics right away and are less interested in exploring how error propagates through spatial interpolation.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Storing-Data-from-External-Databases">Storing Data from External Databases<a class="anchor-link" href="#Storing-Data-from-External-Databases"> </a></h2>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The quickest way to get started with geosnap is by importing pre-harmonized census data from either the <a href="https://s4.ad.brown.edu/projects/diversity/Researcher/LTDB.htm">Longitudinal Tract Database
(LTDB)</a> created by researchers from Brown University or the <a href="http://www.geolytics.com/USCensus,Neighborhood-Change-Database-1970-2000,Products.asp">Neighborhood Change Database</a> created by the consulting company Geolytics. While licensing restrictions prevent either of these databases from being distributed inside geosnap, LTDB is nonetheless <em>free</em>. As such, we recommended importing LTDB data before getting started with geosnap</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Longitudinal-Tract-Database-(LTDB)">Longitudinal Tract Database (LTDB)<a class="anchor-link" href="#Longitudinal-Tract-Database-(LTDB)"> </a></h3><p>The <a href="https://s4.ad.brown.edu/projects/diversity/Researcher/LTDB.htm">Longitudinal Tract Database
(LTDB)</a> is a
freely available dataset developed by researchers at Brown University that
provides 1970-2010 census data harmonized to 2010 boundaries.</p>
<p>To store LTDB data and make it available to geosnap, proceed with the following:</p>
<ol>
<li>Download the raw data from the LTDB <a href="https://s4.ad.brown.edu/projects/diversity/Researcher/LTBDDload/Default.aspx">downloads
page</a>.
Note that to construct the entire database you will need two archives: one
containing the sample variables, and another containing the "full count"
variables.<ul>
<li>Use the dropdown menu called <strong>select file type</strong> and choose "full"; in
the dropdown called <strong>select a year</strong>, choose "All Years"</li>
<li>Click the button "Download Standard Data Files"</li>
<li>Repeat the process, this time selecting "sample" in the <strong>select file
type</strong> menu and "All years" in the <strong>select a year</strong> dropdown</li>
</ul>
</li>
<li><p>Note the location of the two zip archives you downloaded. By default they are called</p>
<ul>
<li><code>LTDB_Std_All_Sample.zip</code> and</li>
<li><code>LTDB_Std_All_fullcount.zip</code></li>
</ul>
</li>
<li><p>Start ipython/jupyter, import geosnap, and call the <code>store_ltdb</code> function with the paths of the two zip archives you downloaded from the LTDB project page:</p>
</li>
</ol>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">geosnap.io</span> <span class="k">import</span> <span class="n">store_ltdb</span>

<span class="c1"># if the archives were in my downloads folder, the paths might be something like this</span>
<span class="n">sample</span> <span class="o">=</span> <span class="s2">&quot;/Users/knaaptime/Downloads/LTDB_Std_All_Sample.zip&quot;</span>
<span class="n">full</span> <span class="o">=</span> <span class="s2">&quot;/Users/knaaptime/Downloads/LTDB_Std_All_fullcount.zip&quot;</span>

<span class="c1"># uncomment to run</span>
<span class="c1">#store_ltdb(sample=sample, fullcount=full)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>That function will extract the necessary data from the archives, calculate additional variables using formulas from the codebook, create a new local quilt package for storing the data, and register the database with the <code>datasets</code>. After the function has run, you will be able to access the LTDB data as a long-form geodataframe by calling the <code>ltdb</code> attribute from the data store. As with the <code>store_census</code> function above, this only needs to be run a single time to save the data as a local quit package and register it with geosnap. You won't neeed to store the data again unless there's an update to the variable formulas in the codebook.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#datasets.ltdb.head()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>n_asian_under_15</th>
      <th>n_black_under_15</th>
      <th>n_hispanic_under_15</th>
      <th>n_native_under_15</th>
      <th>n_white_under_15</th>
      <th>n_persons_under_18</th>
      <th>n_asian_over_60</th>
      <th>n_black_over_60</th>
      <th>n_hispanic_over_60</th>
      <th>n_native_over_60</th>
      <th>...</th>
      <th>n_white_persons</th>
      <th>year</th>
      <th>n_total_housing_units_sample</th>
      <th>p_nonhisp_white_persons</th>
      <th>p_white_over_60</th>
      <th>p_black_over_60</th>
      <th>p_hispanic_over_60</th>
      <th>p_native_over_60</th>
      <th>p_asian_over_60</th>
      <th>p_disabled</th>
    </tr>
    <tr>
      <th>geoid</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>01001020500</th>
      <td>NaN</td>
      <td>1.121662</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.802740</td>
      <td>3.284181</td>
      <td>NaN</td>
      <td>0.301098</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>5.794934</td>
      <td>1970</td>
      <td>2.166366</td>
      <td>NaN</td>
      <td>6.433142</td>
      <td>3.514090</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4.737847</td>
    </tr>
    <tr>
      <th>01003010100</th>
      <td>NaN</td>
      <td>609.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>639.000000</td>
      <td>1407.000000</td>
      <td>NaN</td>
      <td>221.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>2003.999981</td>
      <td>1970</td>
      <td>1106.000000</td>
      <td>NaN</td>
      <td>8.299712</td>
      <td>6.368876</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>5.821326</td>
    </tr>
    <tr>
      <th>01003010200</th>
      <td>NaN</td>
      <td>37.567365</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>564.014945</td>
      <td>686.748041</td>
      <td>NaN</td>
      <td>27.861793</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>1757.910752</td>
      <td>1970</td>
      <td>619.433984</td>
      <td>NaN</td>
      <td>13.313281</td>
      <td>1.480888</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>6.248800</td>
    </tr>
    <tr>
      <th>01003010300</th>
      <td>NaN</td>
      <td>374.853457</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>981.543199</td>
      <td>1523.971872</td>
      <td>NaN</td>
      <td>103.848314</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>2835.404427</td>
      <td>1970</td>
      <td>1025.805309</td>
      <td>NaN</td>
      <td>8.023381</td>
      <td>2.788906</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>7.214156</td>
    </tr>
    <tr>
      <th>01003010400</th>
      <td>NaN</td>
      <td>113.203816</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>796.944763</td>
      <td>1029.919527</td>
      <td>NaN</td>
      <td>37.127235</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>2323.133371</td>
      <td>1970</td>
      <td>780.370269</td>
      <td>NaN</td>
      <td>11.072073</td>
      <td>1.427952</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>11.205555</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 192 columns</p>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Geolytics-Neighborhood-Change-Database">Geolytics Neighborhood Change Database<a class="anchor-link" href="#Geolytics-Neighborhood-Change-Database"> </a></h3><p>The Neighborhood Change Database (ncdb) is a commercial database created by Geolytics and the Urban Institute. Like LTDB, it provides census data harmonized to 2010 tracts. NCDB data must be purchased from Geolytics prior to use. If you have a license, you can import NCDB into geosnap with the following:</p>
<ol>
<li>Open the Geolytics application</li>
<li>Choose "New Request":<br>
<img src="https://github.com/spatialucr/geosnap/blob/master/docs/figs/geolytics_interface1.PNG?raw=true" alt="Choose &quot;New Request&quot;"></li>
<li>Select CSV or DBF</li>
<li>Make the following Selections:<ul>
<li><strong>year</strong>: all years in 2010 boundaries</li>
<li><strong>area</strong>: all census tracts in the entire united states</li>
<li><strong>counts</strong>: [right click] Check All Sibling Nodes</li>
</ul>
</li>
</ol>
<p><img src="https://github.com/spatialucr/geosnap/blob/master/docs/figs/geolytics_interface2.PNG?raw=true" alt=""></p>
<ol>
<li><p>Click <code>Run Report</code></p>
</li>
<li><p>Note the name and location of the CSV you created</p>
</li>
<li><p>Start ipython/jupyter, import geosnap, and call the <code>store_ncdb</code> function with the path of the CSV:</p>
</li>
</ol>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">geosnap.io</span> <span class="k">import</span> <span class="n">store_ncdb</span>

<span class="n">ncdb_path</span> <span class="o">=</span> <span class="s2">&quot;~/Downloads/ncdb.csv&quot;</span>

<span class="c1"># note this will raise several warnings since NCDB does not contain all the underlying data necessary to calculate all the variables in the codebook</span>

<span class="c1"># uncomment to run</span>
<span class="c1"># store_ncdb(ncdb_path)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As with above, you can access the geolytics data through the <code>ncdb</code> attribute of the <code>datasets</code></p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#datasets.ncdb.head()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>n_mexican_pop</th>
      <th>n_cuban_pop</th>
      <th>n_puerto_rican_pop</th>
      <th>n_foreign_born_pop</th>
      <th>n_naturalized_pop</th>
      <th>p_foreign_born_pop</th>
      <th>n_total_housing_units</th>
      <th>n_vacant_housing_units</th>
      <th>n_occupied_housing_units</th>
      <th>...</th>
      <th>p_vacant_housing_units</th>
      <th>p_owner_occupied_units</th>
      <th>p_persons_under_18</th>
      <th>p_married</th>
      <th>p_female_headed_families</th>
      <th>p_nonhisp_white_persons</th>
      <th>p_employed_professional</th>
      <th>p_employed_manufacturing</th>
      <th>p_poverty_rate_hispanic</th>
      <th>p_poverty_rate_native</th>
    </tr>
    <tr>
      <th>geoid</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>01001020100</th>
      <td>1980</td>
      <td>0</td>
      <td>0.0</td>
      <td>0</td>
      <td>9.0</td>
      <td>NaN</td>
      <td>0.528790</td>
      <td>555</td>
      <td>43</td>
      <td>511</td>
      <td>...</td>
      <td>7.747748</td>
      <td>92.072072</td>
      <td>NaN</td>
      <td>inf</td>
      <td>NaN</td>
      <td>91.363102</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>01001020100</th>
      <td>1990</td>
      <td>0</td>
      <td>0.0</td>
      <td>0</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>0.000000</td>
      <td>697</td>
      <td>45</td>
      <td>651</td>
      <td>...</td>
      <td>6.456241</td>
      <td>93.400287</td>
      <td>NaN</td>
      <td>30.506058</td>
      <td>NaN</td>
      <td>99.301075</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>01001020100</th>
      <td>2000</td>
      <td>0</td>
      <td>0.0</td>
      <td>0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>741</td>
      <td>81</td>
      <td>659</td>
      <td>...</td>
      <td>10.931174</td>
      <td>88.933873</td>
      <td>NaN</td>
      <td>31.743869</td>
      <td>NaN</td>
      <td>95.527157</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>01001020100</th>
      <td>2010</td>
      <td>30</td>
      <td>1.0</td>
      <td>2</td>
      <td>18.0</td>
      <td>0.0</td>
      <td>0.941423</td>
      <td>752</td>
      <td>59</td>
      <td>693</td>
      <td>...</td>
      <td>7.845745</td>
      <td>92.154255</td>
      <td>NaN</td>
      <td>30.960157</td>
      <td>NaN</td>
      <td>84.205021</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>01001020200</th>
      <td>1980</td>
      <td>7</td>
      <td>0.0</td>
      <td>0</td>
      <td>22.0</td>
      <td>NaN</td>
      <td>1.043148</td>
      <td>741</td>
      <td>48</td>
      <td>693</td>
      <td>...</td>
      <td>6.477733</td>
      <td>93.522267</td>
      <td>NaN</td>
      <td>24.094799</td>
      <td>NaN</td>
      <td>38.454244</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 77 columns</p>
</div>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

 


    </main>
    