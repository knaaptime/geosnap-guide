<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>The Geospatial Neighborhood Analysis Package - 6&nbsp; Neighborhood Dynamics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./segregation_dynamics.html" rel="next">
<link href="./regionalization.html" rel="prev">
<link href="./images/geosnap.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-0PG1JNLCXB"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-0PG1JNLCXB', { 'anonymize_ip': true});
</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta property="og:title" content="A Guide to Geosnap">
<meta property="og:description" content="">
<meta property="og:image" content="https://oturns.github.io.geosnap-guide/images/geosnap_long.png">
<meta property="og:site-name" content="The Geospatial Neighborhood Analysis Package">
<meta property="og:image:height" content="640">
<meta property="og:image:width" content="1280">
<meta name="twitter:title" content="The Geospatial Neighborhood Analysis Package - 6&nbsp; Neighborhood Dynamics">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://oturns.github.io.geosnap-guide/dynamics_files/figure-html/cell-10-output-2.png">
<meta name="twitter:creator" content="@knaaptime">
<meta name="twitter:site" content="@knaaptime">
<meta name="twitter:image-height" content="3084">
<meta name="twitter:image-width" content="2379">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./dynamics.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Neighborhood Dynamics</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./images/geosnap_long.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">The Geospatial Neighborhood Analysis Package</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/oturns/geosnap/" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="https://twitter.com/intent/tweet?url=|url|" rel="" title="Twitter" class="quarto-navigation-tool px-1" aria-label="Twitter"><i class="bi bi-twitter"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Citation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./datasets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data Sets</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./harmonization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Boundary Harmonization</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./clustering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Geodemographic Clustering</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./regionalization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Geodemographic Regionalization</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dynamics.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Neighborhood Dynamics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./segregation_dynamics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Spatiotemporal Segregation Dynamics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./isochrone_example.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Travel Isochrones</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#examining-data" id="toc-examining-data" class="nav-link active" data-scroll-target="#examining-data"><span class="header-section-number">6.1</span> Examining Data</a></li>
  <li><a href="#modeling-neighborhood-types" id="toc-modeling-neighborhood-types" class="nav-link" data-scroll-target="#modeling-neighborhood-types"><span class="header-section-number">6.2</span> Modeling Neighborhood Types</a></li>
  <li><a href="#analyzing-neighborhood-change" id="toc-analyzing-neighborhood-change" class="nav-link" data-scroll-target="#analyzing-neighborhood-change"><span class="header-section-number">6.3</span> Analyzing Neighborhood Change</a></li>
  <li><a href="#modeling-neighborhood-transitions" id="toc-modeling-neighborhood-transitions" class="nav-link" data-scroll-target="#modeling-neighborhood-transitions"><span class="header-section-number">6.4</span> Modeling Neighborhood Transitions</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.dev/oturns/geosnap/blob/main/dynamics.ipynb" class="toc-action">Edit this page</a></p><p><a href="https://github.com/oturns/geosnap/blob/main/dynamics.ipynb" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Neighborhood Dynamics</span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>The geosnap package is designed for geodemographic analysis and regionalization applied to longitudinal data. Following those analyses, it also provides tools for modeling neighborhood composition into the future using spatial and temporal transition rules learned from the past.</p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:16:57.237205Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:16:57.237031Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:00.461525Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:00.461275Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:16:57.237181Z&quot;}" data-tags="[]" data-execution_count="1">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>load_ext watermark</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>watermark <span class="op">-</span>v <span class="op">-</span>a <span class="st">"author: eli knaap"</span> <span class="op">-</span>d <span class="op">-</span>u <span class="op">-</span>p segregation,libpysal,geopandas,geosnap</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Author: author: eli knaap

Last updated: 2024-01-23

Python implementation: CPython
Python version       : 3.11.0
IPython version      : 8.18.1

segregation: 2.5
libpysal   : 4.9.2
geopandas  : 0.14.2
geosnap    : 0.12.1.dev9+g3a1cb0f6de61.d20240110
</code></pre>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:00.462610Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:00.462496Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:00.464956Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:00.464700Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:00.462599Z&quot;}" data-tags="[]" data-execution_count="2">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> geosnap <span class="im">import</span> DataStore</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> geosnap.io <span class="im">import</span> get_acs</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> geosnap.analyze <span class="im">import</span> cluster, regionalize, find_k</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:00.465402Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:00.465318Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:00.469150Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:00.468809Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:00.465393Z&quot;}" data-tags="[]" data-execution_count="3">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> geosnap.visualize <span class="im">import</span> plot_timeseries, animate_timeseries</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:00.469550Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:00.469466Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:00.474410Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:00.473402Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:00.469540Z&quot;}" data-tags="[]" data-execution_count="4">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="examining-data" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="examining-data"><span class="header-section-number">6.1</span> Examining Data</h2>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:00.475449Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:00.475179Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:00.478651Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:00.478056Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:00.475437Z&quot;}" data-tags="[]" data-execution_count="5">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>store <span class="op">=</span> DataStore()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The DataStore class provides access to hundreds of neighbrohood indicators for the U.S. collected from federal agencies. We store these datasets in the cloud and stream them on demand. But if you plan on doing repeated analyses you can store the data locally (which we’ve already done on the JupyterHub)</p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:00.479491Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:00.479363Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:05.013226Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:05.012954Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:00.479476Z&quot;}" data-tags="[]" data-execution_count="6">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>chicago <span class="op">=</span> get_acs(store, county_fips<span class="op">=</span><span class="st">'17031'</span>, level<span class="op">=</span><span class="st">'tract'</span>, years<span class="op">=</span><span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">2013</span>, <span class="dv">2017</span>)))  <span class="co"># without specifying a subset of years, we get everything</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/knaaptime/Dropbox/projects/geosnap/geosnap/io/constructors.py:188: UserWarning: `constant_dollars` is True, but no `currency_year` was specified. Resorting to max value of 2016
  warn(</code></pre>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:05.014778Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:05.014675Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:05.023693Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:05.022421Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:05.014769Z&quot;}" data-tags="[]" data-execution_count="7">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>chicago.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'geopandas.geodataframe.GeoDataFrame'&gt;
RangeIndex: 5276 entries, 0 to 5275
Columns: 161 entries, geoid to p_vietnamese_persons
dtypes: float64(158), geometry(1), int64(1), object(1)
memory usage: 6.5+ MB</code></pre>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:05.024336Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:05.024230Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:05.036473Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:05.036208Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:05.024326Z&quot;}" data-tags="[]" data-execution_count="8">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>chicago.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">geoid</th>
<th data-quarto-table-cell-role="th">n_mexican_pop</th>
<th data-quarto-table-cell-role="th">n_cuban_pop</th>
<th data-quarto-table-cell-role="th">n_puerto_rican_pop</th>
<th data-quarto-table-cell-role="th">n_russian_pop</th>
<th data-quarto-table-cell-role="th">n_italian_pop</th>
<th data-quarto-table-cell-role="th">n_german_pop</th>
<th data-quarto-table-cell-role="th">n_irish_pop</th>
<th data-quarto-table-cell-role="th">n_scandaniavian_pop</th>
<th data-quarto-table-cell-role="th">n_foreign_born_pop</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">n_chinese_persons</th>
<th data-quarto-table-cell-role="th">n_filipino_persons</th>
<th data-quarto-table-cell-role="th">n_japanese_persons</th>
<th data-quarto-table-cell-role="th">n_korean_persons</th>
<th data-quarto-table-cell-role="th">n_vietnamese_persons</th>
<th data-quarto-table-cell-role="th">p_chinese_persons</th>
<th data-quarto-table-cell-role="th">p_filipino_persons</th>
<th data-quarto-table-cell-role="th">p_japanese_persons</th>
<th data-quarto-table-cell-role="th">p_korean_persons</th>
<th data-quarto-table-cell-role="th">p_vietnamese_persons</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>17031010100</td>
<td>235.0</td>
<td>0.0</td>
<td>84.0</td>
<td>0.0</td>
<td>31.0</td>
<td>78.0</td>
<td>21.0</td>
<td>0.0</td>
<td>996.0</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>17031010201</td>
<td>1745.0</td>
<td>0.0</td>
<td>38.0</td>
<td>60.0</td>
<td>81.0</td>
<td>31.0</td>
<td>63.0</td>
<td>0.0</td>
<td>2530.0</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>17031010202</td>
<td>480.0</td>
<td>16.0</td>
<td>6.0</td>
<td>8.0</td>
<td>34.0</td>
<td>104.0</td>
<td>55.0</td>
<td>0.0</td>
<td>676.0</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>17031010300</td>
<td>636.0</td>
<td>54.0</td>
<td>16.0</td>
<td>152.0</td>
<td>38.0</td>
<td>138.0</td>
<td>190.0</td>
<td>0.0</td>
<td>1951.0</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>17031010400</td>
<td>269.0</td>
<td>79.0</td>
<td>67.0</td>
<td>20.0</td>
<td>111.0</td>
<td>206.0</td>
<td>177.0</td>
<td>0.0</td>
<td>822.0</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>

<p>5 rows × 161 columns</p>
</div>
</div>
</div>
<p>There are also convenient plotting methods for looking at change over time. A useful feature here is that the choropleth bins are the same for each time period, making it easy to see change over time</p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:05.037020Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:05.036912Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:10.532072Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:10.531448Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:05.037011Z&quot;}" data-tags="[]" data-execution_count="9">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>plot_timeseries(chicago, <span class="st">"median_home_value"</span>, scheme<span class="op">=</span><span class="st">'quantiles'</span>, k<span class="op">=</span><span class="dv">7</span>, nrows<span class="op">=</span><span class="dv">2</span>, ncols<span class="op">=</span><span class="dv">2</span>, cmap<span class="op">=</span><span class="st">'YlOrBr'</span>, figsize<span class="op">=</span>(<span class="dv">12</span>,<span class="dv">16</span>), legend<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/knaaptime/Dropbox/projects/geosnap/geosnap/visualize/mapping.py:170: UserWarning: `proplot` is not installed.  Falling back to matplotlib
  warn("`proplot` is not installed.  Falling back to matplotlib")</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="dynamics_files/figure-html/cell-10-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Still it can be difficult to see minute changes across the various maps. The <code>animate_timeseries</code> function can make it easier to see what’s happening, like the steady income decline in Midlothian near the southern edge of the region</p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:10.532646Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:10.532554Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:26.505369Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:26.505116Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:10.532637Z&quot;}" data-tags="[]" data-execution_count="10">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>animate_timeseries(chicago, <span class="st">'median_home_value'</span>, scheme<span class="op">=</span><span class="st">'quantiles'</span>, k<span class="op">=</span><span class="dv">7</span>, cmap<span class="op">=</span><span class="st">'YlOrBr'</span>, filename<span class="op">=</span><span class="st">'images/chicago_income_change.gif'</span>, fps<span class="op">=</span><span class="fl">1.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 2000x2000 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 2000x2000 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 2000x2000 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 2000x2000 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 1000x1000 with 0 Axes&gt;</code></pre>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/chicago_income_change.gif" class="img-fluid figure-img" width="800"></p>
<figcaption class="figure-caption">Home Value Change in Chicago</figcaption>
</figure>
</div>
<p>Note here that we’re comparing overlapping samples from the ACS 5-year survey, which the Census Bureau recommends against. Here it just makes a good example :)</p>
</section>
<section id="modeling-neighborhood-types" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="modeling-neighborhood-types"><span class="header-section-number">6.2</span> Modeling Neighborhood Types</h2>
<p>With <code>geosnap</code>, it’s possible to look at <em>temporal</em> geodemographics without writing much code. Under the hood, the package provides tools for scaling each dataset within its own time period, adjusting currency values for inflation, and ensuring that times, variables, and geometries stay aligned properly. Together those tools make it easy to explore how different portions of the region transition into different neighborhood types over time, and if desired, model the evolution of neighborhood change as a spatial Markov process.</p>
<p>Any variables could be used to examine neighborhood transitions, but we’ll return to the simple set of sociodemographic veriables used before to understand if/how patterns of racial and socioeconomic segregation and neighborhood partitioning unfold over time</p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:26.505946Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:26.505866Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:26.507726Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:26.507491Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:26.505937Z&quot;}" data-tags="[]" data-execution_count="11">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>columns <span class="op">=</span> [<span class="st">'median_household_income'</span>, <span class="st">'median_home_value'</span>, <span class="st">'p_asian_persons'</span>, <span class="st">'p_hispanic_persons'</span>, <span class="st">'p_nonhisp_black_persons'</span>, <span class="st">'p_nonhisp_white_persons'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:26.508220Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:26.508144Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:26.891548Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:26.891088Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:26.508212Z&quot;}" data-tags="[]" data-execution_count="12">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>chicago_ward <span class="op">=</span> cluster(gdf<span class="op">=</span>chicago, columns<span class="op">=</span>columns, method<span class="op">=</span><span class="st">'ward'</span>, n_clusters<span class="op">=</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:26.892102Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:26.892020Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:26.904239Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:26.903821Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:26.892093Z&quot;}" data-tags="[]" data-execution_count="13">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>chicago_ward.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="13">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">geoid</th>
<th data-quarto-table-cell-role="th">n_mexican_pop</th>
<th data-quarto-table-cell-role="th">n_cuban_pop</th>
<th data-quarto-table-cell-role="th">n_puerto_rican_pop</th>
<th data-quarto-table-cell-role="th">n_russian_pop</th>
<th data-quarto-table-cell-role="th">n_italian_pop</th>
<th data-quarto-table-cell-role="th">n_german_pop</th>
<th data-quarto-table-cell-role="th">n_irish_pop</th>
<th data-quarto-table-cell-role="th">n_scandaniavian_pop</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">n_filipino_persons</th>
<th data-quarto-table-cell-role="th">n_japanese_persons</th>
<th data-quarto-table-cell-role="th">n_korean_persons</th>
<th data-quarto-table-cell-role="th">n_vietnamese_persons</th>
<th data-quarto-table-cell-role="th">p_chinese_persons</th>
<th data-quarto-table-cell-role="th">p_filipino_persons</th>
<th data-quarto-table-cell-role="th">p_japanese_persons</th>
<th data-quarto-table-cell-role="th">p_korean_persons</th>
<th data-quarto-table-cell-role="th">p_vietnamese_persons</th>
<th data-quarto-table-cell-role="th">ward</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2013</td>
<td>17031010100</td>
<td>235.0</td>
<td>0.0</td>
<td>84.0</td>
<td>0.0</td>
<td>31.0</td>
<td>78.0</td>
<td>21.0</td>
<td>0.0</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2013</td>
<td>17031010201</td>
<td>1745.0</td>
<td>0.0</td>
<td>38.0</td>
<td>60.0</td>
<td>81.0</td>
<td>31.0</td>
<td>63.0</td>
<td>0.0</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2013</td>
<td>17031010202</td>
<td>480.0</td>
<td>16.0</td>
<td>6.0</td>
<td>8.0</td>
<td>34.0</td>
<td>104.0</td>
<td>55.0</td>
<td>0.0</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2013</td>
<td>17031010300</td>
<td>636.0</td>
<td>54.0</td>
<td>16.0</td>
<td>152.0</td>
<td>38.0</td>
<td>138.0</td>
<td>190.0</td>
<td>0.0</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2013</td>
<td>17031010400</td>
<td>269.0</td>
<td>79.0</td>
<td>67.0</td>
<td>20.0</td>
<td>111.0</td>
<td>206.0</td>
<td>177.0</td>
<td>0.0</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
</tr>
</tbody>
</table>

<p>5 rows × 162 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:26.904802Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:26.904703Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:30.005813Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:30.005421Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:26.904792Z&quot;}" data-tags="[]" data-execution_count="14">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>plot_timeseries(chicago_ward, <span class="st">'ward'</span>, categorical<span class="op">=</span><span class="va">True</span>, nrows<span class="op">=</span><span class="dv">2</span>, ncols<span class="op">=</span><span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">12</span>,<span class="dv">16</span>))</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/knaaptime/Dropbox/projects/geosnap/geosnap/visualize/mapping.py:170: UserWarning: `proplot` is not installed.  Falling back to matplotlib
  warn("`proplot` is not installed.  Falling back to matplotlib")</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="dynamics_files/figure-html/cell-15-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:30.006408Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:30.006316Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:45.474484Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:45.474210Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:30.006398Z&quot;}" data-tags="[]" data-execution_count="15">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>animate_timeseries(chicago_ward, <span class="st">'ward'</span>, categorical<span class="op">=</span><span class="va">True</span>, filename<span class="op">=</span><span class="st">'images/chicago_type_change.gif'</span>, fps<span class="op">=</span><span class="fl">1.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 2000x2000 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 2000x2000 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 2000x2000 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 2000x2000 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 1000x1000 with 0 Axes&gt;</code></pre>
</div>
</div>
<p>The vast majority of tracts are assigned to the same geodemographic type in each time period, but some transition into different types over time. The ones that <em>do</em> transition tend to be those on the edges of large contiguous groups (i.e.&nbsp;change tends to happen along the periphery and move inward, implying a certain kind of spatial dynamic)</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/chicago_type_change.gif" class="img-fluid figure-img" width="800"></p>
<figcaption class="figure-caption">Chicago Neighborhood Types</figcaption>
</figure>
</div>
<p>Once we have a temporal geodemographic clustering solution, then the data are represented as a long-form geodataframe with the neighborhood cluster label as one of the attributes. For each observation, then, the neighborhood label is arranged as a sequence of discrete types which can be modeled as a first-order Markov process using <a href="https://pysal.org/giddy/notebooks/MarkovBasedMethods.html">giddy</a>, or using <a href="https://doi.org/10.1016/j.compenvurbsys.2020.101480">sequence analysis</a></p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:45.474935Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:45.474857Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:45.734855Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:45.734444Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:45.474927Z&quot;}" data-tags="[]" data-execution_count="16">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>chicago_ward, chi_model <span class="op">=</span> cluster(chicago, columns<span class="op">=</span>columns, method<span class="op">=</span><span class="st">'ward'</span>, n_clusters<span class="op">=</span><span class="dv">6</span>, return_model<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:45.735444Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:45.735340Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:45.738483Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:45.738005Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:45.735434Z&quot;}" data-tags="[]" data-execution_count="17">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(chi_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>geosnap.analyze._model_results.ModelResults</code></pre>
</div>
</div>
<p>Each observation is given its own silhouette score to identify potential spatial outliers, or the measures can be summarized to provide an aggregate statistic</p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:45.739120Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:45.738961Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:45.966779Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:45.966330Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:45.739110Z&quot;}" data-tags="[]" data-execution_count="18">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>chi_model.silhouette_scores.silhouette_score.mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="18">
<pre><code>0.35971262107670565</code></pre>
</div>
</div>
<p>Since the data are indexed by time, we can also examine whether certain time periods have a poorer fit versus others:</p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:45.967562Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:45.967449Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:45.997086Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:45.995710Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:45.967552Z&quot;}" data-tags="[]" data-execution_count="19">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>chi_model.silhouette_scores.groupby(<span class="st">'year'</span>).silhouette_score.mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>year
2013    0.362116
2014    0.361529
2015    0.359077
2016    0.356111
Name: silhouette_score, dtype: float64</code></pre>
</div>
</div>
</section>
<section id="analyzing-neighborhood-change" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="analyzing-neighborhood-change"><span class="header-section-number">6.3</span> Analyzing Neighborhood Change</h2>
<p>With the cluster model in hand, each census tract is represented as a series of neighborhood types over time (i.e.&nbsp;what we plotted above). To understand which neighborhoods have experienced the most change, the <code>ModelResults</code> class implements a method called “LINCS”, the Local Indicator of Neighborhood Change. The <code>lincs</code> attribute measures how often a given spatial unit shares its cluster assignment with the other units over time.</p>
<p>If a “neighborhood” is grouped with many different neighborhoods over time (rather than joining a single group with the same members repeatedly), then it shows more variation and thus a higher LINC score</p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:45.998165Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:45.998048Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:46.108961Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:46.108692Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:45.998156Z&quot;}" data-tags="[]" data-execution_count="20">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>chi_lincs <span class="op">=</span> chi_model.lincs</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:46.109558Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:46.109480Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:46.121468Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:46.120871Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:46.109549Z&quot;}" data-tags="[]" data-execution_count="21">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>chi_lincs</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="21">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">geoid</th>
<th data-quarto-table-cell-role="th">geometry</th>
<th data-quarto-table-cell-role="th">2013</th>
<th data-quarto-table-cell-role="th">2014</th>
<th data-quarto-table-cell-role="th">2015</th>
<th data-quarto-table-cell-role="th">2016</th>
<th data-quarto-table-cell-role="th">linc</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>17031010100</td>
<td>MULTIPOLYGON (((-87.67720 42.02294, -87.67628 ...</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.017857</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>17031010201</td>
<td>MULTIPOLYGON (((-87.68465 42.01948, -87.68432 ...</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.017857</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>17031010202</td>
<td>MULTIPOLYGON (((-87.67683 42.01941, -87.67674 ...</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.017857</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>17031010300</td>
<td>MULTIPOLYGON (((-87.67133 42.01937, -87.67121 ...</td>
<td>2.0</td>
<td>2.0</td>
<td>2.0</td>
<td>2.0</td>
<td>0.303371</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>17031010400</td>
<td>MULTIPOLYGON (((-87.66345 42.01283, -87.66321 ...</td>
<td>2.0</td>
<td>2.0</td>
<td>2.0</td>
<td>2.0</td>
<td>0.303371</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1304</td>
<td>17031843500</td>
<td>MULTIPOLYGON (((-87.70504 41.84452, -87.70479 ...</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.017857</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1305</td>
<td>17031843600</td>
<td>MULTIPOLYGON (((-87.61150 41.81128, -87.61125 ...</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.017857</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1306</td>
<td>17031843700</td>
<td>MULTIPOLYGON (((-87.69683 41.94967, -87.69681 ...</td>
<td>4.0</td>
<td>4.0</td>
<td>4.0</td>
<td>3.0</td>
<td>0.994307</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1307</td>
<td>17031843800</td>
<td>MULTIPOLYGON (((-87.64554 41.80886, -87.64542 ...</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.017857</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1308</td>
<td>17031843900</td>
<td>MULTIPOLYGON (((-87.59295 41.77508, -87.59278 ...</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.017857</td>
</tr>
</tbody>
</table>

<p>1309 rows × 7 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:46.126061Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:46.125906Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:46.426377Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:46.426087Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:46.126049Z&quot;}" data-tags="[]" data-execution_count="22">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>chi_lincs.plot(<span class="st">'linc'</span>,legend<span class="op">=</span><span class="va">True</span>, cmap<span class="op">=</span><span class="st">'plasma'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>&lt;Axes: &gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="dynamics_files/figure-html/cell-23-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Yellow places have changed the most in our cluster model, and blue places have remained the most stagnant. We can use the LISA statistics from <code>esda</code> to locate hotspots of change or stagnation</p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:46.426930Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:46.426845Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:46.517669Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:46.517371Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:46.426921Z&quot;}" data-tags="[]" data-execution_count="23">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>chi_lincs.linc.plot(kind<span class="op">=</span><span class="st">'density'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>&lt;Axes: ylabel='Density'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="dynamics_files/figure-html/cell-24-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:46.518292Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:46.518198Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:46.521971Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:46.521643Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:46.518281Z&quot;}" data-tags="[]" data-execution_count="24">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> esda <span class="im">import</span> Moran_Local</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:46.522489Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:46.522397Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:46.526638Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:46.526187Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:46.522480Z&quot;}" data-tags="[]" data-execution_count="25">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> libpysal.weights <span class="im">import</span> Queen</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:46.527515Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:46.527328Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:46.947181Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:46.946905Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:46.527500Z&quot;}" data-tags="[]" data-execution_count="26">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>w <span class="op">=</span> Queen.from_dataframe(chi_model.lincs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/79/cknfb1sx2pv16rztkpg6wzlw0000gn/T/ipykernel_11299/3977480944.py:1: FutureWarning: `use_index` defaults to False but will default to True in future. Set True/False directly to control this behavior and silence this warning
  w = Queen.from_dataframe(chi_model.lincs)</code></pre>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:46.947786Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:46.947676Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:48.159559Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:48.159151Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:46.947777Z&quot;}" data-tags="[]" data-execution_count="27">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>linc_lisa <span class="op">=</span> Moran_Local(chi_lincs.linc, w)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Recall that the LISA statistic measures the association between a focal observation and its neighbors. When we have spatial units (i.e.&nbsp;tracts) with a high LINC score, and their neighboring tracts <em>also</em> have high LINC scores, then we’ve found a local pocket of neighborhood change.</p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:48.160119Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:48.160015Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:48.164738Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:48.163959Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:48.160108Z&quot;}" data-tags="[]" data-execution_count="28">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>linc_lisa.Is</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="28">
<pre><code>array([ 0.19094133, -0.38635302, -0.13315014, ...,  2.09900215,
        0.3517673 ,  0.49985707])</code></pre>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:48.166218Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:48.165800Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:48.364333Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:48.364022Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:48.166186Z&quot;}" data-tags="[]" data-execution_count="29">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>chi_lincs.assign(i<span class="op">=</span>linc_lisa.Is).plot(<span class="st">'i'</span>, legend<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="29">
<pre><code>&lt;Axes: &gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="dynamics_files/figure-html/cell-30-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:48.364862Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:48.364777Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:48.393337Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:48.392908Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:48.364852Z&quot;}" data-tags="[]" data-execution_count="30">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> splot.esda <span class="im">import</span> plot_local_autocorrelation, lisa_cluster</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:48.393825Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:48.393738Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:49.177563Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:49.177280Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:48.393816Z&quot;}" data-tags="[]" data-execution_count="31">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>plot_local_autocorrelation(linc_lisa, chi_lincs.to_crs(<span class="dv">3857</span>), <span class="st">'linc'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="31">
<pre><code>(&lt;Figure size 1500x400 with 3 Axes&gt;,
 array([&lt;Axes: title={'center': 'Moran Local Scatterplot'}, xlabel='Attribute', ylabel='Spatial Lag'&gt;,
        &lt;Axes: &gt;, &lt;Axes: &gt;], dtype=object))</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="dynamics_files/figure-html/cell-32-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:49.178193Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:49.178093Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:49.180347Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:49.179879Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:49.178184Z&quot;}" data-tags="[]" data-execution_count="32">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> contextily <span class="im">as</span> ctx</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:49.180828Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:49.180731Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:56.335713Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:56.335212Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:49.180820Z&quot;}" data-tags="[]" data-execution_count="33">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> lisa_cluster(linc_lisa, chi_lincs.to_crs(<span class="dv">3857</span>), alpha<span class="op">=</span><span class="fl">0.6</span>, figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">10</span>))</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>ctx.add_basemap(ax<span class="op">=</span>ax, source<span class="op">=</span>ctx.providers.CartoDB.Positron, zoom<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>fig.tight_layout()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="dynamics_files/figure-html/cell-34-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Red areas of high-high clusters of LINC scores are places undergoing change, whereas blue places (low LINC scores surrounded by low scores) are those that have changed very little over time. Orange places are particularly interesting, as they represent local pockets of change surrounded by larger pockets of stagnation.</p>
<p>Substantively, this example shows that Chicago’s famously segregated South Side and West Side form large regions of the city that demonstrate little demographic/socioeconomic change, particularly in neighborhoods like Rosewood and West Garfield. By contrast, places like Brideport and Portage Park have witnessed substantial change over the last decade according to this model</p>
</section>
<section id="modeling-neighborhood-transitions" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="modeling-neighborhood-transitions"><span class="header-section-number">6.4</span> Modeling Neighborhood Transitions</h2>
<p>We can also use the sequence of labels to create a spatial Markov transition model. These models examine how often one neighborhood type transitions into another type–then how these transition rates change under different conditions of spatial context</p>
<p>As with the LISA analysis above, a key question of interest concerns whether there is <em>spatial patterning</em> in the observed neighborhood transition. If neighborhood transitions are influenced by what occurs nearby, then it suggests the potential influence of spatial spillovers. Although there is nothing ‘natural’ about it, this phenomenon would be akin to classic sociological models of neighborhood change from the 1920s. Further, if there is evidence that space matters fortransitions, then any attempt to understand neighborhood processes in this region should also consider the importance of spatial interactionl. A natural way to understand the transition between two neighborhood types is the plot the observed transition rates as a heatmap</p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:56.336246Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:56.336147Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:56.340287Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:56.339979Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:56.336235Z&quot;}" data-tags="[]" data-execution_count="34">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> geosnap.visualize <span class="im">import</span> plot_transition_matrix</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The rows of the matrix define the origin neighborhoods <span class="math inline">\(i\)</span> (i.e.&nbsp;the neighborhood type at <span class="math inline">\(t\)</span>) and the columns define the “destination” neighborhood type <span class="math inline">\(j\)</span> (the neighborhood type at <span class="math inline">\(t+1\)</span>), for each of the types <span class="math inline">\(k\)</span> and the values of the cells are the fraction of transitions between these two types over all time periods.:</p>
<p><span class="math display">\[
\hat{p}_{i,j} = \frac{n_{i,j}}{\sum_{k=1}^k n_{i,k} }
\]</span></p>
<p>To operationalize spatial context, we rely on the concept of a modal spatial lag. Since the data are discrete, the modal lag captures the most common value within the local context of each neighborhood, where the context is defined by a PySAL spatial weights object <span class="math inline">\(W\)</span></p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:56.340807Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:56.340714Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:57.961235Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:57.960961Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:56.340798Z&quot;}" data-tags="[]" data-execution_count="35">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>plot_transition_matrix(chicago_ward, cluster_col<span class="op">=</span><span class="st">'ward'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/knaaptime/Dropbox/projects/geosnap/geosnap/visualize/transitions.py:82: UserWarning: Creating a transition model implicitly is deprecated and will be removed in future versions. please pass a giddy.Spatial_Markov instance using `giddy` or `geosnap.analyze.transition`
  warn(
/Users/knaaptime/Dropbox/projects/geosnap/geosnap/analyze/dynamics.py:123: FutureWarning: `use_index` defaults to False but will default to True in future. Set True/False directly to control this behavior and silence this warning
  w = Ws[w_type].from_dataframe(gpd.GeoDataFrame(gdf_wide), **w_options)</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="35">
<pre><code>array([&lt;Axes: title={'center': 'Global'}&gt;,
       &lt;Axes: title={'center': 'Modal Neighbor - 0'}&gt;,
       &lt;Axes: title={'center': 'Modal Neighbor - 1'}&gt;,
       &lt;Axes: title={'center': 'Modal Neighbor - 2'}&gt;,
       &lt;Axes: title={'center': 'Modal Neighbor - 3'}&gt;,
       &lt;Axes: title={'center': 'Modal Neighbor - 4'}&gt;,
       &lt;Axes: title={'center': 'Modal Neighbor - 5'}&gt;, &lt;Axes: &gt;, &lt;Axes: &gt;],
      dtype=object)</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="dynamics_files/figure-html/cell-36-output-3.png" class="img-fluid"></p>
</div>
</div>
<p>The “Global” heatmap in the upper left shows the overall transition rates between all pairs of neighborhood clusters, and the successive heatmaps show the transition rates conditional on different spatial contexts. The “Modal Neighbor 0” graph shows how the transition rates change when the most common unit surrounding the focal unit is Type 0. The strong diagonal across all heatmaps describes the likelihood of stability; that is, for any neighborhood type, the most common transition is <em>remaining in its same type</em>. The fact that the transition matrices are not the same provides superficial evidence that conditional transition rates may differ. To conduct a formal test, we use the giddy model object stored in the <code>ModelReults</code></p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:57.961766Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:57.961680Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:57.965378Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:57.965125Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:57.961757Z&quot;}" data-tags="[]" data-execution_count="36">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> geosnap.analyze <span class="im">import</span> transition</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:57.965743Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:57.965663Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:58.567666Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:58.567337Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:57.965734Z&quot;}" data-tags="[]" data-execution_count="37">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># this is the same model as shown in the heatmap</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>chi_transitions <span class="op">=</span> transition(chicago_ward, cluster_col<span class="op">=</span><span class="st">'ward'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/knaaptime/Dropbox/projects/geosnap/geosnap/analyze/dynamics.py:123: FutureWarning: `use_index` defaults to False but will default to True in future. Set True/False directly to control this behavior and silence this warning
  w = Ws[w_type].from_dataframe(gpd.GeoDataFrame(gdf_wide), **w_options)</code></pre>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:58.568238Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:58.568147Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:58.571663Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:58.571382Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:58.568229Z&quot;}" data-tags="[]" data-execution_count="38">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(chi_transitions)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="38">
<pre><code>giddy.markov.Spatial_Markov</code></pre>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:58.572279Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:58.572194Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:58.578911Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:58.578339Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:58.572270Z&quot;}" data-tags="[]" data-execution_count="39">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>chi_transitions.LR_p_value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>2.1727064591914313e-13</code></pre>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:58.579630Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:58.579489Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:58.583829Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:58.583226Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:58.579613Z&quot;}" data-tags="[]" data-execution_count="40">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>chi_transitions.Q_p_value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="40">
<pre><code>0.0</code></pre>
</div>
</div>
<p>Unsurprisingly, the summary statistics show strong evidence that the transition dynamics differ under different spatial contexts.</p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:58.584456Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:58.584351Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:58.588923Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:58.588627Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:58.584447Z&quot;}" data-tags="[]" data-execution_count="41">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>chi_transitions.summary()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>-------------------------------------------------------------------------
                        Spatial Markov Test: ward                        
-------------------------------------------------------------------------
Number of classes: 6
Number of transitions: 3894
Number of regimes: 6
Regime names: LAG0, LAG1, LAG2, LAG3, LAG4, LAG5
-------------------------------------------------------------------------
   Test                   LR                Chi-2
  Stat.              178.041              405.942
    DOF                   61                   61
p-value                0.000                0.000
-------------------------------------------------------------------------
P(H0)           C0         C1         C2         C3         C4         C5
     C0      0.997      0.000      0.003      0.000      0.000      0.000
     C1      0.000      0.941      0.032      0.000      0.027      0.000
     C2      0.009      0.017      0.935      0.000      0.028      0.011
     C3      0.000      0.000      0.000      0.963      0.037      0.000
     C4      0.002      0.010      0.015      0.020      0.953      0.000
     C5      0.000      0.000      0.019      0.000      0.000      0.981
-------------------------------------------------------------------------
P(LAG0)         C0         C1         C2         C3         C4         C5
     C0      0.998      0.000      0.002      0.000      0.000      0.000
     C1      0.000      1.000      0.000      0.000      0.000      0.000
     C2      0.059      0.000      0.941      0.000      0.000      0.000
     C3      0.000      0.000      0.000      1.000      0.000      0.000
     C4      0.021      0.021      0.000      0.021      0.938      0.000
     C5      0.000      0.000      0.000      0.000      0.000      1.000
-------------------------------------------------------------------------
P(LAG1)         C0         C1         C2         C3         C4         C5
     C0      0.000      0.000      0.000      0.000      0.000      0.000
     C1      0.000      0.962      0.015      0.000      0.023      0.000
     C2      0.000      0.154      0.692      0.000      0.154      0.000
     C3      0.000      0.000      0.000      1.000      0.000      0.000
     C4      0.000      0.147      0.059      0.000      0.794      0.000
     C5      0.000      0.000      0.000      0.000      0.000      1.000
-------------------------------------------------------------------------
P(LAG2)         C0         C1         C2         C3         C4         C5
     C0      0.900      0.000      0.100      0.000      0.000      0.000
     C1      0.000      0.760      0.160      0.000      0.080      0.000
     C2      0.004      0.023      0.946      0.000      0.023      0.004
     C3      0.000      0.000      0.000      0.000      1.000      0.000
     C4      0.000      0.034      0.034      0.017      0.914      0.000
     C5      0.000      0.000      0.056      0.000      0.000      0.944
-------------------------------------------------------------------------
P(LAG3)         C0         C1         C2         C3         C4         C5
     C0      1.000      0.000      0.000      0.000      0.000      0.000
     C1      0.000      0.889      0.000      0.000      0.111      0.000
     C2      0.000      0.000      1.000      0.000      0.000      0.000
     C3      0.000      0.000      0.000      0.975      0.025      0.000
     C4      0.000      0.034      0.000      0.190      0.776      0.000
     C5      0.000      0.000      0.000      0.000      0.000      0.000
-------------------------------------------------------------------------
P(LAG4)         C0         C1         C2         C3         C4         C5
     C0      1.000      0.000      0.000      0.000      0.000      0.000
     C1      0.000      0.977      0.023      0.000      0.000      0.000
     C2      0.000      0.000      0.937      0.000      0.063      0.000
     C3      0.000      0.000      0.000      0.937      0.063      0.000
     C4      0.001      0.002      0.013      0.010      0.974      0.000
     C5      0.000      0.000      0.000      0.000      0.000      1.000
-------------------------------------------------------------------------
P(LAG5)         C0         C1         C2         C3         C4         C5
     C0      1.000      0.000      0.000      0.000      0.000      0.000
     C1      0.000      0.000      0.000      0.000      0.000      0.000
     C2      0.000      0.000      0.929      0.000      0.000      0.071
     C3      0.000      0.000      0.000      1.000      0.000      0.000
     C4      0.000      0.000      0.500      0.000      0.500      0.000
     C5      0.000      0.000      0.018      0.000      0.000      0.982
-------------------------------------------------------------------------</code></pre>
</div>
</div>
<p>And we can use those transition rates to make predictions about future conditions (note this feature is still experimental). To simulate labels into the future, we determine the spatial context for each unit (determined by its local neighborhood via a PySAL Graph) and draw a new label from the conditional transition matrix implied by the units local neighborhood. This amounts to a simple cellular automata model on an irregular lattice, where there is only a single (stochastic) transition rule, whose transition probabilities update each round. It’s a bit like a schelling model in that each unit’s “preferences” for transition are based on the composition of the values around them, except that there are multiple occupancy types (and muliple “preferences” for those neighborhoods)</p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:58.589719Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:58.589498Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:17:59.761988Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:17:59.761276Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:58.589705Z&quot;}" data-tags="[]" data-execution_count="42">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>future <span class="op">=</span> chi_model.predict_markov_labels(time_steps<span class="op">=</span><span class="dv">10</span>, increment<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/knaaptime/Dropbox/projects/geosnap/geosnap/analyze/_model_results.py:777: UserWarning: No base_year provided. Using the last period for which labels are known:  2016 
  warn(
/Users/knaaptime/Dropbox/projects/geosnap/geosnap/analyze/dynamics.py:123: FutureWarning: `use_index` defaults to False but will default to True in future. Set True/False directly to control this behavior and silence this warning
  w = Ws[w_type].from_dataframe(gpd.GeoDataFrame(gdf_wide), **w_options)
/Users/knaaptime/Dropbox/projects/geosnap/geosnap/analyze/dynamics.py:330: FutureWarning: `use_index` defaults to False but will default to True in future. Set True/False directly to control this behavior and silence this warning
  w = Ws[w_type].from_dataframe(gdf, **w_options)
/Users/knaaptime/Dropbox/projects/geosnap/geosnap/analyze/dynamics.py:392: UserWarning: Falling back to aspatial transition rule for unit 17031831100
  warn(
/Users/knaaptime/Dropbox/projects/geosnap/geosnap/analyze/dynamics.py:392: UserWarning: Falling back to aspatial transition rule for unit 17031831100
  warn(
/Users/knaaptime/Dropbox/projects/geosnap/geosnap/analyze/dynamics.py:392: UserWarning: Falling back to aspatial transition rule for unit 17031804507
  warn(
/Users/knaaptime/Dropbox/projects/geosnap/geosnap/analyze/dynamics.py:392: UserWarning: Falling back to aspatial transition rule for unit 17031831100
  warn(
/Users/knaaptime/Dropbox/projects/geosnap/geosnap/analyze/dynamics.py:392: UserWarning: Falling back to aspatial transition rule for unit 17031804507
  warn(
/Users/knaaptime/Dropbox/projects/geosnap/geosnap/analyze/dynamics.py:392: UserWarning: Falling back to aspatial transition rule for unit 17031831100
  warn(
/Users/knaaptime/Dropbox/projects/geosnap/geosnap/analyze/dynamics.py:392: UserWarning: Falling back to aspatial transition rule for unit 17031804507
  warn(
/Users/knaaptime/Dropbox/projects/geosnap/geosnap/analyze/dynamics.py:392: UserWarning: Falling back to aspatial transition rule for unit 17031831100
  warn(
/Users/knaaptime/Dropbox/projects/geosnap/geosnap/analyze/dynamics.py:392: UserWarning: Falling back to aspatial transition rule for unit 17031804507
  warn(
/Users/knaaptime/Dropbox/projects/geosnap/geosnap/analyze/dynamics.py:392: UserWarning: Falling back to aspatial transition rule for unit 17031831100
  warn(</code></pre>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:17:59.762639Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:17:59.762555Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:18:43.149059Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:18:43.148588Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:17:59.762630Z&quot;}" data-tags="[]" data-execution_count="43">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>animate_timeseries(future, <span class="st">'predicted'</span>, categorical<span class="op">=</span><span class="va">True</span>, filename<span class="op">=</span><span class="st">'images/chicago_predictions.gif'</span>, fps<span class="op">=</span><span class="fl">1.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 2000x2000 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 2000x2000 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 2000x2000 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 2000x2000 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 2000x2000 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 2000x2000 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 2000x2000 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 2000x2000 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 2000x2000 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 2000x2000 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 2000x2000 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 1000x1000 with 0 Axes&gt;</code></pre>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/chicago_predictions.gif" class="img-fluid figure-img" width="800"></p>
<figcaption class="figure-caption">Predicted Neighborhood Types in Chicago</figcaption>
</figure>
</div>
<p>From a social equity perspective, these predictions can help inform investments in place that are likely to provide the greatest return, such as providing place-based affordable houising in high-opportunity (but low likelihood of change) or by providing displacement protections in places that show large potential for change. It also allows analysts to examine whether the placement of existing resources, like the current <a href="https://preservationdatabase.org/">inventory of assisted housing</a> or the <a href="https://evictionlab.org/map/">geography of eviction</a> is distributed equitably throughout this landscape (and the landscape we expect to emerge).</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./regionalization.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Geodemographic Regionalization</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./segregation_dynamics.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Spatiotemporal Segregation Dynamics</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 <p xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"><a property="dct:title" rel="cc:attributionURL" href="https://oturns.github.io/geosnap-guide">A Guide to Geosnap</a> by <a rel="cc:attributionURL dct:creator" property="cc:attributionName" href="https://knaaptime.com">elijah knaap</a> is licensed under <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">CC BY-NC-ND 4.0<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nd.svg?ref=chooser-v1"></a></p>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>