<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>The Geospatial Neighborhood Analysis Package - 8&nbsp; Travel Isochrones</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./segregation_dynamics.html" rel="prev">
<link href="./images/geosnap.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-0PG1JNLCXB"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-0PG1JNLCXB', { 'anonymize_ip': true});
</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<meta property="og:title" content="A Guide to Geosnap">
<meta property="og:description" content="">
<meta property="og:image" content="https://oturns.github.io.geosnap-guide/images/geosnap_long.png">
<meta property="og:site-name" content="The Geospatial Neighborhood Analysis Package">
<meta property="og:image:height" content="640">
<meta property="og:image:width" content="1280">
<meta name="twitter:title" content="The Geospatial Neighborhood Analysis Package - 8&nbsp; Travel Isochrones">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://upload.wikimedia.org/wikipedia/en/e/e3/New_York_Regional_Survey%2C_Vol_7.jpg?20170410025533">
<meta name="twitter:creator" content="@knaaptime">
<meta name="twitter:site" content="@knaaptime">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./isochrone_example.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Travel Isochrones</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./images/geosnap_long.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">The Geospatial Neighborhood Analysis Package</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/oturns/geosnap/" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="https://twitter.com/intent/tweet?url=|url|" rel="" title="Twitter" class="quarto-navigation-tool px-1" aria-label="Twitter"><i class="bi bi-twitter"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Citation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./datasets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data Sets</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./harmonization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Boundary Harmonization</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./clustering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Geodemographic Clustering</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./regionalization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Geodemographic Regionalization</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dynamics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Neighborhood Dynamics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./segregation_dynamics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Spatiotemporal Segregation Dynamics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./isochrone_example.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Travel Isochrones</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#visualizing-the-20-minute-neighborhood" id="toc-visualizing-the-20-minute-neighborhood" class="nav-link active" data-scroll-target="#visualizing-the-20-minute-neighborhood"><span class="header-section-number">8.1</span> Visualizing the 20-Minute Neighborhood</a></li>
  <li><a href="#isochrones-for-specified-locations" id="toc-isochrones-for-specified-locations" class="nav-link" data-scroll-target="#isochrones-for-specified-locations"><span class="header-section-number">8.2</span> Isochrones for Specified Locations</a></li>
  <li><a href="#extensions" id="toc-extensions" class="nav-link" data-scroll-target="#extensions"><span class="header-section-number">8.3</span> Extensions</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.dev/oturns/geosnap/blob/main/isochrone_example.ipynb" class="toc-action">Edit this page</a></p><p><a href="https://github.com/oturns/geosnap/blob/main/isochrone_example.ipynb" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Travel Isochrones</span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:11.380816Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:11.380625Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:14.597385Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:14.597107Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:11.380796Z&quot;}" data-tags="[]" data-execution_count="1">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>load_ext watermark</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>watermark <span class="op">-</span>a <span class="st">'eli knaap'</span> <span class="op">-</span>v <span class="op">-</span>d <span class="op">-</span>u <span class="op">-</span>p geopandas,geosnap</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>load_ext autoreload</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>autoreload <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Author: eli knaap

Last updated: 2024-01-23

Python implementation: CPython
Python version       : 3.11.0
IPython version      : 8.18.1

geopandas: 0.14.2
geosnap  : 0.12.1.dev9+g3a1cb0f6de61.d20240110
</code></pre>
</div>
</div>
<section id="visualizing-the-20-minute-neighborhood" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="visualizing-the-20-minute-neighborhood"><span class="header-section-number">8.1</span> Visualizing the 20-Minute Neighborhood</h2>
<p>As a package focused on “neighborhoods”, much of the functionality in geosnap is organized around the concept of ‘endogenous’ neighborhoods. That is, it takes a classical perspective on neighborhood formation: a ‘neighborhood’ is defined loosely by its social composition, and the dynamics of residential mobility mean that these neighborhoods can grow, shrink, or transition entirely.</p>
<p>But two alternative concepts of “neighborhood” are also worth considering. The first, posited by social scientists, is that each person or household can be conceptialized as residing in <em>its own</em> neighborhood which extends outward from the person’s household until some threshold distance. This neighborhood represents the boundary inside which we might expect some social interaction to occur with one’s ‘neighbors’. The second is a normative concept advocated by architects, urban designers, and planners (arguably still the goal for <a href="http://www.newurbanism.org">new urbanists</a>): that a neighborhood is <a href="https://en.wikipedia.org/wiki/Neighbourhood_unit">a discrete pocket of infrastructure</a> organized as a small, self-contained economic unit. A common shorthand today is <a href="https://linkinghub.elsevier.com/retrieve/pii/S1361920921004077">the 20 minute neighborhood</a>.</p>
<p><img src="https://upload.wikimedia.org/wikipedia/en/e/e3/New_York_Regional_Survey%2C_Vol_7.jpg?20170410025533" class="img-fluid"></p>
<p><a href="https://upload.wikimedia.org/wikipedia/en/e/e3/New_York_Regional_Survey%2C_Vol_7.jpg?20170410025533" class="uri">https://upload.wikimedia.org/wikipedia/en/e/e3/New_York_Regional_Survey%2C_Vol_7.jpg?20170410025533</a></p>
<p>The difference between these two perspectives is really what defines the origin of the neighborhood (the ‘town center’ or the person’s home), and whether ‘neighborhood’ is universal to all neighbors or unique for each resident. Both of them rely abstractly on the concept of an isochrone: the set of destinations accessible within a specified travel budget. Defining an isochrone is a network routing problem, but its spatial representation is usually given as a polygon that covers the set of locations. That polygon is also sometimes called a walkshed (or *travel shed, depending on the particular mode). For the person at the center of the isochrone, whose “neighborhood” the isochrone represents, the polygon is sometimes conceptualized as an “egohood” or “bespoke neighborhood”.</p>
<p>The trouble with generating isochrones is twofold. First, they are computationally intensive to create. You need to know the shortest path from an origin to all other possible destinations inside the travel threshold, and depending on the density of the network, this can scale masssively. Second, they are not straightforward to present cartographically/visually. The set of destinations reachable within the threshold is technically a set of <em>points</em>. If you’re constrained to a network, then we can usually assume that you also have access to potential locations between discrete destinations. For example if you’re walking along the sidewalk, you can stop at any house along the block until you reach your threshold distance. But sometimes that’s not the case. If you walk to a subway station, you can stop anywhere along the walk–until you get into the subway, then you are stuck traveling in one direction until you reach another station, then you get freedom of mobility again.</p>
<p>The latter case is particularly difficult to represent because it doesnt create a “valid” polygon… there’s a single polygon in the pre-transit zone, then the “accessible zone” collapses to a line (or nothing at all?) before opening back up into a polygon again. Like a barbell. If you take the simple route and just draw a <a href="https://en.wikipedia.org/wiki/Convex_hull">convex hull</a> around the accessible destinations, it will fail to collapse along the line, giving the false impression of much more ‘access’ than is realistic.</p>
<p>But then again, sometimes these off-network spaces are actually traversable. If two network nodes inside the travel threshold are separated by a park, then you can just walk through the park and that should be included in the visualization. If they are separated by a harbor or a mountain, you definitely can’t walk through (ok, maybe you could <em>get</em> through, but not without sacrificing a bit of speed at the very least).</p>
<p>To handle these issues, the isochrones implemented in geosnap take a straightforward approach, achieving a good balance between accuracy and speed. Specifically, we tackle the problem in two stages: first, we use pandana to generate the set nodes accessible from [a set of] destination[s]. Then we wrap an <a href="https://en.wikipedia.org/wiki/Alpha_shape">alpha shape</a> around those destinations to create a tightly-fitted polygon. The alpha shape algorithm implemented in libpysal is also blazing fast, so the approach has worked quite well in all of our applications</p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:14.598686Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:14.598574Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:14.621088Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:14.620784Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:14.598673Z&quot;}" data-tags="[]" data-execution_count="2">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> geosnap.analyze <span class="im">import</span> isochrones_from_id, isochrones_from_gdf, pdna_to_adj </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> geosnap.io <span class="im">import</span> get_acs</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> geosnap <span class="im">import</span> DataStore</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:14.621541Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:14.621459Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:14.711742Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:14.711306Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:14.621531Z&quot;}" data-tags="[]" data-execution_count="3">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandana <span class="im">as</span> pdna</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:14.712395Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:14.712293Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:14.739458Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:14.739176Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:14.712382Z&quot;}" data-tags="[]" data-execution_count="4">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>datasets <span class="op">=</span> DataStore()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>To generate a routable network, use <a href="">pandana</a> or <a href="">urbanaccess</a>. Alternatively, you can download one of the metropolitan-scale pedestrian networks for the U.S. from geosnap’s <a href="https://open.quiltdata.com/b/spatial-ucr/tree/osm/metro_networks_8k/">quilt bucket</a>. The files are named for each CBSA fips code and extend 8km beyond the metro region’s borders to help mitigate edge effects. Here, we’ll use the quilt version from the San Diego region.</p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:14.739974Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:14.739890Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:18.645137Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:18.644882Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:14.739965Z&quot;}" data-tags="[]" data-execution_count="5">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>sd_tracts <span class="op">=</span> get_acs(datasets, county_fips<span class="op">=</span><span class="st">'06073'</span>, years<span class="op">=</span>[<span class="dv">2018</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/knaaptime/Dropbox/projects/geosnap/geosnap/io/constructors.py:215: UserWarning: Currency columns unavailable at this resolution; not adjusting for inflation
  warn(</code></pre>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:18.645706Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:18.645617Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:23.866751Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:23.866431Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:18.645697Z&quot;}" data-tags="[]" data-execution_count="6">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> os.path.exists(<span class="st">'41740.h5'</span>):</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="im">import</span> quilt3 <span class="im">as</span> q3</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    b <span class="op">=</span> q3.Bucket(<span class="st">"s3://spatial-ucr"</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    b.fetch(<span class="st">"osm/metro_networks_8k/41740.h5"</span>, <span class="st">"./41740.h5"</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>sd_network <span class="op">=</span> pdna.Network.from_hdf5(<span class="st">"41740.h5"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Generating contraction hierarchies with 10 threads.
Setting CH node vector of size 332554
Setting CH edge vector of size 522484
Range graph removed 143094 edges of 1044968
. 10% . 20% . 30% . 40% . 50% . 60% . 70% . 80% . 90% . 100%</code></pre>
</div>
</div>
<p>To generate a travel isochrone, we have to specify an origin node on the network. For demonstration purposes, we can randomly select an origin from the network’s <code>nodes_df</code> dataframe (or choose a pre-selected example). To get the nodes for a specific set of origins, you can use pandana’s <a href="http://udst.github.io/pandana/network.html#pandana.network.Network.get_node_ids"><code>get_node_ids</code></a> function</p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:23.868482Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:23.868396Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:23.895197Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:23.894821Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:23.868471Z&quot;}" data-tags="[]" data-execution_count="7">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> random <span class="im">import</span> sample</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:23.895625Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:23.895548Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:23.929012Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:23.928650Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:23.895615Z&quot;}" data-tags="[]" data-execution_count="8">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>random_origin <span class="op">=</span> sample(sd_network.nodes_df.index.unique().tolist(),<span class="dv">1</span>)[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:23.929557Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:23.929473Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:23.953793Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:23.953433Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:23.929548Z&quot;}" data-tags="[]" data-execution_count="9">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>random_origin</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>49019526</code></pre>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:23.954524Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:23.954395Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:23.978219Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:23.977879Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:23.954512Z&quot;}" data-tags="[]" data-execution_count="10">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>example_origin <span class="op">=</span> <span class="dv">1985327805</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><a href="https://www.nike.com/a/how-long-does-it-take-to-walk-a-mile"><del>Nike</del></a>, er… <a href="https://jamanetwork.com/journals/jamanetworkopen/fullarticle/2752818">this study</a> says that the average person walks about a mile in 20 minutes, so we can define the 20-minute neighborhood for a given household as the 1-mile walkshed from that house. To simplify the computation a little, we say that each house “exists” at it’s nearest intersection</p>
<p>(this is the abstraction <code>pandana</code> typically uses to simplify the problem when using data from OpenStreetMap. There’s nothing prohibiting you from creating an even more realistic version with nodes for each residence, as long as you’re comfortable creating the <a href="https://udst.github.io/pandana/network.html"><code>Network</code></a>)</p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:23.978877Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:23.978614Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:25.342150Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:25.341840Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:23.978862Z&quot;}" data-tags="[]" data-execution_count="11">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>adj <span class="op">=</span> pdna_to_adj(sd_tracts.set_index(<span class="st">'geoid'</span>), sd_network, threshold<span class="op">=</span><span class="dv">1600</span>, )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/knaaptime/Dropbox/projects/geosnap/geosnap/analyze/network.py:34: UserWarning: Geometry is in a geographic CRS. Results from 'centroid' are likely incorrect. Use 'GeoSeries.to_crs()' to re-project geometries to a projected CRS before this operation.

  node_ids = network.get_node_ids(origins.centroid.x, origins.centroid.y).astype(int)</code></pre>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:25.342849Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:25.342758Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:25.368792Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:25.368372Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:25.342839Z&quot;}" data-tags="[]" data-execution_count="12">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>adj</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="12">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">origin</th>
<th data-quarto-table-cell-role="th">destination</th>
<th data-quarto-table-cell-role="th">cost</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>060730001001</td>
<td>060730001001</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">136</td>
<td>060730001001</td>
<td>060730001002</td>
<td>987.565979</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">197</td>
<td>060730001001</td>
<td>060730002011</td>
<td>1221.943970</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">240</td>
<td>060730001001</td>
<td>060730002022</td>
<td>1465.890991</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">280</td>
<td>060730001002</td>
<td>060730001002</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1036301</td>
<td>060730166072</td>
<td>060730166071</td>
<td>1596.958008</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1036304</td>
<td>060730166073</td>
<td>060730166073</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1036489</td>
<td>060730166073</td>
<td>060730166071</td>
<td>932.747009</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1036512</td>
<td>060730166073</td>
<td>060730166072</td>
<td>982.960022</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1036608</td>
<td>060730166073</td>
<td>060730166101</td>
<td>1229.456055</td>
</tr>
</tbody>
</table>

<p>11391 rows × 3 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:25.369463Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:25.369351Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:26.374243Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:26.373987Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:25.369455Z&quot;}" data-tags="[]" data-execution_count="13">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>time</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>iso <span class="op">=</span> isochrones_from_id(example_origin, sd_network, threshold<span class="op">=</span><span class="dv">1600</span> ) <span class="co"># network is expressed in meters</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/knaaptime/Dropbox/projects/geosnap/geosnap/analyze/network.py:34: UserWarning: Geometry is in a geographic CRS. Results from 'centroid' are likely incorrect. Use 'GeoSeries.to_crs()' to re-project geometries to a projected CRS before this operation.

  node_ids = network.get_node_ids(origins.centroid.x, origins.centroid.y).astype(int)</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>CPU times: user 925 ms, sys: 44.1 ms, total: 969 ms
Wall time: 979 ms</code></pre>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:26.374951Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:26.374712Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:26.521941Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:26.521693Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:26.374942Z&quot;}" data-tags="[]" data-execution_count="14">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>iso.explore()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="14">

<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -&gt; Trust Notebook</span><iframe srcdoc="<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;></script>
    <script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;></script>
    <script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;></script>
    <script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;></script>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/>
    
            <meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; />
            <style>
                #map_dd2cd32e1b3f1bc4522fddca2490f7f7 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>
        
    
                    <style>
                        .foliumtooltip {
                            
                        }
                       .foliumtooltip table{
                            margin: auto;
                        }
                        .foliumtooltip tr{
                            text-align: left;
                        }
                        .foliumtooltip th{
                            padding: 2px; padding-right: 8px;
                        }
                    </style>
            
</head>
<body>
    
    
            <div class=&quot;folium-map&quot; id=&quot;map_dd2cd32e1b3f1bc4522fddca2490f7f7&quot; ></div>
        
</body>
<script>
    
    
            var map_dd2cd32e1b3f1bc4522fddca2490f7f7 = L.map(
                &quot;map_dd2cd32e1b3f1bc4522fddca2490f7f7&quot;,
                {
                    center: [33.441641000000004, -117.60211535],
                    crs: L.CRS.EPSG3857,
                    zoom: 10,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );
            L.control.scale().addTo(map_dd2cd32e1b3f1bc4522fddca2490f7f7);

            

        
    
            var tile_layer_96726a0798a96cc5c0be240a3b431d96 = L.tileLayer(
                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,
                {&quot;attribution&quot;: &quot;\u0026copy; \u003ca href=\&quot;https://www.openstreetmap.org/copyright\&quot;\u003eOpenStreetMap\u003c/a\u003e contributors&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 19, &quot;maxZoom&quot;: 19, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            );
        
    
            tile_layer_96726a0798a96cc5c0be240a3b431d96.addTo(map_dd2cd32e1b3f1bc4522fddca2490f7f7);
        
    
            map_dd2cd32e1b3f1bc4522fddca2490f7f7.fitBounds(
                [[33.4352644, -117.6149627], [33.4480176, -117.589268]],
                {}
            );
        
    
        function geo_json_b907e586573fb5414ce31c3fea5e6e8b_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};
            }
        }
        function geo_json_b907e586573fb5414ce31c3fea5e6e8b_highlighter(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0.75};
            }
        }
        function geo_json_b907e586573fb5414ce31c3fea5e6e8b_pointToLayer(feature, latlng) {
            var opts = {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;opacity&quot;: 1.0, &quot;radius&quot;: 2, &quot;stroke&quot;: true, &quot;weight&quot;: 3};
            
            let style = geo_json_b907e586573fb5414ce31c3fea5e6e8b_styler(feature)
            Object.assign(opts, style)
            
            return new L.CircleMarker(latlng, opts)
        }

        function geo_json_b907e586573fb5414ce31c3fea5e6e8b_onEachFeature(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        geo_json_b907e586573fb5414ce31c3fea5e6e8b.resetStyle(e.target);
                    }
                },
                mouseover: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        const highlightStyle = geo_json_b907e586573fb5414ce31c3fea5e6e8b_highlighter(e.target.feature)
                        e.target.setStyle(highlightStyle);
                    }
                },
            });
        };
        var geo_json_b907e586573fb5414ce31c3fea5e6e8b = L.geoJson(null, {
                onEachFeature: geo_json_b907e586573fb5414ce31c3fea5e6e8b_onEachFeature,
            
                style: geo_json_b907e586573fb5414ce31c3fea5e6e8b_styler,
                pointToLayer: geo_json_b907e586573fb5414ce31c3fea5e6e8b_pointToLayer,
        });

        function geo_json_b907e586573fb5414ce31c3fea5e6e8b_add (data) {
            geo_json_b907e586573fb5414ce31c3fea5e6e8b
                .addData(data);
        }
            geo_json_b907e586573fb5414ce31c3fea5e6e8b_add({&quot;bbox&quot;: [-117.6149627, 33.4352644, -117.589268, 33.4480176], &quot;features&quot;: [{&quot;bbox&quot;: [-117.6149627, 33.4352644, -117.589268, 33.4480176], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.5922923, 33.4440509], [-117.5902135, 33.443599], [-117.589268, 33.4412214], [-117.5911919, 33.4369492], [-117.5911683, 33.4356881], [-117.5920085, 33.4353402], [-117.5928484, 33.4352644], [-117.5947469, 33.4363226], [-117.5974836, 33.4376435], [-117.5978631, 33.4377787], [-117.5991264, 33.438542], [-117.5994683, 33.4388998], [-117.6019739, 33.4401361], [-117.602542, 33.440207], [-117.6063877, 33.4417727], [-117.6088133, 33.4426619], [-117.6143231, 33.4425595], [-117.6148579, 33.4429227], [-117.6149627, 33.4433759], [-117.6147933, 33.4435268], [-117.6143171, 33.4439418], [-117.6136147, 33.4445241], [-117.6130065, 33.4450274], [-117.6067391, 33.443218], [-117.6060505, 33.4435429], [-117.6047276, 33.4444191], [-117.6023689, 33.4480176], [-117.6007767, 33.4473405], [-117.600112, 33.4467148], [-117.5976987, 33.445126], [-117.5976053, 33.4450649], [-117.5934028, 33.4445491], [-117.5922923, 33.4440509]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
    geo_json_b907e586573fb5414ce31c3fea5e6e8b.bindTooltip(
    function(layer){
    let div = L.DomUtil.create('div');
    
    let handleObject = feature=>typeof(feature)=='object' ? JSON.stringify(feature) : feature;
    let fields = [&quot;distance&quot;];
    let aliases = [&quot;distance&quot;];
    let table = '<table>' +
        String(
        fields.map(
        (v,i)=>
        `<tr>
            <th>${aliases[i]}</th>
            
            <td>${handleObject(layer.feature.properties[v])}</td>
        </tr>`).join(''))
    +'</table>';
    div.innerHTML=table;
    
    return div
    }
    ,{&quot;className&quot;: &quot;foliumtooltip&quot;, &quot;sticky&quot;: true});
                     
    
            geo_json_b907e586573fb5414ce31c3fea5e6e8b.addTo(map_dd2cd32e1b3f1bc4522fddca2490f7f7);
        
</script>
</html>" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen=""></iframe></div></div>
</div>
</div>
<p>We can also look at how the isochrone or bespoke neighborhood changes size and shape as we consider alternative travel thresholds. Because of the underlying network configuration, changing the threshold often results in some areas of the “neighborhood” changing more than others</p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:26.522574Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:26.522380Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:27.193130Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:27.192855Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:26.522564Z&quot;}" data-tags="[]" data-execution_count="15">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>time</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>iso_multiple <span class="op">=</span> isochrones_from_id(example_origin, sd_network, threshold<span class="op">=</span>[<span class="dv">1600</span>, <span class="dv">2400</span>, <span class="dv">3200</span>]  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/knaaptime/Dropbox/projects/geosnap/geosnap/analyze/network.py:34: UserWarning: Geometry is in a geographic CRS. Results from 'centroid' are likely incorrect. Use 'GeoSeries.to_crs()' to re-project geometries to a projected CRS before this operation.

  node_ids = network.get_node_ids(origins.centroid.x, origins.centroid.y).astype(int)</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>CPU times: user 593 ms, sys: 18.9 ms, total: 612 ms
Wall time: 644 ms</code></pre>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:27.193692Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:27.193610Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:27.239172Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:27.238843Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:27.193682Z&quot;}" data-tags="[]" data-execution_count="16">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>iso_multiple.explore(<span class="st">'distance'</span>, cmap<span class="op">=</span><span class="st">'Blues_r'</span>, style_kwds<span class="op">=</span>{<span class="st">'fillOpacity'</span>:<span class="fl">0.5</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="16">

<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -&gt; Trust Notebook</span><iframe srcdoc="<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;></script>
    <script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;></script>
    <script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;></script>
    <script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;></script>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/>
    
            <meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; />
            <style>
                #map_961d857400d6eef73664d0fc177d77b1 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>
        
    
                    <style>
                        .foliumtooltip {
                            
                        }
                       .foliumtooltip table{
                            margin: auto;
                        }
                        .foliumtooltip tr{
                            text-align: left;
                        }
                        .foliumtooltip th{
                            padding: 2px; padding-right: 8px;
                        }
                    </style>
            
    <script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js&quot;></script>
</head>
<body>
    
    
            <div class=&quot;folium-map&quot; id=&quot;map_961d857400d6eef73664d0fc177d77b1&quot; ></div>
        
</body>
<script>
    
    
            var map_961d857400d6eef73664d0fc177d77b1 = L.map(
                &quot;map_961d857400d6eef73664d0fc177d77b1&quot;,
                {
                    center: [33.44471355, -117.6080777],
                    crs: L.CRS.EPSG3857,
                    zoom: 10,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );
            L.control.scale().addTo(map_961d857400d6eef73664d0fc177d77b1);

            

        
    
            var tile_layer_1948d5ca677460b6a6aafe8cd6ee8237 = L.tileLayer(
                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,
                {&quot;attribution&quot;: &quot;\u0026copy; \u003ca href=\&quot;https://www.openstreetmap.org/copyright\&quot;\u003eOpenStreetMap\u003c/a\u003e contributors&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 19, &quot;maxZoom&quot;: 19, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            );
        
    
            tile_layer_1948d5ca677460b6a6aafe8cd6ee8237.addTo(map_961d857400d6eef73664d0fc177d77b1);
        
    
            map_961d857400d6eef73664d0fc177d77b1.fitBounds(
                [[33.4316456, -117.6296676], [33.4577815, -117.5864878]],
                {}
            );
        
    
        function geo_json_ab3ffc40f619547ea770466dc2a5ee1c_styler(feature) {
            switch(feature.id) {
                case &quot;0&quot;: 
                    return {&quot;color&quot;: &quot;#f7fbff&quot;, &quot;fillColor&quot;: &quot;#f7fbff&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};
                case &quot;1&quot;: 
                    return {&quot;color&quot;: &quot;#6aaed6&quot;, &quot;fillColor&quot;: &quot;#6aaed6&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};
                default:
                    return {&quot;color&quot;: &quot;#08306b&quot;, &quot;fillColor&quot;: &quot;#08306b&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};
            }
        }
        function geo_json_ab3ffc40f619547ea770466dc2a5ee1c_highlighter(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0.75};
            }
        }
        function geo_json_ab3ffc40f619547ea770466dc2a5ee1c_pointToLayer(feature, latlng) {
            var opts = {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;opacity&quot;: 1.0, &quot;radius&quot;: 2, &quot;stroke&quot;: true, &quot;weight&quot;: 3};
            
            let style = geo_json_ab3ffc40f619547ea770466dc2a5ee1c_styler(feature)
            Object.assign(opts, style)
            
            return new L.CircleMarker(latlng, opts)
        }

        function geo_json_ab3ffc40f619547ea770466dc2a5ee1c_onEachFeature(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        geo_json_ab3ffc40f619547ea770466dc2a5ee1c.resetStyle(e.target);
                    }
                },
                mouseover: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        const highlightStyle = geo_json_ab3ffc40f619547ea770466dc2a5ee1c_highlighter(e.target.feature)
                        e.target.setStyle(highlightStyle);
                    }
                },
            });
        };
        var geo_json_ab3ffc40f619547ea770466dc2a5ee1c = L.geoJson(null, {
                onEachFeature: geo_json_ab3ffc40f619547ea770466dc2a5ee1c_onEachFeature,
            
                style: geo_json_ab3ffc40f619547ea770466dc2a5ee1c_styler,
                pointToLayer: geo_json_ab3ffc40f619547ea770466dc2a5ee1c_pointToLayer,
        });

        function geo_json_ab3ffc40f619547ea770466dc2a5ee1c_add (data) {
            geo_json_ab3ffc40f619547ea770466dc2a5ee1c
                .addData(data);
        }
            geo_json_ab3ffc40f619547ea770466dc2a5ee1c_add({&quot;bbox&quot;: [-117.6296676, 33.4316456, -117.5864878, 33.4577815], &quot;features&quot;: [{&quot;bbox&quot;: [-117.6296676, 33.4316456, -117.5864878, 33.4577815], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.6205959, 33.4487158], [-117.6169474, 33.4548918], [-117.6170647, 33.4553937], [-117.610578, 33.4577815], [-117.6051136, 33.4563097], [-117.6026985, 33.4566246], [-117.6007086, 33.4562777], [-117.6005742, 33.4561531], [-117.5970613, 33.4548119], [-117.5933689, 33.4548953], [-117.5932592, 33.4536074], [-117.5917638, 33.450897], [-117.5893511, 33.4488665], [-117.5875558, 33.4483779], [-117.5866261, 33.4480416], [-117.5864878, 33.4450285], [-117.587352, 33.442573], [-117.589211, 33.4357379], [-117.5920085, 33.4353402], [-117.5928484, 33.4352644], [-117.5947469, 33.4363226], [-117.5974836, 33.4376435], [-117.5978631, 33.4377787], [-117.6045653, 33.4347411], [-117.6063035, 33.4334535], [-117.6118103, 33.4316456], [-117.6135399, 33.4321773], [-117.6153462, 33.4326979], [-117.6236808, 33.432922], [-117.624246, 33.4331313], [-117.6243415, 33.4331667], [-117.6248074, 33.4333725], [-117.6283422, 33.4349441], [-117.6296294, 33.4352739], [-117.6286599, 33.4375677], [-117.6289376, 33.4453136], [-117.6296241, 33.4463649], [-117.6296676, 33.4472622], [-117.6279876, 33.4474355], [-117.6253664, 33.4483436], [-117.6219617, 33.4482325], [-117.6205959, 33.4487158]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#f7fbff&quot;, &quot;distance&quot;: 3200}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-117.6233869, 33.4352644, -117.587352, 33.4525801], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.6217629, 33.4390662], [-117.6219705, 33.4391651], [-117.623246, 33.4420319], [-117.6233869, 33.4424896], [-117.6227349, 33.4426848], [-117.6226689, 33.4426627], [-117.6216345, 33.4418807], [-117.6168839, 33.4425642], [-117.6149627, 33.4433759], [-117.6147933, 33.4435268], [-117.6143171, 33.4439418], [-117.6136147, 33.4445241], [-117.6130065, 33.4450274], [-117.6094625, 33.4492287], [-117.6098624, 33.4522038], [-117.6097734, 33.4522571], [-117.6084776, 33.4513246], [-117.6032073, 33.4513898], [-117.602932, 33.451654], [-117.6013687, 33.4525801], [-117.5993361, 33.4524836], [-117.5964797, 33.4483588], [-117.5927503, 33.4504672], [-117.5917583, 33.4507698], [-117.5916688, 33.4492373], [-117.5910642, 33.4449815], [-117.5874904, 33.4439894], [-117.587352, 33.442573], [-117.589268, 33.4412214], [-117.5899642, 33.4406589], [-117.5911919, 33.4369492], [-117.5911683, 33.4356881], [-117.5920085, 33.4353402], [-117.5928484, 33.4352644], [-117.5947469, 33.4363226], [-117.5974836, 33.4376435], [-117.5978631, 33.4377787], [-117.5991264, 33.438542], [-117.5994683, 33.4388998], [-117.6006623, 33.4397387], [-117.6011842, 33.4399465], [-117.6019739, 33.4401361], [-117.602542, 33.440207], [-117.6063877, 33.4417727], [-117.6100232, 33.4378104], [-117.6104282, 33.4379023], [-117.6134554, 33.4369881], [-117.6159928, 33.4373648], [-117.6202437, 33.4392753], [-117.6217629, 33.4390662]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;1&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#6aaed6&quot;, &quot;distance&quot;: 2400}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-117.6149627, 33.4352644, -117.589268, 33.4480176], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.5922923, 33.4440509], [-117.5902135, 33.443599], [-117.589268, 33.4412214], [-117.5911919, 33.4369492], [-117.5911683, 33.4356881], [-117.5920085, 33.4353402], [-117.5928484, 33.4352644], [-117.5947469, 33.4363226], [-117.5974836, 33.4376435], [-117.5978631, 33.4377787], [-117.5991264, 33.438542], [-117.5994683, 33.4388998], [-117.6019739, 33.4401361], [-117.602542, 33.440207], [-117.6063877, 33.4417727], [-117.6088133, 33.4426619], [-117.6143231, 33.4425595], [-117.6148579, 33.4429227], [-117.6149627, 33.4433759], [-117.6147933, 33.4435268], [-117.6143171, 33.4439418], [-117.6136147, 33.4445241], [-117.6130065, 33.4450274], [-117.6067391, 33.443218], [-117.6060505, 33.4435429], [-117.6047276, 33.4444191], [-117.6023689, 33.4480176], [-117.6007767, 33.4473405], [-117.600112, 33.4467148], [-117.5976987, 33.445126], [-117.5976053, 33.4450649], [-117.5934028, 33.4445491], [-117.5922923, 33.4440509]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;2&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#08306b&quot;, &quot;distance&quot;: 1600}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
    geo_json_ab3ffc40f619547ea770466dc2a5ee1c.bindTooltip(
    function(layer){
    let div = L.DomUtil.create('div');
    
    let handleObject = feature=>typeof(feature)=='object' ? JSON.stringify(feature) : feature;
    let fields = [&quot;distance&quot;];
    let aliases = [&quot;distance&quot;];
    let table = '<table>' +
        String(
        fields.map(
        (v,i)=>
        `<tr>
            <th>${aliases[i]}</th>
            
            <td>${handleObject(layer.feature.properties[v])}</td>
        </tr>`).join(''))
    +'</table>';
    div.innerHTML=table;
    
    return div
    }
    ,{&quot;className&quot;: &quot;foliumtooltip&quot;, &quot;sticky&quot;: true});
                     
    
            geo_json_ab3ffc40f619547ea770466dc2a5ee1c.addTo(map_961d857400d6eef73664d0fc177d77b1);
        
    
    var color_map_8a7ef2888aceabb9e50a62439f81dc7e = {};

    
    color_map_8a7ef2888aceabb9e50a62439f81dc7e.color = d3.scale.threshold()
              .domain([1600.0, 1603.2064128256513, 1606.4128256513027, 1609.6192384769538, 1612.8256513026051, 1616.0320641282565, 1619.2384769539078, 1622.4448897795592, 1625.6513026052105, 1628.8577154308616, 1632.064128256513, 1635.2705410821643, 1638.4769539078156, 1641.683366733467, 1644.8897795591183, 1648.0961923847694, 1651.3026052104208, 1654.5090180360721, 1657.7154308617235, 1660.9218436873748, 1664.1282565130261, 1667.3346693386773, 1670.5410821643286, 1673.74749498998, 1676.9539078156313, 1680.1603206412826, 1683.366733466934, 1686.573146292585, 1689.7795591182364, 1692.9859719438878, 1696.192384769539, 1699.3987975951904, 1702.6052104208418, 1705.811623246493, 1709.0180360721442, 1712.2244488977956, 1715.430861723447, 1718.6372745490983, 1721.8436873747496, 1725.0501002004007, 1728.256513026052, 1731.4629258517034, 1734.6693386773547, 1737.875751503006, 1741.0821643286572, 1744.2885771543085, 1747.4949899799599, 1750.7014028056112, 1753.9078156312626, 1757.114228456914, 1760.3206412825652, 1763.5270541082164, 1766.7334669338677, 1769.939879759519, 1773.1462925851704, 1776.3527054108217, 1779.5591182364728, 1782.7655310621242, 1785.9719438877755, 1789.1783567134269, 1792.3847695390782, 1795.5911823647295, 1798.797595190381, 1802.004008016032, 1805.2104208416833, 1808.4168336673347, 1811.623246492986, 1814.8296593186374, 1818.0360721442885, 1821.2424849699398, 1824.4488977955912, 1827.6553106212425, 1830.8617234468938, 1834.0681362725452, 1837.2745490981963, 1840.4809619238476, 1843.687374749499, 1846.8937875751503, 1850.1002004008017, 1853.306613226453, 1856.5130260521041, 1859.7194388777555, 1862.9258517034068, 1866.1322645290581, 1869.3386773547095, 1872.5450901803606, 1875.751503006012, 1878.9579158316633, 1882.1643286573146, 1885.370741482966, 1888.5771543086173, 1891.7835671342687, 1894.9899799599198, 1898.196392785571, 1901.4028056112224, 1904.6092184368738, 1907.8156312625251, 1911.0220440881762, 1914.2284569138276, 1917.434869739479, 1920.6412825651303, 1923.8476953907816, 1927.054108216433, 1930.2605210420843, 1933.4669338677354, 1936.6733466933867, 1939.879759519038, 1943.0861723446894, 1946.2925851703408, 1949.4989979959919, 1952.7054108216432, 1955.9118236472946, 1959.118236472946, 1962.3246492985973, 1965.5310621242484, 1968.7374749499, 1971.943887775551, 1975.1503006012024, 1978.3567134268537, 1981.563126252505, 1984.7695390781564, 1987.9759519038075, 1991.1823647294589, 1994.3887775551102, 1997.5951903807616, 2000.801603206413, 2004.008016032064, 2007.2144288577153, 2010.4208416833667, 2013.627254509018, 2016.8336673346694, 2020.0400801603207, 2023.246492985972, 2026.4529058116232, 2029.6593186372745, 2032.8657314629259, 2036.0721442885772, 2039.2785571142285, 2042.4849699398796, 2045.691382765531, 2048.8977955911823, 2052.104208416834, 2055.310621242485, 2058.517034068136, 2061.7234468937877, 2064.929859719439, 2068.1362725450904, 2071.3426853707415, 2074.5490981963926, 2077.755511022044, 2080.9619238476953, 2084.168336673347, 2087.374749498998, 2090.581162324649, 2093.7875751503007, 2096.9939879759518, 2100.2004008016033, 2103.4068136272545, 2106.613226452906, 2109.819639278557, 2113.0260521042082, 2116.23246492986, 2119.438877755511, 2122.645290581162, 2125.8517034068136, 2129.058116232465, 2132.2645290581163, 2135.4709418837674, 2138.677354709419, 2141.88376753507, 2145.090180360721, 2148.296593186373, 2151.503006012024, 2154.7094188376755, 2157.9158316633266, 2161.122244488978, 2164.3286573146293, 2167.5350701402804, 2170.741482965932, 2173.947895791583, 2177.1543086172346, 2180.3607214428857, 2183.5671342685373, 2186.7735470941884, 2189.9799599198395, 2193.186372745491, 2196.392785571142, 2199.5991983967933, 2202.805611222445, 2206.0120240480965, 2209.2184368737476, 2212.4248496993987, 2215.6312625250503, 2218.8376753507014, 2222.0440881763525, 2225.250501002004, 2228.456913827655, 2231.6633266533067, 2234.869739478958, 2238.0761523046094, 2241.2825651302605, 2244.4889779559117, 2247.695390781563, 2250.9018036072143, 2254.108216432866, 2257.314629258517, 2260.5210420841686, 2263.7274549098197, 2266.933867735471, 2270.1402805611224, 2273.3466933867735, 2276.5531062124246, 2279.759519038076, 2282.9659318637273, 2286.172344689379, 2289.37875751503, 2292.5851703406815, 2295.7915831663327, 2298.9979959919838, 2302.2044088176353, 2305.4108216432865, 2308.617234468938, 2311.823647294589, 2315.0300601202407, 2318.236472945892, 2321.442885771543, 2324.6492985971945, 2327.8557114228456, 2331.0621242484967, 2334.2685370741483, 2337.4749498998, 2340.681362725451, 2343.887775551102, 2347.0941883767537, 2350.300601202405, 2353.507014028056, 2356.7134268537075, 2359.9198396793586, 2363.12625250501, 2366.3326653306613, 2369.539078156313, 2372.745490981964, 2375.951903807615, 2379.1583166332666, 2382.3647294589177, 2385.5711422845693, 2388.7775551102204, 2391.983967935872, 2395.190380761523, 2398.396793587174, 2401.603206412826, 2404.809619238477, 2408.016032064128, 2411.2224448897796, 2414.4288577154307, 2417.6352705410823, 2420.8416833667334, 2424.048096192385, 2427.254509018036, 2430.460921843687, 2433.6673346693387, 2436.87374749499, 2440.0801603206414, 2443.2865731462925, 2446.492985971944, 2449.699398797595, 2452.9058116232463, 2456.112224448898, 2459.318637274549, 2462.5250501002, 2465.7314629258517, 2468.9378757515033, 2472.1442885771544, 2475.3507014028055, 2478.557114228457, 2481.763527054108, 2484.9699398797593, 2488.176352705411, 2491.382765531062, 2494.5891783567135, 2497.7955911823647, 2501.0020040080162, 2504.2084168336673, 2507.4148296593185, 2510.62124248497, 2513.827655310621, 2517.0340681362727, 2520.240480961924, 2523.4468937875754, 2526.6533066132265, 2529.8597194388776, 2533.066132264529, 2536.2725450901803, 2539.4789579158314, 2542.685370741483, 2545.891783567134, 2549.0981963927857, 2552.304609218437, 2555.5110220440883, 2558.7174348697395, 2561.9238476953906, 2565.130260521042, 2568.3366733466933, 2571.543086172345, 2574.749498997996, 2577.9559118236475, 2581.1623246492986, 2584.3687374749497, 2587.5751503006013, 2590.7815631262524, 2593.9879759519035, 2597.194388777555, 2600.4008016032067, 2603.607214428858, 2606.813627254509, 2610.0200400801605, 2613.2264529058116, 2616.4328657314627, 2619.6392785571143, 2622.8456913827654, 2626.0521042084165, 2629.258517034068, 2632.4649298597196, 2635.6713426853707, 2638.877755511022, 2642.0841683366734, 2645.2905811623245, 2648.4969939879757, 2651.703406813627, 2654.909819639279, 2658.11623246493, 2661.322645290581, 2664.5290581162326, 2667.7354709418837, 2670.941883767535, 2674.1482965931864, 2677.354709418838, 2680.561122244489, 2683.76753507014, 2686.9739478957918, 2690.180360721443, 2693.386773547094, 2696.5931863727455, 2699.799599198397, 2703.006012024048, 2706.2124248496993, 2709.418837675351, 2712.625250501002, 2715.831663326653, 2719.0380761523047, 2722.244488977956, 2725.450901803607, 2728.6573146292585, 2731.86372745491, 2735.070140280561, 2738.2765531062123, 2741.482965931864, 2744.689378757515, 2747.895791583166, 2751.1022044088177, 2754.3086172344692, 2757.5150300601204, 2760.7214428857715, 2763.927855711423, 2767.134268537074, 2770.3406813627253, 2773.547094188377, 2776.753507014028, 2779.959919839679, 2783.1663326653306, 2786.372745490982, 2789.5791583166333, 2792.7855711422844, 2795.991983967936, 2799.198396793587, 2802.404809619238, 2805.61122244489, 2808.8176352705414, 2812.0240480961925, 2815.2304609218436, 2818.436873747495, 2821.6432865731463, 2824.8496993987974, 2828.056112224449, 2831.2625250501005, 2834.468937875751, 2837.6753507014027, 2840.8817635270543, 2844.0881763527054, 2847.2945891783565, 2850.501002004008, 2853.7074148296592, 2856.9138276553103, 2860.120240480962, 2863.3266533066135, 2866.5330661322646, 2869.7394789579157, 2872.9458917835673, 2876.1523046092184, 2879.3587174348695, 2882.565130260521, 2885.7715430861726, 2888.9779559118238, 2892.184368737475, 2895.3907815631264, 2898.5971943887776, 2901.8036072144287, 2905.0100200400802, 2908.216432865732, 2911.4228456913825, 2914.629258517034, 2917.8356713426856, 2921.0420841683367, 2924.248496993988, 2927.4549098196394, 2930.6613226452905, 2933.8677354709416, 2937.074148296593, 2940.2805611222448, 2943.486973947896, 2946.693386773547, 2949.8997995991986, 2953.1062124248497, 2956.312625250501, 2959.5190380761524, 2962.725450901804, 2965.9318637274546, 2969.138276553106, 2972.3446893787577, 2975.551102204409, 2978.75751503006, 2981.9639278557115, 2985.1703406813626, 2988.3767535070137, 2991.5831663326653, 2994.789579158317, 2997.995991983968, 3001.202404809619, 3004.4088176352707, 3007.615230460922, 3010.821643286573, 3014.0280561122245, 3017.234468937876, 3020.440881763527, 3023.6472945891783, 3026.85370741483, 3030.060120240481, 3033.266533066132, 3036.4729458917836, 3039.679358717435, 3042.885771543086, 3046.0921843687374, 3049.298597194389, 3052.50501002004, 3055.7114228456912, 3058.917835671343, 3062.124248496994, 3065.330661322645, 3068.5370741482966, 3071.743486973948, 3074.9498997995993, 3078.1563126252504, 3081.362725450902, 3084.569138276553, 3087.775551102204, 3090.9819639278558, 3094.1883767535073, 3097.394789579158, 3100.6012024048096, 3103.807615230461, 3107.0140280561122, 3110.2204408817634, 3113.426853707415, 3116.633266533066, 3119.839679358717, 3123.0460921843687, 3126.2525050100203, 3129.4589178356714, 3132.6653306613225, 3135.871743486974, 3139.078156312625, 3142.2845691382763, 3145.490981963928, 3148.6973947895794, 3151.9038076152306, 3155.1102204408817, 3158.3166332665332, 3161.5230460921844, 3164.7294589178355, 3167.935871743487, 3171.1422845691386, 3174.3486973947893, 3177.555110220441, 3180.7615230460924, 3183.9679358717435, 3187.1743486973946, 3190.380761523046, 3193.5871743486973, 3196.7935871743484, 3200.0])
              .range(['#08306bff', '#08306cff', '#08316dff', '#08316dff', '#08326eff', '#08326fff', '#083370ff', '#083371ff', '#083471ff', '#083472ff', '#083573ff', '#083574ff', '#083674ff', '#083675ff', '#083776ff', '#083777ff', '#083877ff', '#083878ff', '#083979ff', '#08397aff', '#083a7aff', '#083a7bff', '#083b7cff', '#083b7dff', '#083c7eff', '#083d7fff', '#083d80ff', '#083e81ff', '#083e81ff', '#083f82ff', '#084083ff', '#084184ff', '#084184ff', '#084285ff', '#084286ff', '#084387ff', '#084387ff', '#084488ff', '#084489ff', '#08458aff', '#08458aff', '#08468bff', '#08468cff', '#08478dff', '#08478eff', '#08488eff', '#08488fff', '#084990ff', '#084991ff', '#084a91ff', '#084a92ff', '#084b93ff', '#084b94ff', '#084c95ff', '#084c96ff', '#084d96ff', '#084d97ff', '#084e98ff', '#084e99ff', '#084f99ff', '#084f9aff', '#08509bff', '#08509cff', '#08519cff', '#08529dff', '#09529dff', '#09539eff', '#0a539eff', '#0a549eff', '#0a549eff', '#0a559fff', '#0b559fff', '#0b56a0ff', '#0c56a0ff', '#0c57a1ff', '#0d57a1ff', '#0d58a2ff', '#0e58a2ff', '#0e59a2ff', '#0e59a3ff', '#0e5aa3ff', '#0f5aa4ff', '#0f5ba4ff', '#105ba5ff', '#105ca5ff', '#115ca6ff', '#125da6ff', '#125da6ff', '#125ea6ff', '#125ea7ff', '#135fa7ff', '#135fa8ff', '#1460a8ff', '#1460a9ff', '#1561a9ff', '#1561a9ff', '#1562a9ff', '#1562aaff', '#1663aaff', '#1663abff', '#1764abff', '#1765acff', '#1865acff', '#1866adff', '#1966adff', '#1967adff', '#1967adff', '#1968aeff', '#1a68aeff', '#1a69afff', '#1b69afff', '#1b6ab0ff', '#1c6ab0ff', '#1c6bb0ff', '#1c6bb0ff', '#1c6cb1ff', '#1d6cb1ff', '#1d6db2ff', '#1e6db2ff', '#1e6eb3ff', '#1f6eb4ff', '#1f6fb4ff', '#206fb4ff', '#2070b4ff', '#2070b5ff', '#2171b5ff', '#2171b6ff', '#2272b6ff', '#2272b6ff', '#2373b6ff', '#2373b7ff', '#2474b7ff', '#2474b7ff', '#2575b7ff', '#2575b8ff', '#2676b8ff', '#2676b8ff', '#2777b8ff', '#2878b9ff', '#2979b9ff', '#297ab9ff', '#2a7ab9ff', '#2a7bbaff', '#2b7bbaff', '#2b7cbaff', '#2c7cbaff', '#2c7dbbff', '#2d7dbbff', '#2d7ebcff', '#2e7ebcff', '#2e7fbcff', '#2f7fbcff', '#2f80bdff', '#3080bdff', '#3081bdff', '#3181bdff', '#3182beff', '#3282beff', '#3283beff', '#3383beff', '#3384bfff', '#3484bfff', '#3485bfff', '#3585c0ff', '#3686c0ff', '#3686c0ff', '#3787c0ff', '#3787c1ff', '#3888c1ff', '#3888c1ff', '#3989c1ff', '#3989c2ff', '#3a8ac2ff', '#3a8ac2ff', '#3b8bc2ff', '#3b8bc3ff', '#3c8cc3ff', '#3c8dc4ff', '#3d8dc4ff', '#3d8ec4ff', '#3e8ec4ff', '#3e8fc5ff', '#3f8fc5ff', '#3f90c5ff', '#4090c5ff', '#4091c6ff', '#4191c6ff', '#4192c6ff', '#4292c6ff', '#4393c7ff', '#4493c7ff', '#4494c7ff', '#4594c7ff', '#4595c8ff', '#4695c8ff', '#4796c8ff', '#4896c8ff', '#4897c9ff', '#4997c9ff', '#4998c9ff', '#4a98c9ff', '#4b98caff', '#4b98caff', '#4c99caff', '#4d99cbff', '#4e9acbff', '#4e9acbff', '#4f9bcbff', '#4f9bccff', '#509cccff', '#519cccff', '#529dccff', '#529dcdff', '#539ecdff', '#539ecdff', '#549fcdff', '#55a0ceff', '#56a0ceff', '#56a0ceff', '#57a0ceff', '#57a1cfff', '#58a1cfff', '#59a2cfff', '#5aa2cfff', '#5aa3d0ff', '#5ba3d0ff', '#5ba4d0ff', '#5ca4d0ff', '#5ca5d1ff', '#5da5d1ff', '#5ea6d1ff', '#5fa6d1ff', '#5fa7d2ff', '#60a7d2ff', '#60a7d2ff', '#61a7d2ff', '#62a8d3ff', '#63a8d3ff', '#64a9d3ff', '#64a9d3ff', '#65aad4ff', '#65aad4ff', '#66abd4ff', '#66abd5ff', '#67acd5ff', '#68acd5ff', '#69add5ff', '#69add6ff', '#6aaed6ff', '#6aaed6ff', '#6baed6ff', '#6caed7ff', '#6dafd7ff', '#6eafd7ff', '#6fb0d7ff', '#70b1d7ff', '#71b1d7ff', '#71b2d8ff', '#72b2d8ff', '#73b3d8ff', '#74b3d8ff', '#74b4d8ff', '#75b4d8ff', '#76b5d9ff', '#77b5d9ff', '#78b5d9ff', '#79b5d9ff', '#79b6d9ff', '#7ab6d9ff', '#7bb7daff', '#7cb7daff', '#7cb8daff', '#7db8daff', '#7eb9daff', '#7fb9daff', '#80badbff', '#81badbff', '#82bbdbff', '#82bbdbff', '#83bcdbff', '#84bcdbff', '#85bcdcff', '#85bcdcff', '#86bddcff', '#87bddcff', '#88bedcff', '#89beddff', '#8abfddff', '#8abfddff', '#8bc0ddff', '#8cc0ddff', '#8dc1ddff', '#8dc1deff', '#8fc2deff', '#90c3deff', '#91c3deff', '#91c4deff', '#92c4deff', '#93c4dfff', '#94c4dfff', '#94c5dfff', '#95c5dfff', '#96c6dfff', '#97c6dfff', '#98c7e0ff', '#99c7e0ff', '#99c8e0ff', '#9ac8e0ff', '#9bc9e1ff', '#9cc9e1ff', '#9dcae1ff', '#9dcae1ff', '#9ecae1ff', '#9fcae1ff', '#a0cbe2ff', '#a0cbe2ff', '#a1cbe2ff', '#a1cbe2ff', '#a2cce3ff', '#a3cce3ff', '#a4cce3ff', '#a4cce3ff', '#a5cde3ff', '#a5cde3ff', '#a6cee4ff', '#a6cee4ff', '#a7cee4ff', '#a8cee4ff', '#a9cfe5ff', '#a9cfe5ff', '#aacfe5ff', '#aacfe6ff', '#abd0e6ff', '#acd0e6ff', '#add0e6ff', '#add1e7ff', '#aed1e7ff', '#aed1e7ff', '#afd1e7ff', '#afd2e7ff', '#b0d2e7ff', '#b1d2e8ff', '#b2d2e8ff', '#b2d3e8ff', '#b3d3e8ff', '#b4d3e9ff', '#b4d3e9ff', '#b5d4e9ff', '#b5d4e9ff', '#b6d4eaff', '#b7d4eaff', '#b8d5eaff', '#b8d5eaff', '#b9d6eaff', '#b9d6eaff', '#bad6ebff', '#bad6ebff', '#bbd7ebff', '#bcd7ebff', '#bdd7ecff', '#bdd7ecff', '#bed8ecff', '#bed8ecff', '#bfd8edff', '#bfd8edff', '#c0d9edff', '#c1d9edff', '#c2d9eeff', '#c2d9eeff', '#c3daeeff', '#c3daeeff', '#c4daeeff', '#c4daefff', '#c5dbefff', '#c6dbefff', '#c7dbefff', '#c7dcefff', '#c7dcefff', '#c7dcf0ff', '#c8dcf0ff', '#c8ddf0ff', '#c9ddf0ff', '#c9ddf0ff', '#caddf0ff', '#cadef0ff', '#cadef0ff', '#cbdef1ff', '#cbdef1ff', '#ccdff1ff', '#ccdff1ff', '#cddff1ff', '#cddff1ff', '#cde0f1ff', '#cde0f1ff', '#cee0f2ff', '#cee0f2ff', '#cfe1f2ff', '#cfe1f2ff', '#d0e1f2ff', '#d0e1f2ff', '#d0e2f2ff', '#d0e2f2ff', '#d1e2f3ff', '#d1e2f3ff', '#d2e3f3ff', '#d2e3f3ff', '#d3e3f3ff', '#d3e3f3ff', '#d3e4f3ff', '#d3e4f3ff', '#d4e4f4ff', '#d4e4f4ff', '#d5e5f4ff', '#d5e5f4ff', '#d6e5f4ff', '#d6e5f4ff', '#d6e6f4ff', '#d6e6f5ff', '#d7e6f5ff', '#d7e7f5ff', '#d8e7f5ff', '#d8e7f5ff', '#d9e7f5ff', '#d9e8f5ff', '#d9e8f5ff', '#dae8f6ff', '#dae8f6ff', '#dbe9f6ff', '#dbe9f6ff', '#dce9f6ff', '#dce9f6ff', '#dceaf6ff', '#dceaf6ff', '#ddeaf7ff', '#ddeaf7ff', '#deebf7ff', '#deebf7ff', '#dfebf7ff', '#dfebf7ff', '#dfecf7ff', '#dfecf7ff', '#e0ecf8ff', '#e0ecf8ff', '#e1edf8ff', '#e1edf8ff', '#e2edf8ff', '#e2edf8ff', '#e3eef8ff', '#e3eef8ff', '#e3eef9ff', '#e3eef9ff', '#e4eff9ff', '#e4eff9ff', '#e5eff9ff', '#e5eff9ff', '#e6f0f9ff', '#e6f0faff', '#e7f0faff', '#e7f0faff', '#e7f1faff', '#e7f1faff', '#e8f1faff', '#e9f2faff', '#e9f2faff', '#eaf2fbff', '#eaf2fbff', '#eaf3fbff', '#eaf3fbff', '#ebf3fbff', '#ebf3fbff', '#ecf4fbff', '#ecf4fbff', '#edf4fcff', '#edf4fcff', '#eef5fcff', '#eef5fcff', '#eef5fcff', '#eef5fcff', '#eff6fcff', '#eff6fcff', '#f0f6fdff', '#f0f6fdff', '#f1f7fdff', '#f1f7fdff', '#f2f7fdff', '#f2f7fdff', '#f2f8fdff', '#f2f8fdff', '#f3f8feff', '#f3f8feff', '#f4f9feff', '#f4f9feff', '#f5f9feff', '#f5f9feff', '#f5fafeff', '#f5fafeff', '#f6faffff', '#f6faffff', '#f7fbffff', '#f7fbffff']);
    

    color_map_8a7ef2888aceabb9e50a62439f81dc7e.x = d3.scale.linear()
              .domain([1600.0, 3200.0])
              .range([0, 450 - 50]);

    color_map_8a7ef2888aceabb9e50a62439f81dc7e.legend = L.control({position: 'topright'});
    color_map_8a7ef2888aceabb9e50a62439f81dc7e.legend.onAdd = function (map) {var div = L.DomUtil.create('div', 'legend'); return div};
    color_map_8a7ef2888aceabb9e50a62439f81dc7e.legend.addTo(map_961d857400d6eef73664d0fc177d77b1);

    color_map_8a7ef2888aceabb9e50a62439f81dc7e.xAxis = d3.svg.axis()
        .scale(color_map_8a7ef2888aceabb9e50a62439f81dc7e.x)
        .orient(&quot;top&quot;)
        .tickSize(1)
        .tickValues([1600.0, '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', 1763.1372549019607, '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', 1926.2745098039215, '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', 2089.4117647058824, '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', 2252.549019607843, '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', 2415.6862745098038, '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', 2578.823529411765, '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', 2741.9607843137255, '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', 2905.098039215686, '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', 3068.235294117647, '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']);

    color_map_8a7ef2888aceabb9e50a62439f81dc7e.svg = d3.select(&quot;.legend.leaflet-control&quot;).append(&quot;svg&quot;)
        .attr(&quot;id&quot;, 'legend')
        .attr(&quot;width&quot;, 450)
        .attr(&quot;height&quot;, 40);

    color_map_8a7ef2888aceabb9e50a62439f81dc7e.g = color_map_8a7ef2888aceabb9e50a62439f81dc7e.svg.append(&quot;g&quot;)
        .attr(&quot;class&quot;, &quot;key&quot;)
        .attr(&quot;transform&quot;, &quot;translate(25,16)&quot;);

    color_map_8a7ef2888aceabb9e50a62439f81dc7e.g.selectAll(&quot;rect&quot;)
        .data(color_map_8a7ef2888aceabb9e50a62439f81dc7e.color.range().map(function(d, i) {
          return {
            x0: i ? color_map_8a7ef2888aceabb9e50a62439f81dc7e.x(color_map_8a7ef2888aceabb9e50a62439f81dc7e.color.domain()[i - 1]) : color_map_8a7ef2888aceabb9e50a62439f81dc7e.x.range()[0],
            x1: i < color_map_8a7ef2888aceabb9e50a62439f81dc7e.color.domain().length ? color_map_8a7ef2888aceabb9e50a62439f81dc7e.x(color_map_8a7ef2888aceabb9e50a62439f81dc7e.color.domain()[i]) : color_map_8a7ef2888aceabb9e50a62439f81dc7e.x.range()[1],
            z: d
          };
        }))
      .enter().append(&quot;rect&quot;)
        .attr(&quot;height&quot;, 40 - 30)
        .attr(&quot;x&quot;, function(d) { return d.x0; })
        .attr(&quot;width&quot;, function(d) { return d.x1 - d.x0; })
        .style(&quot;fill&quot;, function(d) { return d.z; });

    color_map_8a7ef2888aceabb9e50a62439f81dc7e.g.call(color_map_8a7ef2888aceabb9e50a62439f81dc7e.xAxis).append(&quot;text&quot;)
        .attr(&quot;class&quot;, &quot;caption&quot;)
        .attr(&quot;y&quot;, 21)
        .text(&quot;distance&quot;);
</script>
</html>" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen=""></iframe></div></div>
</div>
</div>
<p>In this example it’s easy to see how the road network topology makes it easier to travel in some directions more than others. Greenspace squeezes the western portion of the 1600m (20 min) isochrone into a horizontal pattern along Calle del Cerro, but the 2400m (30 minute) isochrone opens north-south tavel again along Avienda Pico, providing access to two other pockets of development, including San Clemente High School</p>
<p>We can also compare the network-based isochrone to the as-the-crow-flies approximation given by a euclidean buffer. If we didn’t have access to network data, this would be our best estimate of the shape and extent of the 20-minute neighborhood.</p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:27.239988Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:27.239897Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:27.485447Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:27.485168Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:27.239978Z&quot;}" data-tags="[]" data-execution_count="17">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>sd_network.nodes_df[<span class="st">'geometry'</span>] <span class="op">=</span> gpd.points_from_xy(sd_network.nodes_df.x, sd_network.nodes_df.y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:27.486107Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:27.486015Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:27.566618Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:27.566335Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:27.486098Z&quot;}" data-tags="[]" data-execution_count="18">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># convert the node into a Point and buffer it 1600m</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>example_point <span class="op">=</span> gpd.GeoDataFrame(sd_network.nodes_df.loc[example_origin]).T.set_geometry(<span class="st">'geometry'</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>example_point <span class="op">=</span> example_point.set_crs(<span class="dv">4326</span>)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>planar_iso <span class="op">=</span> example_point.to_crs(example_point.estimate_utm_crs()).<span class="bu">buffer</span>(<span class="dv">1600</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:27.567125Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:27.567055Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:27.604702Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:27.604305Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:27.567117Z&quot;}" data-tags="[]" data-execution_count="19">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot the buffer and isochrone on the same map</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> planar_iso.to_crs(<span class="dv">4326</span>).explore()</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>iso.explore(m<span class="op">=</span>m)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="19">

<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -&gt; Trust Notebook</span><iframe srcdoc="<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;></script>
    <script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;></script>
    <script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;></script>
    <script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;></script>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/>
    
            <meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; />
            <style>
                #map_5117523b0bc34f13c3ae91106b02bfa6 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>
        
    
                    <style>
                        .foliumtooltip {
                            
                        }
                       .foliumtooltip table{
                            margin: auto;
                        }
                        .foliumtooltip tr{
                            text-align: left;
                        }
                        .foliumtooltip th{
                            padding: 2px; padding-right: 8px;
                        }
                    </style>
            
</head>
<body>
    
    
            <div class=&quot;folium-map&quot; id=&quot;map_5117523b0bc34f13c3ae91106b02bfa6&quot; ></div>
        
</body>
<script>
    
    
            var map_5117523b0bc34f13c3ae91106b02bfa6 = L.map(
                &quot;map_5117523b0bc34f13c3ae91106b02bfa6&quot;,
                {
                    center: [33.4398802830519, -117.6009877645547],
                    crs: L.CRS.EPSG3857,
                    zoom: 10,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );
            L.control.scale().addTo(map_5117523b0bc34f13c3ae91106b02bfa6);

            

        
    
            var tile_layer_de6b50fc71d3a86c1f9e898e2c3a5649 = L.tileLayer(
                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,
                {&quot;attribution&quot;: &quot;\u0026copy; \u003ca href=\&quot;https://www.openstreetmap.org/copyright\&quot;\u003eOpenStreetMap\u003c/a\u003e contributors&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 19, &quot;maxZoom&quot;: 19, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            );
        
    
            tile_layer_de6b50fc71d3a86c1f9e898e2c3a5649.addTo(map_5117523b0bc34f13c3ae91106b02bfa6);
        
    
            map_5117523b0bc34f13c3ae91106b02bfa6.fitBounds(
                [[33.42544949614595, -117.61820045648814], [33.454311069957846, -117.58377507262128]],
                {}
            );
        
    
        function geo_json_f6b02e2565d4f475f978cf431afc14bd_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};
            }
        }
        function geo_json_f6b02e2565d4f475f978cf431afc14bd_highlighter(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0.75};
            }
        }
        function geo_json_f6b02e2565d4f475f978cf431afc14bd_pointToLayer(feature, latlng) {
            var opts = {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;opacity&quot;: 1.0, &quot;radius&quot;: 2, &quot;stroke&quot;: true, &quot;weight&quot;: 3};
            
            let style = geo_json_f6b02e2565d4f475f978cf431afc14bd_styler(feature)
            Object.assign(opts, style)
            
            return new L.CircleMarker(latlng, opts)
        }

        function geo_json_f6b02e2565d4f475f978cf431afc14bd_onEachFeature(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        geo_json_f6b02e2565d4f475f978cf431afc14bd.resetStyle(e.target);
                    }
                },
                mouseover: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        const highlightStyle = geo_json_f6b02e2565d4f475f978cf431afc14bd_highlighter(e.target.feature)
                        e.target.setStyle(highlightStyle);
                    }
                },
            });
        };
        var geo_json_f6b02e2565d4f475f978cf431afc14bd = L.geoJson(null, {
                onEachFeature: geo_json_f6b02e2565d4f475f978cf431afc14bd_onEachFeature,
            
                style: geo_json_f6b02e2565d4f475f978cf431afc14bd_styler,
                pointToLayer: geo_json_f6b02e2565d4f475f978cf431afc14bd_pointToLayer,
        });

        function geo_json_f6b02e2565d4f475f978cf431afc14bd_add (data) {
            geo_json_f6b02e2565d4f475f978cf431afc14bd
                .addData(data);
        }
            geo_json_f6b02e2565d4f475f978cf431afc14bd_add({&quot;bbox&quot;: [-117.61820045648814, 33.42544949614595, -117.58377507262128, 33.454311069957846], &quot;features&quot;: [{&quot;bbox&quot;: [-117.61820045648814, 33.42544949614595, -117.58377507262128, 33.454311069957846], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.58377507262128, 33.43996252158166], [-117.58384848266682, 33.43854766238966], [-117.58408694667975, 33.4371456481466], [-117.58448816036987, 33.4357699801706], [-117.58504825264757, 33.43443390543985], [-117.58576182318032, 33.433150289073055], [-117.58662199464425, 33.43193149050862], [-117.58762047915765, 33.43078924457229], [-117.58874765824989, 33.42973454857462], [-117.58999267558886, 33.42877755652162], [-117.59134354157081, 33.42792748145245], [-117.59278724876384, 33.42719250684034], [-117.59430989709385, 33.4265797079045], [-117.59589682757095, 33.42609498358658], [-117.59753276327363, 33.425742999842235], [-117.59920195624004, 33.425527144789946], [-117.60088833886094, 33.42544949614595], [-117.60257567832682, 33.425510801256344], [-117.60424773265231, 33.4257104699171], [-117.60588840678784, 33.42604658005046], [-117.60748190732627, 33.42651589618343], [-117.60901289432636, 33.427113900551426], [-117.61046662880128, 33.427834836529875], [-117.61182911446141, 33.42867176397838], [-117.61308723235355, 33.429616625968016], [-117.61422886710652, 33.430660326253495], [-117.61524302357039, 33.43179281674858], [-117.61611993272787, 33.433003194167256], [-117.61685114585714, 33.434279804904776], [-117.61742961603588, 33.43561035715332], [-117.61784976619644, 33.43698203917687], [-117.61810754306957, 33.43838164261021], [-117.61820045648814, 33.43979568959801], [-117.61812760366199, 33.441210562551774], [-117.61788967817907, 33.44261263527694], [-117.61748896363426, 33.44398840420796], [-117.61692931193525, 33.44532461848697], [-117.61621610648335, 33.446608407632574], [-117.61535621057268, 33.4478274055665], [-117.6143579014955, 33.4489698698014], [-117.61323079098052, 33.45002479463759], [-117.6119857327245, 33.45098201727498], [-117.61063471790358, 33.45183231581311], [-117.6091907596695, 33.45256749819102], [-117.60766776774366, 33.45318048120515], [-117.60608041432013, 33.45366535883981], [-117.60444399257409, 33.454017459247495], [-117.60277426914578, 33.454233389826406], [-117.60108733202969, 33.454311069957846], [-117.59939943534435, 33.454249751085705], [-117.59772684248874, 33.45405002394285], [-117.59608566920784, 33.45371381285444], [-117.5944917280907, 33.45324435717317], [-117.59296037600977, 33.45264618002636], [-117.59150636598163, 33.451925044678376], [-117.59014370488539, 33.451087898931284], [-117.58888551841605, 33.45014280810311], [-117.58774392458022, 33.44909887723328], [-117.58672991695539, 33.447966163269214], [-117.58585325883904, 33.44675557808478], [-117.58512238930561, 33.445478783268996], [-117.58454434207326, 33.44414807770373], [-117.584124677956, 33.44277627901687], [-117.58386743154475, 33.44137660005691], [-117.58377507262128, 33.43996252158166]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;1985327805&quot;, &quot;properties&quot;: {}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_f6b02e2565d4f475f978cf431afc14bd.addTo(map_5117523b0bc34f13c3ae91106b02bfa6);
        
    
        function geo_json_8e848424344e95fbe2ea047f59a0461f_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};
            }
        }
        function geo_json_8e848424344e95fbe2ea047f59a0461f_highlighter(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0.75};
            }
        }
        function geo_json_8e848424344e95fbe2ea047f59a0461f_pointToLayer(feature, latlng) {
            var opts = {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;opacity&quot;: 1.0, &quot;radius&quot;: 2, &quot;stroke&quot;: true, &quot;weight&quot;: 3};
            
            let style = geo_json_8e848424344e95fbe2ea047f59a0461f_styler(feature)
            Object.assign(opts, style)
            
            return new L.CircleMarker(latlng, opts)
        }

        function geo_json_8e848424344e95fbe2ea047f59a0461f_onEachFeature(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        geo_json_8e848424344e95fbe2ea047f59a0461f.resetStyle(e.target);
                    }
                },
                mouseover: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        const highlightStyle = geo_json_8e848424344e95fbe2ea047f59a0461f_highlighter(e.target.feature)
                        e.target.setStyle(highlightStyle);
                    }
                },
            });
        };
        var geo_json_8e848424344e95fbe2ea047f59a0461f = L.geoJson(null, {
                onEachFeature: geo_json_8e848424344e95fbe2ea047f59a0461f_onEachFeature,
            
                style: geo_json_8e848424344e95fbe2ea047f59a0461f_styler,
                pointToLayer: geo_json_8e848424344e95fbe2ea047f59a0461f_pointToLayer,
        });

        function geo_json_8e848424344e95fbe2ea047f59a0461f_add (data) {
            geo_json_8e848424344e95fbe2ea047f59a0461f
                .addData(data);
        }
            geo_json_8e848424344e95fbe2ea047f59a0461f_add({&quot;bbox&quot;: [-117.6149627, 33.4352644, -117.589268, 33.4480176], &quot;features&quot;: [{&quot;bbox&quot;: [-117.6149627, 33.4352644, -117.589268, 33.4480176], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.5922923, 33.4440509], [-117.5902135, 33.443599], [-117.589268, 33.4412214], [-117.5911919, 33.4369492], [-117.5911683, 33.4356881], [-117.5920085, 33.4353402], [-117.5928484, 33.4352644], [-117.5947469, 33.4363226], [-117.5974836, 33.4376435], [-117.5978631, 33.4377787], [-117.5991264, 33.438542], [-117.5994683, 33.4388998], [-117.6019739, 33.4401361], [-117.602542, 33.440207], [-117.6063877, 33.4417727], [-117.6088133, 33.4426619], [-117.6143231, 33.4425595], [-117.6148579, 33.4429227], [-117.6149627, 33.4433759], [-117.6147933, 33.4435268], [-117.6143171, 33.4439418], [-117.6136147, 33.4445241], [-117.6130065, 33.4450274], [-117.6067391, 33.443218], [-117.6060505, 33.4435429], [-117.6047276, 33.4444191], [-117.6023689, 33.4480176], [-117.6007767, 33.4473405], [-117.600112, 33.4467148], [-117.5976987, 33.445126], [-117.5976053, 33.4450649], [-117.5934028, 33.4445491], [-117.5922923, 33.4440509]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
    geo_json_8e848424344e95fbe2ea047f59a0461f.bindTooltip(
    function(layer){
    let div = L.DomUtil.create('div');
    
    let handleObject = feature=>typeof(feature)=='object' ? JSON.stringify(feature) : feature;
    let fields = [&quot;distance&quot;];
    let aliases = [&quot;distance&quot;];
    let table = '<table>' +
        String(
        fields.map(
        (v,i)=>
        `<tr>
            <th>${aliases[i]}</th>
            
            <td>${handleObject(layer.feature.properties[v])}</td>
        </tr>`).join(''))
    +'</table>';
    div.innerHTML=table;
    
    return div
    }
    ,{&quot;className&quot;: &quot;foliumtooltip&quot;, &quot;sticky&quot;: true});
                     
    
            geo_json_8e848424344e95fbe2ea047f59a0461f.addTo(map_5117523b0bc34f13c3ae91106b02bfa6);
        
</script>
</html>" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen=""></iframe></div></div>
</div>
</div>
<p>Obviously from this depiction, network-constrained travel is very different from a euclidean approximation. That’s especially true in places with irregular networks or topography considerations (like much of California)</p>
</section>
<section id="isochrones-for-specified-locations" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="isochrones-for-specified-locations"><span class="header-section-number">8.2</span> Isochrones for Specified Locations</h2>
<p>the <code>isochrones</code> function calculates several isochrones simultaneously, given a set of input destinations. For example we could look at the 20-minute neighborhood for schools in San Diego county.</p>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:27.605262Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:27.605170Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:27.631941Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:27.631368Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:27.605253Z&quot;}" data-tags="[]" data-execution_count="20">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> geosnap.io <span class="im">import</span> get_nces</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:27.632537Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:27.632434Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:30.709806Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:30.709524Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:27.632529Z&quot;}" data-tags="[]" data-execution_count="21">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># same as county fips 06073 in this case, but use metro fips for consistency with network</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>sd <span class="op">=</span> get_acs(datasets, msa_fips<span class="op">=</span><span class="st">'41740'</span>, level<span class="op">=</span><span class="st">'bg'</span>, years<span class="op">=</span>[<span class="dv">2019</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:30.714414Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:30.714228Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:30.990979Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:30.990489Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:30.714380Z&quot;}" data-tags="[]" data-execution_count="22">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>sd.plot()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>&lt;Axes: &gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="isochrone_example_files/figure-html/cell-25-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:30.991667Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:30.991565Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:31.147848Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:31.147584Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:30.991658Z&quot;}" data-tags="[]" data-execution_count="23">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>schools <span class="op">=</span> get_nces(datasets, dataset<span class="op">=</span><span class="st">'schools'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:31.148387Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:31.148300Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:31.776667Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:31.776322Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:31.148377Z&quot;}" data-tags="[]" data-execution_count="24">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>sd_schools <span class="op">=</span> schools[schools.to_crs(sd.crs).intersects(sd.unary_union)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:31.777199Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:31.777108Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:31.807907Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:31.807501Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:31.777189Z&quot;}" data-tags="[]" data-execution_count="25">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>sd_schools.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="25">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">NCESSCH</th>
<th data-quarto-table-cell-role="th">NAME</th>
<th data-quarto-table-cell-role="th">OPSTFIPS</th>
<th data-quarto-table-cell-role="th">LSTREE</th>
<th data-quarto-table-cell-role="th">LCITY</th>
<th data-quarto-table-cell-role="th">LSTATE</th>
<th data-quarto-table-cell-role="th">LZIP</th>
<th data-quarto-table-cell-role="th">LZIP4</th>
<th data-quarto-table-cell-role="th">STFIP15</th>
<th data-quarto-table-cell-role="th">CNTY15</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">CBSATYPE15</th>
<th data-quarto-table-cell-role="th">CSA15</th>
<th data-quarto-table-cell-role="th">NMCSA15</th>
<th data-quarto-table-cell-role="th">NECTA15</th>
<th data-quarto-table-cell-role="th">NMNECTA15</th>
<th data-quarto-table-cell-role="th">CD15</th>
<th data-quarto-table-cell-role="th">SLDL15</th>
<th data-quarto-table-cell-role="th">SLDU15</th>
<th data-quarto-table-cell-role="th">geometry</th>
<th data-quarto-table-cell-role="th">year</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">5895</td>
<td>060004205341</td>
<td>Warner Junior/Senior High</td>
<td>06</td>
<td>30951 Highway 79</td>
<td>Warner Springs</td>
<td>CA</td>
<td>92086</td>
<td>M</td>
<td>06</td>
<td>06073</td>
<td>...</td>
<td>1</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>0650</td>
<td>071</td>
<td>038</td>
<td>POINT (-116.64292 33.27525)</td>
<td>1516</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5896</td>
<td>060004206527</td>
<td>San Jose Valley Continuation Hig</td>
<td>06</td>
<td>30951 Highway 79</td>
<td>Warner Springs</td>
<td>CA</td>
<td>92086</td>
<td>M</td>
<td>06</td>
<td>06073</td>
<td>...</td>
<td>1</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>0650</td>
<td>071</td>
<td>038</td>
<td>POINT (-116.64292 33.27525)</td>
<td>1516</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5897</td>
<td>060004206844</td>
<td>Warner Elementary</td>
<td>06</td>
<td>30951 Highway 79</td>
<td>Warner Springs</td>
<td>CA</td>
<td>92086</td>
<td>0008</td>
<td>06</td>
<td>06073</td>
<td>...</td>
<td>1</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>0650</td>
<td>071</td>
<td>038</td>
<td>POINT (-116.64292 33.27525)</td>
<td>1516</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5898</td>
<td>060004210387</td>
<td>All Tribes Charter</td>
<td>06</td>
<td>34320 Valley Center Rd.</td>
<td>Valley Center</td>
<td>CA</td>
<td>92082</td>
<td>6046</td>
<td>06</td>
<td>06073</td>
<td>...</td>
<td>1</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>0650</td>
<td>075</td>
<td>038</td>
<td>POINT (-116.95367 33.27796)</td>
<td>1516</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5899</td>
<td>060004212735</td>
<td>All Tribes Elementary Charter</td>
<td>06</td>
<td>34320 Valley Center Rd.</td>
<td>Valley Center</td>
<td>CA</td>
<td>92082</td>
<td>6046</td>
<td>06</td>
<td>06073</td>
<td>...</td>
<td>1</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>0650</td>
<td>075</td>
<td>038</td>
<td>POINT (-116.95367 33.27796)</td>
<td>1516</td>
</tr>
</tbody>
</table>

<p>5 rows × 26 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:31.808676Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:31.808586Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:31.926102Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:31.925681Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:31.808667Z&quot;}" data-tags="[]" data-execution_count="26">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>sd_schools.plot()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>&lt;Axes: &gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="isochrone_example_files/figure-html/cell-29-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:31.926715Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:31.926604Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:36.325602Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:36.325314Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:31.926706Z&quot;}" data-tags="[]" data-execution_count="27">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># randomly sample 25 schools and compute their walksheds</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>school_neighborhoods <span class="op">=</span> isochrones_from_gdf(origins<span class="op">=</span>sd_schools.sample(<span class="dv">25</span>), network<span class="op">=</span>sd_network, threshold<span class="op">=</span><span class="dv">1600</span>,)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/knaaptime/Dropbox/projects/geosnap/geosnap/analyze/network.py:140: UserWarning: Geometry is in a geographic CRS. Results from 'centroid' are likely incorrect. Use 'GeoSeries.to_crs()' to re-project geometries to a projected CRS before this operation.

  node_ids = network.get_node_ids(origins.centroid.x, origins.centroid.y).astype(int)
/Users/knaaptime/Dropbox/projects/geosnap/geosnap/analyze/network.py:34: UserWarning: Geometry is in a geographic CRS. Results from 'centroid' are likely incorrect. Use 'GeoSeries.to_crs()' to re-project geometries to a projected CRS before this operation.

  node_ids = network.get_node_ids(origins.centroid.x, origins.centroid.y).astype(int)</code></pre>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:36.326214Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:36.326123Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:36.355195Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:36.354895Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:36.326205Z&quot;}" data-tags="[]" data-execution_count="28">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>school_neighborhoods</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="28">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">geometry</th>
<th data-quarto-table-cell-role="th">distance</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">origin</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">13662</td>
<td>POLYGON ((-117.14646 32.71848, -117.14598 32.7...</td>
<td>1600</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13745</td>
<td>POLYGON ((-117.15657 32.72294, -117.15569 32.7...</td>
<td>1600</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6045</td>
<td>POLYGON ((-117.02136 33.27643, -117.02352 33.2...</td>
<td>1600</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">14426</td>
<td>POLYGON ((-117.00264 32.84421, -117.00343 32.8...</td>
<td>1600</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14132</td>
<td>POLYGON ((-117.16720 33.13873, -117.16856 33.1...</td>
<td>1600</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13672</td>
<td>POLYGON ((-117.17622 32.76935, -117.17913 32.7...</td>
<td>1600</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9634</td>
<td>POLYGON ((-117.01525 32.71985, -117.01392 32.7...</td>
<td>1600</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11677</td>
<td>POLYGON ((-116.19684 32.61392, -116.19287 32.6...</td>
<td>1600</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5895</td>
<td>POLYGON ((-116.64411 33.27421, -116.64491 33.2...</td>
<td>1600</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">14651</td>
<td>POLYGON ((-117.11173 32.58916, -117.10999 32.5...</td>
<td>1600</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13639</td>
<td>POLYGON ((-117.10254 32.91271, -117.10192 32.9...</td>
<td>1600</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7204</td>
<td>POLYGON ((-116.91462 32.79367, -116.91456 32.7...</td>
<td>1600</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9129</td>
<td>POLYGON ((-116.93932 32.79346, -116.94135 32.7...</td>
<td>1600</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13604</td>
<td>POLYGON ((-117.18463 32.83899, -117.18164 32.8...</td>
<td>1600</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">15758</td>
<td>POLYGON ((-117.17343 32.71976, -117.17318 32.7...</td>
<td>1600</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8558</td>
<td>POLYGON ((-117.25935 33.37671, -117.25949 33.3...</td>
<td>1600</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8426</td>
<td>POLYGON ((-117.03368 33.13773, -117.03259 33.1...</td>
<td>1600</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7623</td>
<td>POLYGON ((-117.00010 32.62969, -116.99944 32.6...</td>
<td>1600</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13560</td>
<td>POLYGON ((-117.09858 32.68953, -117.09757 32.6...</td>
<td>1600</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">14655</td>
<td>POLYGON ((-117.11923 32.56924, -117.11969 32.5...</td>
<td>1600</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12859</td>
<td>POLYGON ((-117.06596 32.98104, -117.06585 32.9...</td>
<td>1600</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">14847</td>
<td>POLYGON ((-117.06425 32.61504, -117.06297 32.6...</td>
<td>1600</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13561</td>
<td>POLYGON ((-117.21433 32.80365, -117.21415 32.8...</td>
<td>1600</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13632</td>
<td>POLYGON ((-117.08379 32.74163, -117.08414 32.7...</td>
<td>1600</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13550</td>
<td>POLYGON ((-117.09290 32.83455, -117.09509 32.8...</td>
<td>1600</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution="{&quot;iopub.execute_input&quot;:&quot;2024-01-23T19:50:36.355780Z&quot;,&quot;iopub.status.busy&quot;:&quot;2024-01-23T19:50:36.355695Z&quot;,&quot;iopub.status.idle&quot;:&quot;2024-01-23T19:50:36.394973Z&quot;,&quot;shell.execute_reply&quot;:&quot;2024-01-23T19:50:36.394527Z&quot;,&quot;shell.execute_reply.started&quot;:&quot;2024-01-23T19:50:36.355770Z&quot;}" data-tags="[]" data-execution_count="29">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>school_neighborhoods.explore()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="29">

<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -&gt; Trust Notebook</span><iframe srcdoc="<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;></script>
    <script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;></script>
    <script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;></script>
    <script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;></script>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/>
    
            <meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; />
            <style>
                #map_106844c9aa728f91d91523b07a5c0db4 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>
        
    
                    <style>
                        .foliumtooltip {
                            
                        }
                       .foliumtooltip table{
                            margin: auto;
                        }
                        .foliumtooltip tr{
                            text-align: left;
                        }
                        .foliumtooltip th{
                            padding: 2px; padding-right: 8px;
                        }
                    </style>
            
</head>
<body>
    
    
            <div class=&quot;folium-map&quot; id=&quot;map_106844c9aa728f91d91523b07a5c0db4&quot; ></div>
        
</body>
<script>
    
    
            var map_106844c9aa728f91d91523b07a5c0db4 = L.map(
                &quot;map_106844c9aa728f91d91523b07a5c0db4&quot;,
                {
                    center: [32.97978325, -116.72288499999999],
                    crs: L.CRS.EPSG3857,
                    zoom: 10,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );
            L.control.scale().addTo(map_106844c9aa728f91d91523b07a5c0db4);

            

        
    
            var tile_layer_b027f8eeabfb21b5a06a3ca596f76329 = L.tileLayer(
                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,
                {&quot;attribution&quot;: &quot;\u0026copy; \u003ca href=\&quot;https://www.openstreetmap.org/copyright\&quot;\u003eOpenStreetMap\u003c/a\u003e contributors&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 19, &quot;maxZoom&quot;: 19, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            );
        
    
            tile_layer_b027f8eeabfb21b5a06a3ca596f76329.addTo(map_106844c9aa728f91d91523b07a5c0db4);
        
    
            map_106844c9aa728f91d91523b07a5c0db4.fitBounds(
                [[32.5692395, -117.262733], [33.390327, -116.183037]],
                {}
            );
        
    
        function geo_json_71bfc51a2c81c8d661c55265c2abf6c0_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};
            }
        }
        function geo_json_71bfc51a2c81c8d661c55265c2abf6c0_highlighter(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0.75};
            }
        }
        function geo_json_71bfc51a2c81c8d661c55265c2abf6c0_pointToLayer(feature, latlng) {
            var opts = {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;opacity&quot;: 1.0, &quot;radius&quot;: 2, &quot;stroke&quot;: true, &quot;weight&quot;: 3};
            
            let style = geo_json_71bfc51a2c81c8d661c55265c2abf6c0_styler(feature)
            Object.assign(opts, style)
            
            return new L.CircleMarker(latlng, opts)
        }

        function geo_json_71bfc51a2c81c8d661c55265c2abf6c0_onEachFeature(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        geo_json_71bfc51a2c81c8d661c55265c2abf6c0.resetStyle(e.target);
                    }
                },
                mouseover: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        const highlightStyle = geo_json_71bfc51a2c81c8d661c55265c2abf6c0_highlighter(e.target.feature)
                        e.target.setStyle(highlightStyle);
                    }
                },
            });
        };
        var geo_json_71bfc51a2c81c8d661c55265c2abf6c0 = L.geoJson(null, {
                onEachFeature: geo_json_71bfc51a2c81c8d661c55265c2abf6c0_onEachFeature,
            
                style: geo_json_71bfc51a2c81c8d661c55265c2abf6c0_styler,
                pointToLayer: geo_json_71bfc51a2c81c8d661c55265c2abf6c0_pointToLayer,
        });

        function geo_json_71bfc51a2c81c8d661c55265c2abf6c0_add (data) {
            geo_json_71bfc51a2c81c8d661c55265c2abf6c0
                .addData(data);
        }
            geo_json_71bfc51a2c81c8d661c55265c2abf6c0_add({&quot;bbox&quot;: [-117.262733, 32.5692395, -116.183037, 33.390327], &quot;features&quot;: [{&quot;bbox&quot;: [-117.1583107, 32.6979398, -117.1269112, 32.7205685], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.1464591, 32.7184803], [-117.1459845, 32.7192578], [-117.145627, 32.7194207], [-117.1446861, 32.7202969], [-117.1438766, 32.7205685], [-117.1438466, 32.7205463], [-117.1437944, 32.7205059], [-117.1437278, 32.7204543], [-117.1424793, 32.7195432], [-117.1407107, 32.719836], [-117.139381, 32.720432], [-117.1378455, 32.7199036], [-117.1375906, 32.7199074], [-117.1369338, 32.7194338], [-117.1360684, 32.718442], [-117.136063, 32.717915], [-117.133797, 32.7168882], [-117.13319, 32.7163634], [-117.131737, 32.714794], [-117.1296841, 32.7140016], [-117.1295658, 32.7133111], [-117.1283367, 32.7122089], [-117.127434, 32.711658], [-117.1269112, 32.7106006], [-117.127411, 32.709557], [-117.1274035, 32.7090424], [-117.127403, 32.7085], [-117.127403, 32.707974], [-117.1291875, 32.7064026], [-117.1295353, 32.7063998], [-117.1299098, 32.7063979], [-117.1299479, 32.7063977], [-117.1317906, 32.7048358], [-117.1317363, 32.7042945], [-117.1317083, 32.7037882], [-117.131706, 32.703251], [-117.1321165, 32.7011666], [-117.1338368, 32.6997438], [-117.1338267, 32.6990034], [-117.1356691, 32.698913], [-117.1377551, 32.6995416], [-117.1381389, 32.6992524], [-117.138513, 32.698872], [-117.1385564, 32.6988254], [-117.140984, 32.699177], [-117.1413493, 32.6987814], [-117.141762, 32.698368], [-117.1422794, 32.6987288], [-117.1438906, 32.6984965], [-117.1442257, 32.6981397], [-117.1459408, 32.6985607], [-117.1474823, 32.6982145], [-117.1477425, 32.6979398], [-117.1479224, 32.6985199], [-117.1479192, 32.7006091], [-117.149963, 32.701363], [-117.1514615, 32.7027623], [-117.1523326, 32.7043546], [-117.1533972, 32.7053079], [-117.1537481, 32.705346], [-117.1548485, 32.7055959], [-117.1551139, 32.7055935], [-117.1554665, 32.7062584], [-117.1554732, 32.7069513], [-117.1566144, 32.7088401], [-117.1583107, 32.7104282], [-117.1580583, 32.7107871], [-117.1576392, 32.7111359], [-117.1570852, 32.711508], [-117.155593, 32.7125906], [-117.154678, 32.71365], [-117.1530943, 32.7149068], [-117.1528636, 32.7153233], [-117.1519601, 32.715744], [-117.1504209, 32.7167995], [-117.1494939, 32.717857], [-117.148614, 32.7186663], [-117.1482741, 32.718415], [-117.1464591, 32.7184803]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 13662}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-117.1751205, 32.7062513, -117.1464322, 32.732422], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.1565739, 32.7229439], [-117.155693, 32.722], [-117.1534422, 32.7214557], [-117.153233, 32.7218743], [-117.1529119, 32.7220745], [-117.152157, 32.7223877], [-117.151607, 32.7235554], [-117.1511685, 32.7244397], [-117.1510108, 32.7244307], [-117.1510315, 32.724387], [-117.1511214, 32.7242198], [-117.1500012, 32.7221561], [-117.1496473, 32.7213721], [-117.1495432, 32.7211946], [-117.149453, 32.7209679], [-117.1494029, 32.7208044], [-117.1493485, 32.7206268], [-117.1492989, 32.7204649], [-117.1492442, 32.720286], [-117.1491989, 32.720084], [-117.1471419, 32.7194967], [-117.1464322, 32.717866], [-117.1467636, 32.717862], [-117.1485899, 32.7168092], [-117.1485813, 32.715761], [-117.1494775, 32.7147154], [-117.1503927, 32.7141894], [-117.1519405, 32.713661], [-117.1524873, 32.7132075], [-117.152842, 32.7126125], [-117.1534749, 32.7115236], [-117.1546479, 32.7104411], [-117.155563, 32.7104379], [-117.1564382, 32.709084], [-117.1566144, 32.7088401], [-117.1574245, 32.7084022], [-117.158257, 32.707291], [-117.1592756, 32.7067079], [-117.1598971, 32.7064741], [-117.1602077, 32.7064876], [-117.1605326, 32.7065951], [-117.1616799, 32.7067526], [-117.1633118, 32.7063018], [-117.1635606, 32.7062513], [-117.1639508, 32.7065875], [-117.1642002, 32.7067535], [-117.1642357, 32.7067771], [-117.164154, 32.7071592], [-117.1644363, 32.7081722], [-117.1665804, 32.7081879], [-117.1673923, 32.7084972], [-117.1680841, 32.7090201], [-117.1693948, 32.709184], [-117.1694958, 32.7092065], [-117.1694592, 32.7093161], [-117.1701679, 32.7108231], [-117.1709851, 32.7113072], [-117.1711384, 32.7114083], [-117.1712246, 32.7115172], [-117.1711383, 32.7120832], [-117.1711426, 32.7125136], [-117.1729906, 32.7139023], [-117.1734318, 32.7140931], [-117.1745713, 32.7147547], [-117.1746482, 32.7157259], [-117.1751205, 32.7171102], [-117.1751038, 32.7172817], [-117.1734384, 32.7179207], [-117.1733027, 32.7181644], [-117.1734304, 32.7197635], [-117.1731846, 32.7205271], [-117.1733123, 32.7214106], [-117.1733192, 32.7224887], [-117.1733389, 32.7233726], [-117.1733952, 32.7239736], [-117.173418, 32.7241191], [-117.1729481, 32.724919], [-117.1720917, 32.7255549], [-117.1719425, 32.7256009], [-117.1710504, 32.7269915], [-117.1700803, 32.7278739], [-117.169563, 32.728546], [-117.1688221, 32.7293448], [-117.1683637, 32.7289395], [-117.166656, 32.729256], [-117.165749, 32.730312], [-117.1648506, 32.7309282], [-117.1641946, 32.7313706], [-117.1639444, 32.7316328], [-117.163033, 32.732422], [-117.1621249, 32.7319311], [-117.1612033, 32.7316852], [-117.1609692, 32.731385], [-117.1598748, 32.7303399], [-117.1594629, 32.7303393], [-117.1593815, 32.7303404], [-117.1582522, 32.7293313], [-117.1575749, 32.7293702], [-117.1575499, 32.728063], [-117.1575055, 32.7269803], [-117.1567279, 32.7254676], [-117.1567923, 32.725313], [-117.1565739, 32.7229439]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;1&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 13745}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-117.034286, 33.2648436, -117.011207, 33.292579], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.0213616, 33.2764264], [-117.0235205, 33.2740429], [-117.0235102, 33.2709362], [-117.0217061, 33.2672342], [-117.0214668, 33.2669867], [-117.0235682, 33.2648436], [-117.025719, 33.267265], [-117.029617, 33.270897], [-117.026649, 33.27433], [-117.027878, 33.276215], [-117.027893, 33.280666], [-117.0311269, 33.2819662], [-117.033495, 33.280113], [-117.033653, 33.280262], [-117.034286, 33.281284], [-117.033524, 33.281605], [-117.032639, 33.285625], [-117.032516, 33.286655], [-117.029623, 33.2869594], [-117.0261644, 33.2873502], [-117.0239587, 33.292579], [-117.0236922, 33.2873234], [-117.0191948, 33.2889175], [-117.01915, 33.285629], [-117.018044, 33.284065], [-117.015793, 33.282814], [-117.011207, 33.2819292], [-117.01609, 33.280151], [-117.017479, 33.278252], [-117.0175547, 33.277195], [-117.0176509, 33.277044], [-117.0213616, 33.2764264]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;2&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 6045}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-117.010902, 32.8376523, -116.983138, 32.8596766], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.00264, 32.844208], [-117.003433, 32.844238], [-117.0056346, 32.8441643], [-117.005913, 32.844135], [-117.007767, 32.843933], [-117.0091018, 32.8427829], [-117.009454, 32.842679], [-117.0099767, 32.8425248], [-117.010902, 32.84314], [-117.009377, 32.845528], [-117.008133, 32.847687], [-117.0099545, 32.8496421], [-117.0103001, 32.8496809], [-117.0108317, 32.8497406], [-117.0105061, 32.8498167], [-117.0099389, 32.8497446], [-117.008057, 32.850796], [-117.007797, 32.851486], [-117.0047589, 32.8502783], [-117.00396, 32.850964], [-117.003273, 32.853291], [-117.004311, 32.854488], [-117.004677, 32.855175], [-117.003166, 32.858639], [-117.0020435, 32.8596766], [-117.000313, 32.859085], [-116.999313, 32.858524], [-116.997658, 32.8568], [-116.995377, 32.857197], [-116.994072, 32.858467], [-116.992981, 32.858505], [-116.991127, 32.856434], [-116.9900746, 32.8552368], [-116.987839, 32.854733], [-116.987244, 32.854961], [-116.9868257, 32.8545474], [-116.9867698, 32.8544302], [-116.984352, 32.851456], [-116.9835013, 32.8510968], [-116.9831587, 32.8509097], [-116.983138, 32.8501976], [-116.9831446, 32.8495101], [-116.9833763, 32.8477094], [-116.9834607, 32.8476053], [-116.9841198, 32.8472667], [-116.9850515, 32.8466582], [-116.9860065, 32.8463131], [-116.9876168, 32.8457215], [-116.9895555, 32.8430359], [-116.991126, 32.8406427], [-116.9908391, 32.8396977], [-116.9908538, 32.8393677], [-116.9909126, 32.8387618], [-116.991463, 32.8384984], [-116.9931452, 32.8376547], [-116.9933666, 32.8376523], [-116.9935797, 32.837653], [-116.9940055, 32.8376986], [-116.9942363, 32.8376938], [-116.9944495, 32.8377137], [-116.9951021, 32.8380241], [-116.9958101, 32.8382837], [-116.9969821, 32.838607], [-116.9971799, 32.8386083], [-116.9985044, 32.8380733], [-116.999419, 32.8380144], [-117.0002532, 32.8383547], [-117.002136, 32.840122], [-117.00264, 32.844208]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;3&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 14426}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-117.1824388, 33.1312746, -117.1532795, 33.1517384], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.1671968, 33.1387344], [-117.1685626, 33.1387081], [-117.1700541, 33.1374502], [-117.1708306, 33.1372851], [-117.1720135, 33.1372119], [-117.1722703, 33.1371858], [-117.1748676, 33.1360666], [-117.175077, 33.1359163], [-117.1755886, 33.1357686], [-117.1756377, 33.1357544], [-117.1773492, 33.1342041], [-117.1775555, 33.1341567], [-117.1779239, 33.1341679], [-117.1793013, 33.1348493], [-117.180393, 33.1354804], [-117.1823955, 33.1360668], [-117.1824388, 33.1361862], [-117.1820465, 33.1371621], [-117.1820349, 33.1394952], [-117.181427, 33.139954], [-117.1804433, 33.1433964], [-117.1803407, 33.1438644], [-117.1800943, 33.1463221], [-117.1800143, 33.146538], [-117.1799327, 33.14673], [-117.177885, 33.1478284], [-117.1738617, 33.1489779], [-117.1709157, 33.1482823], [-117.1703145, 33.148167], [-117.1688453, 33.1476476], [-117.1655788, 33.1467476], [-117.1636305, 33.1491486], [-117.1631486, 33.1500846], [-117.1616717, 33.1517384], [-117.1608778, 33.1508339], [-117.1579379, 33.1481576], [-117.157928, 33.147413], [-117.1559293, 33.1430596], [-117.1549904, 33.1431556], [-117.1535495, 33.1442709], [-117.1532795, 33.144113], [-117.1533648, 33.1439006], [-117.1541883, 33.1424984], [-117.154388, 33.139748], [-117.154266, 33.139374], [-117.154518, 33.139297], [-117.155434, 33.139053], [-117.1558511, 33.1389434], [-117.1571822, 33.1385937], [-117.158171, 33.1383339], [-117.1602481, 33.1356495], [-117.1603729, 33.1356101], [-117.162289, 33.1328942], [-117.1627973, 33.1327664], [-117.1629375, 33.13273], [-117.1645665, 33.1312746], [-117.1660279, 33.1317763], [-117.1655807, 33.1344602], [-117.1671968, 33.1387344]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;4&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 14132}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-117.1948303, 32.7638562, -117.168747, 32.7826128], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.176224, 32.769348], [-117.1791291, 32.7692537], [-117.1783313, 32.7668024], [-117.1782109, 32.7665795], [-117.1783848, 32.766527], [-117.1794522, 32.7662536], [-117.1804516, 32.7661224], [-117.1815844, 32.7661426], [-117.1826524, 32.7662423], [-117.1830343, 32.766278], [-117.1836406, 32.7662255], [-117.1837189, 32.7662319], [-117.1842562, 32.7662756], [-117.1850012, 32.7662595], [-117.1856946, 32.7661232], [-117.1867622, 32.7657647], [-117.1869936, 32.7656686], [-117.1873364, 32.7654739], [-117.1875344, 32.7654528], [-117.1893698, 32.7638562], [-117.1909652, 32.7645824], [-117.191811, 32.766685], [-117.193626, 32.76749], [-117.1948303, 32.7677239], [-117.1947093, 32.7678164], [-117.1946632, 32.7706313], [-117.1947902, 32.7709246], [-117.1946786, 32.7722897], [-117.1935594, 32.7729524], [-117.193008, 32.772705], [-117.1912175, 32.7726124], [-117.1908726, 32.7727776], [-117.1898062, 32.7727375], [-117.1891228, 32.7727947], [-117.1883248, 32.7730833], [-117.1875292, 32.773389], [-117.1874262, 32.7734117], [-117.1861972, 32.7740528], [-117.1851822, 32.7750431], [-117.1846784, 32.7774337], [-117.1844768, 32.7778161], [-117.1814286, 32.778537], [-117.1811112, 32.7801661], [-117.181134, 32.7803238], [-117.18193, 32.7818993], [-117.1809904, 32.7817002], [-117.1784594, 32.7814426], [-117.1775904, 32.7815148], [-117.17614, 32.781513], [-117.175461, 32.781906], [-117.1740284, 32.7816591], [-117.1721838, 32.7826128], [-117.172055, 32.7825427], [-117.1718577, 32.7817453], [-117.17028, 32.780811], [-117.169098, 32.779861], [-117.169678, 32.777149], [-117.1700377, 32.7758377], [-117.1697583, 32.7746114], [-117.1692982, 32.7726617], [-117.168747, 32.77206], [-117.169434, 32.771229], [-117.170227, 32.771591], [-117.1717, 32.771214], [-117.172531, 32.770409], [-117.1755311, 32.7694888], [-117.176224, 32.769348]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;5&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 13672}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-117.0317933, 32.707317, -117.008072, 32.7301774], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.015251, 32.719852], [-117.0139158, 32.718201], [-117.0107428, 32.7167238], [-117.0095471, 32.7156989], [-117.008072, 32.714798], [-117.0092394, 32.7146011], [-117.0098529, 32.7142102], [-117.011372, 32.7123796], [-117.011612, 32.711456], [-117.013443, 32.709949], [-117.014214, 32.707317], [-117.014481, 32.708008], [-117.015839, 32.709087], [-117.018402, 32.708942], [-117.018661, 32.709682], [-117.018913, 32.710411], [-117.020782, 32.712067], [-117.021759, 32.712345], [-117.022636, 32.712593], [-117.02356, 32.712498], [-117.024406, 32.71233], [-117.025192, 32.715221], [-117.0258504, 32.7157443], [-117.0260593, 32.7158763], [-117.027397, 32.716915], [-117.028473, 32.71735], [-117.0285779, 32.718068], [-117.029823, 32.720604], [-117.0317933, 32.7218923], [-117.030746, 32.722744], [-117.0298756, 32.7251998], [-117.0297456, 32.7253327], [-117.027618, 32.72617], [-117.0267956, 32.727295], [-117.024467, 32.729004], [-117.0234567, 32.7301774], [-117.0232632, 32.7301721], [-117.0230373, 32.7299883], [-117.0228147, 32.7297549], [-117.0192842, 32.7292377], [-117.017906, 32.728146], [-117.016953, 32.727615], [-117.0154791, 32.7276739], [-117.0141381, 32.7276455], [-117.0141061, 32.7265444], [-117.0140937, 32.7257787], [-117.01408, 32.7249228], [-117.012993, 32.7229], [-117.015251, 32.719852]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;6&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 9634}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-116.2092237, 32.6113227, -116.183037, 32.6215333], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-116.196839, 32.6139176], [-116.1928738, 32.6215333], [-116.188916, 32.620896], [-116.187363, 32.621033], [-116.185898, 32.621048], [-116.184486, 32.621067], [-116.183037, 32.621086], [-116.183037, 32.620445], [-116.183037, 32.619755], [-116.183037, 32.619102], [-116.1834787, 32.6176786], [-116.1850582, 32.6122672], [-116.1862457, 32.6121778], [-116.18837, 32.612987], [-116.1972601, 32.6113227], [-116.2001531, 32.6120756], [-116.2092237, 32.6139641], [-116.196839, 32.6139176]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;7&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 11677}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-116.6449123, 33.2735037, -116.630577, 33.28091], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-116.6441142, 33.27421], [-116.6449123, 33.2735037], [-116.6442598, 33.2743164], [-116.633278, 33.279625], [-116.630577, 33.28091], [-116.632652, 33.279591], [-116.6441142, 33.27421]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;8&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 5895}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-117.124947, 32.5754733, -117.1011421, 32.5913015], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.111731, 32.5891628], [-117.1099944, 32.5894851], [-117.1053313, 32.5882418], [-117.1016404, 32.5907384], [-117.1011421, 32.5910829], [-117.101334, 32.5839444], [-117.1014475, 32.5837735], [-117.102547, 32.582451], [-117.1050726, 32.5806813], [-117.106903, 32.5790947], [-117.108757, 32.577507], [-117.1106097, 32.5765033], [-117.1116877, 32.5754733], [-117.1122581, 32.5755509], [-117.114326, 32.575592], [-117.1154608, 32.5759682], [-117.1162854, 32.5766282], [-117.117636, 32.577808], [-117.1186922, 32.5786776], [-117.1205074, 32.5797699], [-117.121529, 32.581062], [-117.12236, 32.581833], [-117.124786, 32.58392], [-117.124947, 32.585823], [-117.124023, 32.586536], [-117.122711, 32.5881], [-117.1184682, 32.5910411], [-117.1179993, 32.5913015], [-117.1167295, 32.5911331], [-117.1155107, 32.5907064], [-117.111731, 32.5891628]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;9&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 14651}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-117.113054, 32.898857, -117.084877, 32.9162975], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.102538, 32.9127075], [-117.1019241, 32.9130448], [-117.099654, 32.9134891], [-117.098297, 32.9141114], [-117.0980462, 32.9142384], [-117.0967729, 32.9145017], [-117.0967211, 32.9145092], [-117.095987, 32.9130581], [-117.0958324, 32.9128777], [-117.0956833, 32.9127037], [-117.094482, 32.911873], [-117.091375, 32.9124556], [-117.088638, 32.913586], [-117.088097, 32.914085], [-117.087151, 32.914429], [-117.085663, 32.91357], [-117.087883, 32.909775], [-117.087563, 32.908928], [-117.086357, 32.906876], [-117.084877, 32.905998], [-117.085503, 32.906178], [-117.088753, 32.906265], [-117.089706, 32.905647], [-117.091797, 32.903603], [-117.093788, 32.903683], [-117.096184, 32.902214], [-117.0984781, 32.8996756], [-117.0988822, 32.8994905], [-117.0996067, 32.8992031], [-117.10318, 32.898857], [-117.104149, 32.899006], [-117.1057921, 32.9013566], [-117.1069528, 32.9023463], [-117.1075896, 32.9041176], [-117.1091752, 32.9069349], [-117.1101453, 32.9082916], [-117.113054, 32.9105041], [-117.1126914, 32.911964], [-117.1121362, 32.9125888], [-117.1116587, 32.9138317], [-117.1101317, 32.914784], [-117.1095834, 32.9148408], [-117.1066033, 32.9162975], [-117.1048037, 32.9118639], [-117.102538, 32.9127075]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;10&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 13639}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-116.9401366, 32.785511, -116.907806, 32.8061978], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-116.9146209, 32.7936692], [-116.914558, 32.789501], [-116.914917, 32.787045], [-116.915466, 32.787292], [-116.916924, 32.787563], [-116.91877, 32.785511], [-116.921257, 32.787182], [-116.922127, 32.787182], [-116.922981, 32.787186], [-116.9265942, 32.7873101], [-116.9270244, 32.7867751], [-116.9274202, 32.7862643], [-116.9276351, 32.7857852], [-116.9279433, 32.7857852], [-116.9286087, 32.786058], [-116.9296795, 32.7869284], [-116.9304179, 32.7876678], [-116.9304219, 32.7878991], [-116.9307147, 32.7894598], [-116.933617, 32.790298], [-116.934937, 32.791786], [-116.9372738, 32.7931687], [-116.937637, 32.793514], [-116.9388025, 32.7942974], [-116.9392305, 32.794579], [-116.9399504, 32.7948845], [-116.9401366, 32.794998], [-116.9393872, 32.7956015], [-116.9379811, 32.797049], [-116.9369377, 32.7984096], [-116.9369232, 32.799768], [-116.9363466, 32.800179], [-116.9350475, 32.8011728], [-116.9337264, 32.8020628], [-116.9337076, 32.8020627], [-116.9335976, 32.8020624], [-116.9335802, 32.8020623], [-116.9328895, 32.8020601], [-116.9328556, 32.80206], [-116.9328022, 32.8020598], [-116.9313112, 32.8026048], [-116.9312426, 32.8026505], [-116.9290799, 32.8023068], [-116.927623, 32.8039599], [-116.9272046, 32.8046772], [-116.926903, 32.8058627], [-116.9254491, 32.8054167], [-116.9250127, 32.8054527], [-116.921913, 32.80386], [-116.919724, 32.804043], [-116.918144, 32.8061978], [-116.9181299, 32.8051028], [-116.918114, 32.804039], [-116.918114, 32.802963], [-116.914993, 32.801548], [-116.912132, 32.800217], [-116.912034, 32.8002175], [-116.9116143, 32.8002197], [-116.9110626, 32.8002226], [-116.909691, 32.800777], [-116.908747, 32.8002066], [-116.908363, 32.799171], [-116.907806, 32.795441], [-116.9089861, 32.7920232], [-116.911751, 32.792522], [-116.9146209, 32.7936692]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;11&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 7204}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-116.9639884, 32.788491, -116.9310396, 32.811535], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-116.939323, 32.793461], [-116.941353, 32.791306], [-116.941341, 32.7906951], [-116.944603, 32.788715], [-116.944603, 32.7886838], [-116.944603, 32.788491], [-116.946083, 32.78941], [-116.947327, 32.790989], [-116.9482434, 32.7912205], [-116.950967, 32.7891776], [-116.9509684, 32.7888665], [-116.9536728, 32.791181], [-116.9559164, 32.7927071], [-116.9576046, 32.7939758], [-116.9583437, 32.794464], [-116.9588167, 32.7949551], [-116.9590118, 32.7955716], [-116.9616629, 32.797493], [-116.9632016, 32.7992838], [-116.9639884, 32.8007109], [-116.9638833, 32.8010577], [-116.9633004, 32.8013643], [-116.9624205, 32.8013288], [-116.960342, 32.803802], [-116.958153, 32.805862], [-116.9581533, 32.80624], [-116.9581534, 32.8064274], [-116.9558077, 32.8077371], [-116.9547282, 32.8084951], [-116.952202, 32.81012], [-116.9509762, 32.8114783], [-116.9493762, 32.810409], [-116.94722, 32.808968], [-116.944611, 32.811535], [-116.9431114, 32.8097145], [-116.9409603, 32.8077623], [-116.940163, 32.8077629], [-116.9398225, 32.8077631], [-116.9396647, 32.807649], [-116.9369796, 32.805176], [-116.9357201, 32.804358], [-116.9356657, 32.8039497], [-116.9335802, 32.8020623], [-116.9328895, 32.8020601], [-116.9328556, 32.80206], [-116.9328022, 32.8020598], [-116.9310965, 32.8001959], [-116.9310396, 32.800033], [-116.9312839, 32.79996], [-116.9341469, 32.7972666], [-116.93454, 32.7970648], [-116.9355208, 32.7963365], [-116.9362526, 32.7953815], [-116.9364805, 32.7949713], [-116.937286, 32.794052], [-116.939323, 32.793461]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;12&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 9129}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-117.2039665, 32.827614, -117.175148, 32.8452751], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.184631, 32.838989], [-117.1816449, 32.8370212], [-117.18, 32.838055], [-117.1782521, 32.8395629], [-117.176018, 32.837334], [-117.175163, 32.836617], [-117.175163, 32.835911], [-117.175148, 32.835243], [-117.1755987, 32.8344427], [-117.1763635, 32.834322], [-117.177834, 32.833538], [-117.178787, 32.832172], [-117.180908, 32.832081], [-117.182533, 32.831223], [-117.185089, 32.830711], [-117.186493, 32.827614], [-117.187447, 32.828758], [-117.188927, 32.829643], [-117.190903, 32.829449], [-117.1913365, 32.8291409], [-117.192451, 32.8284513], [-117.1933295, 32.8286029], [-117.19471, 32.829487], [-117.196034, 32.829472], [-117.1971031, 32.8307355], [-117.200043, 32.832355], [-117.201051, 32.8325981], [-117.2017723, 32.8334971], [-117.2023615, 32.8339778], [-117.2039665, 32.8360927], [-117.202461, 32.83802], [-117.201401, 32.83942], [-117.201424, 32.840855], [-117.201462, 32.841549], [-117.200974, 32.842529], [-117.2000489, 32.8447904], [-117.1999095, 32.8448805], [-117.1985202, 32.8452751], [-117.1953065, 32.8444585], [-117.1943904, 32.8444894], [-117.1919958, 32.8447864], [-117.1882754, 32.8449658], [-117.1862093, 32.8450491], [-117.1855396, 32.845092], [-117.1840087, 32.8434264], [-117.1838984, 32.8432628], [-117.1837858, 32.8414325], [-117.184631, 32.838989]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;13&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 13604}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-117.1753829, 32.7069692, -117.1504409, 32.7334562], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.1734304, 32.7197635], [-117.1731846, 32.7205271], [-117.1733123, 32.7214106], [-117.1733192, 32.7224887], [-117.1733389, 32.7233726], [-117.1733952, 32.7239736], [-117.173418, 32.7241191], [-117.1736581, 32.724924], [-117.173992, 32.7255118], [-117.1742214, 32.7258243], [-117.1750059, 32.7265497], [-117.1753466, 32.7267799], [-117.1753829, 32.7269273], [-117.1753479, 32.7271339], [-117.1752559, 32.727252], [-117.1747235, 32.7269226], [-117.1731977, 32.7284678], [-117.1732897, 32.7286892], [-117.1735292, 32.7292572], [-117.1728759, 32.7297511], [-117.1723039, 32.730792], [-117.171829, 32.73119], [-117.170743, 32.7315427], [-117.1699175, 32.732269], [-117.169807, 32.732533], [-117.1696348, 32.7325811], [-117.1695914, 32.7324571], [-117.1679283, 32.7316575], [-117.1670134, 32.7316327], [-117.165756, 32.732395], [-117.1648006, 32.733076], [-117.1639695, 32.7334562], [-117.163033, 32.732422], [-117.162132, 32.732422], [-117.1612044, 32.731824], [-117.1605837, 32.7313867], [-117.1593815, 32.7303404], [-117.1582522, 32.7293313], [-117.1575749, 32.7293702], [-117.1574998, 32.7292811], [-117.1575499, 32.728063], [-117.1575055, 32.7269803], [-117.1567279, 32.7254676], [-117.1567923, 32.725313], [-117.1565739, 32.7229439], [-117.155693, 32.722], [-117.1534422, 32.7214557], [-117.153233, 32.7218743], [-117.1529119, 32.7220745], [-117.1523786, 32.7221467], [-117.1526933, 32.7218111], [-117.1529249, 32.7215676], [-117.1531901, 32.7205305], [-117.1519904, 32.7194294], [-117.151385, 32.7194305], [-117.1504409, 32.7182991], [-117.1508417, 32.717848], [-117.15197, 32.7167914], [-117.1528669, 32.71574], [-117.1538525, 32.7146981], [-117.1546891, 32.7143732], [-117.1555923, 32.7136383], [-117.156503, 32.7125815], [-117.1570591, 32.712281], [-117.1575484, 32.7116221], [-117.1578631, 32.7115052], [-117.1592221, 32.7104362], [-117.1595945, 32.7104315], [-117.1610415, 32.7093795], [-117.1610531, 32.7089201], [-117.1609302, 32.7083216], [-117.1610213, 32.707711], [-117.1621535, 32.7077886], [-117.1623077, 32.7078744], [-117.1641039, 32.7069692], [-117.1641459, 32.7071275], [-117.164154, 32.7071592], [-117.1644363, 32.7081722], [-117.1665804, 32.7081879], [-117.1673923, 32.7084972], [-117.1680841, 32.7090201], [-117.1688515, 32.7091599], [-117.1692112, 32.7091193], [-117.169437, 32.709055], [-117.1695223, 32.7090934], [-117.1697211, 32.7092346], [-117.1701762, 32.7101764], [-117.1711925, 32.7113181], [-117.1716168, 32.7114191], [-117.1729212, 32.7125144], [-117.1730148, 32.7125157], [-117.1730109, 32.7126013], [-117.1730107, 32.7126751], [-117.1744047, 32.714185], [-117.1753368, 32.7144346], [-117.1753403, 32.7146106], [-117.1753431, 32.7147543], [-117.1746482, 32.7157259], [-117.1751205, 32.7171102], [-117.1751038, 32.7172817], [-117.1734384, 32.7179207], [-117.1733027, 32.7181644], [-117.1734304, 32.7197635]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;14&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 15758}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-117.262733, 33.365658, -117.2394475, 33.390327], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.2593482, 33.3767116], [-117.259494, 33.3777058], [-117.259468, 33.378777], [-117.261101, 33.380638], [-117.260887, 33.382629], [-117.260223, 33.38266], [-117.2590142, 33.3821456], [-117.255669, 33.383781], [-117.2556159, 33.3838616], [-117.2552158, 33.3854133], [-117.255737, 33.387547], [-117.255157, 33.387543], [-117.2526142, 33.3896586], [-117.251213, 33.39032], [-117.250809, 33.390327], [-117.250748, 33.389347], [-117.2481105, 33.3874544], [-117.2471886, 33.3874921], [-117.2471154, 33.3874951], [-117.245903, 33.386387], [-117.2433048, 33.3846478], [-117.2426085, 33.3842011], [-117.2413606, 33.3821239], [-117.2394475, 33.380169], [-117.240623, 33.376545], [-117.2427518, 33.3747417], [-117.246483, 33.372463], [-117.247147, 33.370708], [-117.2471212, 33.369278], [-117.2493078, 33.36658], [-117.249779, 33.365658], [-117.2513913, 33.3667945], [-117.2537241, 33.3675823], [-117.2579717, 33.3669295], [-117.257957, 33.365776], [-117.262093, 33.36755], [-117.262733, 33.369278], [-117.2622769, 33.3699315], [-117.2615093, 33.3732494], [-117.261017, 33.374084], [-117.2593482, 33.3767116]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;15&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 8558}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-117.0492755, 33.1217453, -117.02121, 33.142292], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.033684, 33.137726], [-117.032593, 33.138226], [-117.0319021, 33.141805], [-117.0300125, 33.1405842], [-117.0261531, 33.1401085], [-117.0244264, 33.1369424], [-117.0220258, 33.1365951], [-117.02121, 33.136566], [-117.0214426, 33.1349639], [-117.0218458, 33.1345459], [-117.0220392, 33.1345552], [-117.022614, 33.134583], [-117.0244792, 33.1336366], [-117.0257602, 33.1319172], [-117.026892, 33.129925], [-117.0268978, 33.1295129], [-117.0273427, 33.1282494], [-117.028319, 33.1281303], [-117.030956, 33.1252735], [-117.033073, 33.124073], [-117.0341764, 33.124638], [-117.0354909, 33.1255344], [-117.038612, 33.122765], [-117.0413061, 33.1217453], [-117.0413766, 33.1217692], [-117.0413358, 33.1218532], [-117.0410528, 33.1224483], [-117.042137, 33.125648], [-117.0445295, 33.1263065], [-117.0451681, 33.1261003], [-117.0457632, 33.1257189], [-117.0460216, 33.1256338], [-117.0459985, 33.1257279], [-117.0459807, 33.1258006], [-117.0458445, 33.1262773], [-117.0456581, 33.1287358], [-117.048012, 33.130165], [-117.0492755, 33.1303856], [-117.0480627, 33.1319265], [-117.047737, 33.132771], [-117.046829, 33.135456], [-117.046661, 33.137569], [-117.0467943, 33.1398072], [-117.0454552, 33.1412263], [-117.045128, 33.142292], [-117.0428293, 33.1416433], [-117.0420367, 33.1417106], [-117.0387662, 33.1419121], [-117.036972, 33.139214], [-117.0368224, 33.1389713], [-117.036598, 33.138607], [-117.033684, 33.137726]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;16&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 8426}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-117.0088537, 32.6166578, -116.9853242, 32.635901], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.0000974, 32.629694], [-116.9994378, 32.6299151], [-116.9986868, 32.6305973], [-116.9977061, 32.6311404], [-116.9970399, 32.6319255], [-116.9966159, 32.6325987], [-116.9962925, 32.6327829], [-116.9942987, 32.6329781], [-116.9936228, 32.6335835], [-116.9929363, 32.6341241], [-116.9919341, 32.6345776], [-116.9904844, 32.635901], [-116.9895162, 32.6353823], [-116.9892023, 32.6345186], [-116.9888911, 32.6333893], [-116.9873124, 32.6323761], [-116.9860494, 32.6319954], [-116.9853242, 32.6319864], [-116.985348, 32.6318831], [-116.9853691, 32.6317914], [-116.9865738, 32.6319686], [-116.9881888, 32.6314032], [-116.9892454, 32.6295627], [-116.9884408, 32.6280312], [-116.9866143, 32.6259744], [-116.9853641, 32.6254921], [-116.9855905, 32.6243414], [-116.9855014, 32.621347], [-116.9858322, 32.6203243], [-116.987152, 32.6198102], [-116.9875606, 32.6204455], [-116.989291, 32.6217942], [-116.9894413, 32.6219094], [-116.992643, 32.6214417], [-116.992669, 32.6200936], [-116.9928357, 32.6199746], [-116.9941168, 32.6204065], [-116.9959534, 32.6203555], [-116.9962991, 32.6201651], [-116.9966317, 32.6199614], [-116.9974798, 32.6197408], [-116.9989702, 32.6194406], [-117.0009916, 32.6172089], [-117.0018744, 32.6167634], [-117.0029502, 32.616668], [-117.0029986, 32.6166578], [-117.0048015, 32.6172565], [-117.0066494, 32.6171375], [-117.0077831, 32.6192312], [-117.0079994, 32.6211821], [-117.0086485, 32.621783], [-117.0088537, 32.6251646], [-117.0087516, 32.6252002], [-117.0081284, 32.6255937], [-117.0080009, 32.6254514], [-117.0050812, 32.6257451], [-117.0025865, 32.6268343], [-117.002123, 32.6274277], [-117.001814, 32.6289486], [-117.0000974, 32.629694]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;17&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 7623}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-117.1206497, 32.6745363, -117.0935978, 32.6997286], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.0985763, 32.6895297], [-117.0975665, 32.6889432], [-117.0953725, 32.6891284], [-117.0952371, 32.6891222], [-117.0950707, 32.6881488], [-117.0935978, 32.6871914], [-117.0936845, 32.6867675], [-117.094566, 32.685638], [-117.095218, 32.6847287], [-117.095642, 32.683811], [-117.097023, 32.682442], [-117.0971919, 32.6814397], [-117.0978305, 32.6803004], [-117.098549, 32.679138], [-117.0988236, 32.6783973], [-117.1000203, 32.677765], [-117.1009367, 32.6767262], [-117.1018349, 32.6753377], [-117.102119, 32.675255], [-117.1024226, 32.6751641], [-117.1036321, 32.6748291], [-117.1036565, 32.6748225], [-117.104172, 32.674683], [-117.1046845, 32.6745363], [-117.1060487, 32.6751303], [-117.1066901, 32.675405], [-117.107964, 32.675529], [-117.1084513, 32.675562], [-117.1083667, 32.6760962], [-117.1083598, 32.6763992], [-117.1087834, 32.6774685], [-117.1090435, 32.6781251], [-117.1091465, 32.6783704], [-117.1093725, 32.6789646], [-117.1119265, 32.6799979], [-117.1135933, 32.679156], [-117.114952, 32.679644], [-117.1153141, 32.6797654], [-117.1161837, 32.6810093], [-117.1174151, 32.6814869], [-117.1182642, 32.6820738], [-117.118666, 32.6822227], [-117.1193234, 32.6828168], [-117.1194941, 32.6829364], [-117.1193319, 32.6831023], [-117.1192016, 32.6832355], [-117.1193969, 32.6857144], [-117.1195845, 32.6858449], [-117.1204294, 32.6862343], [-117.1203157, 32.6863506], [-117.120369, 32.688957], [-117.1206497, 32.6891532], [-117.1182885, 32.691359], [-117.1185451, 32.6917129], [-117.1191435, 32.692518], [-117.1194443, 32.6927542], [-117.120033, 32.69389], [-117.1188899, 32.6944188], [-117.116768, 32.6939241], [-117.115601, 32.694977], [-117.114899, 32.696016], [-117.1146099, 32.6965484], [-117.112473, 32.698044], [-117.110352, 32.699585], [-117.1072397, 32.6988498], [-117.1064525, 32.6997286], [-117.1052402, 32.6984978], [-117.1028664, 32.6969351], [-117.1025478, 32.6963953], [-117.1016394, 32.6958592], [-117.1005437, 32.6954592], [-117.1002236, 32.6954552], [-117.0985604, 32.6939352], [-117.0981228, 32.6934887], [-117.0975624, 32.6924281], [-117.0981311, 32.6922093], [-117.0985763, 32.6895297]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;18&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 13560}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-117.1322934, 32.5692395, -117.103493, 32.588696], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.1192304, 32.5692395], [-117.11969, 32.569256], [-117.120187, 32.5692492], [-117.1206735, 32.5692577], [-117.121134, 32.5692561], [-117.121597, 32.569263], [-117.122566, 32.56926], [-117.1231002, 32.5692533], [-117.1230944, 32.5710318], [-117.1255041, 32.5733105], [-117.1272054, 32.5747244], [-117.1319032, 32.5726215], [-117.1317568, 32.5735873], [-117.131752, 32.574104], [-117.1317457, 32.5756], [-117.1320878, 32.5766198], [-117.1320512, 32.5773939], [-117.1320473, 32.5777637], [-117.1322934, 32.5788431], [-117.1321514, 32.5795415], [-117.1321478, 32.5799322], [-117.1321465, 32.5800874], [-117.1321449, 32.5802852], [-117.1321447, 32.5805033], [-117.1317277, 32.5806499], [-117.1295784, 32.582451], [-117.1280389, 32.5839379], [-117.1274067, 32.5843245], [-117.126823, 32.584442], [-117.124947, 32.585823], [-117.122513, 32.587582], [-117.117973, 32.588696], [-117.11738, 32.588688], [-117.1149165, 32.58709], [-117.1136918, 32.5859911], [-117.11306, 32.585491], [-117.1124509, 32.5849985], [-117.1112239, 32.5839661], [-117.1109046, 32.5837925], [-117.1100159, 32.5828956], [-117.10936, 32.582275], [-117.1081287, 32.5812045], [-117.1075406, 32.5806819], [-117.105682, 32.579094], [-117.1044426, 32.5782686], [-117.103508, 32.576515], [-117.103493, 32.576031], [-117.105133, 32.574696], [-117.107385, 32.572872], [-117.1080378, 32.5714978], [-117.110069, 32.570194], [-117.112244, 32.569553], [-117.114433, 32.569492], [-117.115669, 32.569572], [-117.116913, 32.569569], [-117.118736, 32.569355], [-117.1192304, 32.5692395]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;19&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 14655}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-117.0717638, 32.9678095, -117.0488441, 32.9922687], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.065964, 32.981037], [-117.065849, 32.984753], [-117.0695122, 32.9864051], [-117.0717638, 32.9877785], [-117.0717021, 32.9879419], [-117.0714772, 32.9881685], [-117.0705228, 32.9899827], [-117.0704909, 32.9904161], [-117.0699015, 32.9895917], [-117.065193, 32.989643], [-117.062248, 32.991364], [-117.0587441, 32.9919275], [-117.0580472, 32.9922687], [-117.0579306, 32.9919744], [-117.05574, 32.990398], [-117.055061, 32.987949], [-117.053574, 32.986568], [-117.0523407, 32.9840856], [-117.0496999, 32.982739], [-117.0488441, 32.9811603], [-117.0494558, 32.9803227], [-117.0505911, 32.9785896], [-117.051521, 32.9771551], [-117.052032, 32.975986], [-117.053108, 32.976017], [-117.056664, 32.976086], [-117.058144, 32.974133], [-117.058357, 32.97311], [-117.060097, 32.970497], [-117.060883, 32.97007], [-117.062479, 32.9678095], [-117.06311, 32.969109], [-117.065041, 32.970478], [-117.066727, 32.970448], [-117.068283, 32.969574], [-117.071091, 32.97081], [-117.0713731, 32.9715146], [-117.071663, 32.972172], [-117.0711789, 32.9742722], [-117.0712499, 32.9751048], [-117.0704737, 32.9774554], [-117.068001, 32.976608], [-117.065964, 32.981037]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;20&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 12859}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-117.076688, 32.592515, -117.046494, 32.617039], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.064247, 32.61504], [-117.062973, 32.615986], [-117.060966, 32.615952], [-117.06076, 32.61602], [-117.06028, 32.614227], [-117.057549, 32.613087], [-117.0569556, 32.613265], [-117.0556232, 32.6139143], [-117.055527, 32.613674], [-117.0554339, 32.6134317], [-117.055199, 32.61282], [-117.055008, 32.612309], [-117.052147, 32.610825], [-117.051193, 32.611118], [-117.050369, 32.611404], [-117.049309, 32.61116], [-117.04763, 32.610756], [-117.0465844, 32.606359], [-117.046494, 32.606113], [-117.048073, 32.604893], [-117.0488296, 32.6012174], [-117.0482987, 32.60025], [-117.0482887, 32.6001321], [-117.0488477, 32.5996121], [-117.051514, 32.596928], [-117.053253, 32.597313], [-117.0554316, 32.5947171], [-117.055923, 32.59421], [-117.0580828, 32.5926235], [-117.0593436, 32.5925636], [-117.0602408, 32.592515], [-117.0624589, 32.5926142], [-117.0637001, 32.5931565], [-117.0660317, 32.5941579], [-117.0667232, 32.594758], [-117.0690769, 32.5963476], [-117.072144, 32.598469], [-117.073792, 32.601788], [-117.074272, 32.601925], [-117.074867, 32.602104], [-117.0761797, 32.6028787], [-117.076688, 32.603058], [-117.075363, 32.604286], [-117.074768, 32.605015], [-117.072609, 32.606415], [-117.0716527, 32.608628], [-117.070862, 32.609364], [-117.069923, 32.611591], [-117.0694402, 32.6126097], [-117.068966, 32.6133203], [-117.0685056, 32.613852], [-117.0679844, 32.6146999], [-117.067459, 32.617039], [-117.064247, 32.61504]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;21&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 14847}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-117.2396559, 32.7929289, -117.2110889, 32.811185], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.214333, 32.803654], [-117.2141538, 32.8033529], [-117.2140883, 32.8032428], [-117.214076, 32.8032221], [-117.21357, 32.802372], [-117.2134204, 32.8021307], [-117.2133233, 32.8019742], [-117.212723, 32.801006], [-117.2126595, 32.8001997], [-117.2115256, 32.7986493], [-117.2110889, 32.7982805], [-117.2114697, 32.7979712], [-117.2116937, 32.7977548], [-117.2118377, 32.7976346], [-117.211986, 32.797509], [-117.2122618, 32.7974141], [-117.2131329, 32.797863], [-117.214274, 32.7978873], [-117.2152123, 32.7973418], [-117.2156447, 32.7947018], [-117.2156783, 32.7945915], [-117.2157422, 32.7937467], [-117.2157967, 32.7935423], [-117.2162235, 32.7931503], [-117.2169877, 32.793495], [-117.2174215, 32.7939147], [-117.219586, 32.7948343], [-117.2225362, 32.7951046], [-117.2227516, 32.7950548], [-117.2240993, 32.7945087], [-117.2242513, 32.7946917], [-117.2253023, 32.7955369], [-117.2260228, 32.7955772], [-117.2264908, 32.7955228], [-117.228142, 32.796612], [-117.229958, 32.796196], [-117.230637, 32.794098], [-117.231033, 32.793442], [-117.2313429, 32.7929289], [-117.232101, 32.793781], [-117.2334146, 32.794707], [-117.234154, 32.795258], [-117.235733, 32.795818], [-117.235863, 32.79628], [-117.238098, 32.797291], [-117.2395492, 32.7979423], [-117.2396559, 32.7980833], [-117.238708, 32.79929], [-117.2385331, 32.8003015], [-117.2380244, 32.8009685], [-117.2369253, 32.801448], [-117.2360665, 32.8033516], [-117.234352, 32.804192], [-117.2336231, 32.8063765], [-117.2338955, 32.807941], [-117.2339166, 32.8082602], [-117.2338484, 32.8082748], [-117.233299, 32.808392], [-117.2332357, 32.8084062], [-117.2327003, 32.8085261], [-117.232567, 32.808556], [-117.2321068, 32.8086593], [-117.231667, 32.808758], [-117.2306399, 32.8090011], [-117.2301702, 32.8091123], [-117.2300329, 32.8091448], [-117.2280432, 32.8091595], [-117.2263057, 32.8094677], [-117.225739, 32.810455], [-117.224208, 32.811185], [-117.223572, 32.810989], [-117.2220234, 32.8102336], [-117.2207903, 32.8107367], [-117.2182269, 32.8105353], [-117.2180255, 32.8105898], [-117.2178216, 32.810645], [-117.2176144, 32.810701], [-117.2173566, 32.8107708], [-117.2169947, 32.8104319], [-117.2168587, 32.809941], [-117.2138742, 32.8094922], [-117.213314, 32.8084253], [-117.2121954, 32.8074807], [-117.2126591, 32.8063901], [-117.213247, 32.8063], [-117.2144973, 32.8042467], [-117.214333, 32.803654]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;22&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 13561}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-117.0954316, 32.731266, -117.0758908, 32.7560689], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.083794, 32.741634], [-117.084137, 32.738102], [-117.085953, 32.736843], [-117.086319, 32.734219], [-117.086807, 32.733013], [-117.0883362, 32.7328498], [-117.091759, 32.732964], [-117.092369, 32.73222], [-117.092842, 32.731659], [-117.093163, 32.731266], [-117.093819, 32.731781], [-117.0949156, 32.7323703], [-117.0954316, 32.7327619], [-117.0953821, 32.73281], [-117.0950251, 32.733155], [-117.0948883, 32.7332872], [-117.094757, 32.733414], [-117.0935632, 32.7354733], [-117.092232, 32.73711], [-117.092278, 32.740307], [-117.0925145, 32.7414658], [-117.0923, 32.742126], [-117.093399, 32.745865], [-117.0950112, 32.7476962], [-117.094957, 32.749565], [-117.0939054, 32.749991], [-117.0928118, 32.7513702], [-117.0906504, 32.7530901], [-117.0884959, 32.7549135], [-117.087929, 32.75491], [-117.0873878, 32.7549021], [-117.0852567, 32.7548829], [-117.0836156, 32.7560689], [-117.0834366, 32.7560658], [-117.0825794, 32.7552458], [-117.0821276, 32.754883], [-117.080639, 32.7531509], [-117.0793872, 32.7522094], [-117.07893, 32.7521203], [-117.0785757, 32.7510902], [-117.078212, 32.7506594], [-117.0771504, 32.7497239], [-117.0758908, 32.7477206], [-117.0766678, 32.7466938], [-117.0776892, 32.745919], [-117.0780729, 32.7429936], [-117.0781272, 32.7428391], [-117.079773, 32.742054], [-117.083794, 32.741634]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;23&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 13632}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-117.104279, 32.8281846, -117.0799081, 32.8427551], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-117.0928985, 32.8345515], [-117.0950855, 32.8340259], [-117.0956956, 32.8342253], [-117.097382, 32.833485], [-117.098364, 32.8321023], [-117.0996621, 32.8326501], [-117.102257, 32.830723], [-117.1030611, 32.8306458], [-117.1032766, 32.8306932], [-117.1029147, 32.8309844], [-117.103554, 32.834091], [-117.104279, 32.834488], [-117.103813, 32.835083], [-117.103767, 32.837936], [-117.10173, 32.835461], [-117.0997928, 32.8357936], [-117.099533, 32.837696], [-117.100807, 32.838947], [-117.1003829, 32.8403536], [-117.1002836, 32.8406822], [-117.1000972, 32.8406552], [-117.0998957, 32.8406132], [-117.0974921, 32.8425198], [-117.0973707, 32.8416862], [-117.0973483, 32.8410007], [-117.095284, 32.83934], [-117.093933, 32.840542], [-117.091739, 32.8406405], [-117.0898577, 32.840979], [-117.0891497, 32.8412315], [-117.0869455, 32.8416212], [-117.0865457, 32.8418426], [-117.0862571, 32.8418669], [-117.0856757, 32.8420201], [-117.0844995, 32.8422007], [-117.0833661, 32.8427114], [-117.0831007, 32.8427551], [-117.0829236, 32.8425952], [-117.0824266, 32.8420717], [-117.0821804, 32.8418939], [-117.0802219, 32.8409576], [-117.0799081, 32.8400911], [-117.0809324, 32.8398683], [-117.0815291, 32.8375], [-117.0811541, 32.8366588], [-117.081917, 32.834244], [-117.080162, 32.832848], [-117.081093, 32.832043], [-117.0809701, 32.8292893], [-117.081863, 32.828381], [-117.0841113, 32.8281846], [-117.0850955, 32.8287692], [-117.0840984, 32.8299265], [-117.0850347, 32.8325485], [-117.0854194, 32.833256], [-117.088338, 32.8333994], [-117.0897715, 32.8323397], [-117.0898359, 32.8321373], [-117.0907125, 32.8325111], [-117.0918943, 32.8324464], [-117.0928985, 32.8345515]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;24&quot;, &quot;properties&quot;: {&quot;distance&quot;: 1600, &quot;origin&quot;: 13550}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
    geo_json_71bfc51a2c81c8d661c55265c2abf6c0.bindTooltip(
    function(layer){
    let div = L.DomUtil.create('div');
    
    let handleObject = feature=>typeof(feature)=='object' ? JSON.stringify(feature) : feature;
    let fields = [&quot;origin&quot;, &quot;distance&quot;];
    let aliases = [&quot;origin&quot;, &quot;distance&quot;];
    let table = '<table>' +
        String(
        fields.map(
        (v,i)=>
        `<tr>
            <th>${aliases[i]}</th>
            
            <td>${handleObject(layer.feature.properties[v])}</td>
        </tr>`).join(''))
    +'</table>';
    div.innerHTML=table;
    
    return div
    }
    ,{&quot;className&quot;: &quot;foliumtooltip&quot;, &quot;sticky&quot;: true});
                     
    
            geo_json_71bfc51a2c81c8d661c55265c2abf6c0.addTo(map_106844c9aa728f91d91523b07a5c0db4);
        
</script>
</html>" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen=""></iframe></div></div>
</div>
</div>
<p>If we adopt the “neighborhood unit” perspective, it might be reasonable to put a school at the center of the neighborhood, as it would provide equitable access to all residents. In that case, these are your neighborhoods</p>
</section>
<section id="extensions" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="extensions"><span class="header-section-number">8.3</span> Extensions</h2>
<p>One nice thing about this implementation is that it’s indifferent to the structure of the input network. It could be pedestrian-based (which is the most common), but you could also use <a href="https://github.com/UDST/urbanaccess">urbanaccess</a> to create a multimodel network by combining OSM and GTFS data. For this reason, the isochrone function provided here can be much more useful than commercially-provided web services <a href="https://docs.mapbox.com/playground/isochrone/">like mapbox</a>, first because all the computation happens locally (so no paywall, and no unwanted data collection) and second because the researcher has full control over how the network is structured. This allows you to do the kinds of analyses common in actual transportation modeling and planning–like adding a new transit line, a new lane in the freeway, or a new toll road, and see how the accessibility surface responds (and how the location choices of households and businesses will reallocate given this new geography).</p>
<p>Running the above functions on that multimodal network would give a good sense of “baseline” accessibility in a study region. An interested researcher could then make some changes to the GTFS network, say, by increasing bus frequency along a given corridor, then create another combined network and compare results. Who would benefit from such a change, and what might be the net costs?</p>
<p>And thus, the seeds of <strong>open</strong> and <strong>reproducible</strong> <a href="https://www.tandfonline.com/doi/full/10.1080/01944363.2020.1746688">scenario planning</a> have been sown :)</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./segregation_dynamics.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Spatiotemporal Segregation Dynamics</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 <p xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"><a property="dct:title" rel="cc:attributionURL" href="https://oturns.github.io/geosnap-guide">A Guide to Geosnap</a> by <a rel="cc:attributionURL dct:creator" property="cc:attributionName" href="https://knaaptime.com">elijah knaap</a> is licensed under <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">CC BY-NC-ND 4.0<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nd.svg?ref=chooser-v1"></a></p>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>